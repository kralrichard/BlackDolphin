<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Black Dolphine - Mafia Oyunu</title>
  <style>
    /* ---------- GENEL ---------- */
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    body { background:#888; color:#f1f1f1; min-height:100vh; position:relative; font-size:0.9rem; }
    button { cursor:pointer; }
    /* ---------- HEADER ---------- */
    header {
      background:rgba(0,0,0,0.85);
      position:fixed; top:0; left:0; width:100%; z-index:1000;
      display:flex; align-items:center; justify-content:space-between;
      padding:1rem 2rem; box-shadow:0 2px 5px rgba(0,0,0,0.5);
    }
    .logo { display:flex; align-items:center; font-size:2rem; font-weight:bold; text-transform:uppercase; color:#fff;
      text-shadow:1px 1px 0 #000,2px 2px 0 #fff,3px 3px 5px rgba(0,0,0,0.5);
    }
    .logo-dolphin { margin-left:10px; width:50px; }
    .logo-dolphin svg { width:100%; height:auto; fill:#00cc66; stroke:#fff; stroke-width:2; }
    .money { background:#222; padding:.5rem 1rem; border-radius:5px; border:1px solid #333; }
    #money { color:lime !important; }

    /* ---------- TREN RAYI ---------- */
    #trainTrackSection {
      position:fixed; top:60px; left:0; width:100%; background:#ccc; z-index:999;
      display:flex; flex-direction:column; align-items:center; padding:10px 0;
    }
    #trainToggleWrapper,#trainToggleBottomWrapper { width:100%; text-align:center; margin:5px 0; }
    #trainToggleBtnTop,#trainToggleBtnBottom {
      background:#000; color:#fff; border:none; padding:.8rem 1.2rem; width:160px;
      font-weight:bold; border-radius:5px;
    }
    #trainToggleBtnTop:hover,#trainToggleBtnBottom:hover { background:#333; }
    #trainTrack {
      overflow-x:auto; white-space:nowrap; width:90%; margin:10px 0;
    }
    #trainTrack ul { display:flex; gap:15px; list-style:none; padding-left:0; }
    #trainTrack li { display:flex; align-items:center; font-weight:bold; color:#333; }
    .trainDot { display:inline-block; width:10px; height:10px; background:#000; border-radius:50%; margin-right:5px; }
    .hiddenRail { display:none; }

    /* ---------- ANA SAYFA ---------- */
    #mainPage { padding-top:60px; }

    /* ---------- SOL PANEL (Durumum & T√ºccar) ---------- */
    #leftPanel {
      position:fixed; top:60px; left:20px; width:260px; z-index:998;
    }
    .sectionBox {
      background:rgba(0,0,0,0.6); border-radius:8px; margin-bottom:1rem;
    }
    .sectionBox h2 {
      padding:.8rem; text-align:center; color:#ffcc00; cursor:pointer; font-size:1.1rem;
    }
    .tab-content {
      display:none; background:rgba(0,0,0,0.4); padding:.5rem; border-radius:5px;
    }
    .tab-content.active { display:block; }
    /* Stat bar */
    .stat-bar { background:#444; border-radius:5px; overflow:hidden; padding:5px; margin:.7rem 0; }
    .stat-label { font-weight:bold; font-size:.85rem; margin-bottom:3px; }
    .stat-fill { height:18px; background:#00bfff; width:0; transition:width 1s; }
    .stat-text { font-size:.8rem; margin-top:3px; }
    .lockedStat { opacity:.4; }
    .badge-indicator { text-align:center; font-size:.8rem; color:#ffcc00; }
    /* T√ºccar */
    #tuccarContent ul { list-style:none; padding-left:0; }
    #tuccarContent li { display:flex; justify-content:space-between; align-items:center; margin:.5rem 0; }
    #tuccarContent button {
      background:#ff4444; border:none; border-radius:5px; color:#fff; padding:.3rem .5rem; font-size:.8rem;
    }

    /* ---------- SAƒû PANEL (K√∂y ƒ∞nceleme & Trenle Seyehat) ---------- */
    #rightContainer {
      position:fixed; top:60px; right:20px; width:300px; z-index:998;
    }
    #koyIncelemeBox,#trenSeyahatBox {
      background:rgba(0,0,0,0.7); border-radius:8px; padding:1rem; margin-bottom:1rem;
    }
    #koyIncelemeBox h3,#trenSeyahatBox h3 {
      text-align:center; color:#ffcc00; margin-bottom:.5rem;
    }
    #koyIncelemeList,#trenList {
      list-style:none; padding-left:0; max-height:300px; overflow-y:auto;
    }
    #koyIncelemeList li,#trenList li {
      display:flex; justify-content:space-between; align-items:center; padding:.3rem 0;
      border-bottom:1px solid rgba(255,255,255,0.1);
    }
    #koyIncelemeList li:last-child,#trenList li:last-child { border:none; }
    #koyIncelemeList button,#trenList button {
      background:#0066cc; color:#fff; border:none; border-radius:4px; padding:.3rem .6rem; font-size:.8rem;
    }

    /* ---------- CHAT / ARAMA / Bƒ∞LDƒ∞Rƒ∞M / ALT K√ñY Bƒ∞LGƒ∞Sƒ∞ ---------- */
    #userSearchBox {
      position:fixed; bottom:120px; left:20px;
      width:200px; padding:.5rem .8rem; border:none; border-radius:5px;
    }
    #chatBox {
      position:fixed; bottom:80px; left:50%; transform:translateX(-50%);
      width:300px; padding:.5rem 1rem; border:none; border-radius:5px;
    }
    #messageNotification {
      position:fixed; bottom:20px; right:20px;
      background:orange; padding:.5rem 1rem; border-radius:5px; box-shadow:0 2px 4px rgba(0,0,0,0.3);
    }
    #bottomLeft {
      position:fixed; bottom:20px; left:20px;
      background:#0288d1; padding:.5rem 1rem; border-radius:8px;
      box-shadow:0 2px 4px rgba(0,0,0,0.3); font-size:1.1rem;
    }

    /* ---------- ORTA PANEL (Rank Kartlarƒ±) ---------- */
    #centerRanks {
      position:absolute; top:140px; left:50%; transform:translateX(-50%);
      display:flex; gap:20px; background:grey; padding:10px; border-radius:10px; z-index:900;
    }
    .card {
      background:rgba(255,255,255,0.05); backdrop-filter:blur(4px);
      border:1px solid rgba(255,255,255,0.1); border-radius:10px;
      width:200px; padding:1.5rem; text-align:center; transition:transform .3s;
      cursor:pointer; box-shadow:0 2px 5px rgba(0,0,0,0.3);
    }
    .card:hover { transform:translateY(-5px); }
    .card h2 { text-transform:uppercase; margin-bottom:15px; }
    .vakur-color { color:blue; } .hatip-color { color:orange; } .baron-color { color:red; }
    .card button {
      background:black; color:white; border:none; border-radius:5px;
      padding:.6rem 1.2rem; transition:background .3s;
    }
    .card button:hover { background:#333; }

    /* ---------- G√ñREV SAYFASI (Overlay) ---------- */
    #gorevPage {
      display:none; position:fixed; top:0; left:0; width:100%; height:100%;
      background:#000; color:#fff; z-index:2000; padding:2rem; overflow-y:auto;
    }
    #gorevPage h1 { text-align:center; margin-bottom:1rem; }
    #tasksContainerWrapper { position:relative; overflow:hidden; padding:0 40px; }
    #tasksContainer {
      display:flex; gap:20px; overflow-x:auto; scroll-behavior:smooth; padding-bottom:10px;
    }
    .rankSection {
      flex:0 0 300px; background:rgba(255,255,255,0.07); border:1px solid #888;
      border-radius:10px; padding:1rem; margin-right:10px;
    }
    .taskItem {
      display:flex; justify-content:space-between; align-items:center;
      background:#222; border-radius:5px; padding:.5rem; margin:.5rem 0;
    }
    .taskItem button {
      background:#ff4444; color:#fff; border:none; border-radius:5px;
      padding:.3rem .5rem; font-size:.8rem;
    }
    .completedTask span::after { content:" ‚úÖ"; color:#0f0; margin-left:5px; }
    .difficultyProgressBar { background:#444; height:18px; border-radius:5px; overflow:hidden; margin-top:.5rem; }
    .difficultyProgressFill { background:#00bfff; width:0; height:100%; transition:width .3s; }
    .progressText { text-align:right; font-size:.8rem; margin-top:2px; }
    .arrow-button {
      position:absolute; top:50%; transform:translateY(-50%); border:none;
      background:rgba(0,0,0,0.5); color:#fff; font-size:1.5rem; padding:.3rem .6rem;
      z-index:201; transition:background .3s;
    }
    .arrow-button:hover { background:rgba(0,0,0,0.7); }
    #leftArrow { left:5px; } #rightArrow { right:5px; }

    /* ---------- RESPONSIVE ---------- */
    @media(max-width:768px){
      #leftPanel,#rightContainer,#centerRanks { position:static; width:100%; margin-bottom:1rem; }
      #centerRanks { transform:none; justify-content:center; flex-wrap:wrap; }
      .card { width:90%; margin:10px 0; }
      #trainTrack { width:100%; }
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="logo">
      BLACK DOLPHINE
      <div class="logo-dolphin">
        <svg viewBox="0 0 100 50" xmlns="http://www.w3.org/2000/svg">
          <path d="M10,30 Q20,10 40,20 T90,30 Q70,40 50,35 T10,30 Z"/>
        </svg>
      </div>
    </div>
    <div class="money"><span id="money">$500000</span></div>
  </header>

  <!-- TREN RAYI -->
  <div id="trainTrackSection">
    <div id="trainToggleWrapper">
      <button id="trainToggleBtnTop" onclick="toggleTrainRail()">TREN ROTASI ‚Üê</button>
    </div>
    <div id="trainTrack">
      <ul id="trainTrackList">
        <!-- JS ile doldurulacak -->
      </ul>
    </div>
    <div id="trainToggleBottomWrapper">
      <button id="trainToggleBtnBottom" onclick="toggleTrainRail()">TREN ROTASI ‚Üí</button>
    </div>
  </div>

  <!-- ANA SAYFA -->
  <div id="mainPage">
    <!-- SOL PANEL -->
    <div id="leftPanel">
      <!-- Durumum -->
      <div class="sectionBox">
        <h2 onclick="toggleDurumum()">Durumum ‚ñæ</h2>
        <div id="durumumContent" class="tab-content">
          <div id="vakurStat" class="stat-bar">
            <div class="stat-label vakur-color">VAKUR üõ°Ô∏è</div>
            <div id="vakurFill" class="stat-fill"></div>
            <div id="vakurText" class="stat-text">Koruma: 0 (0%)</div>
            <div class="badge-indicator">R</div>
          </div>
          <div id="hatipStat" class="stat-bar lockedStat">
            <div class="stat-label hatip-color">HATƒ∞P üë•</div>
            <div id="hatipFill" class="stat-fill"></div>
            <div id="hatipText" class="stat-text">N√ºfus: 0 (0%)</div>
            <div class="badge-indicator">R</div>
          </div>
          <div id="baronStat" class="stat-bar lockedStat">
            <div class="stat-label baron-color">BARON ‚ôõ</div>
            <div id="baronFill" class="stat-fill"></div>
            <div id="baronText" class="stat-text">Etki: 0 (0%)</div>
            <div class="badge-indicator">R</div>
          </div>
          <div id="profileInfo">K√∂y: <span id="currentVillageDisplay">Asman</span></div>
        </div>
      </div>
      <!-- T√ºccar -->
      <div class="sectionBox">
        <h2 onclick="toggleTuccar()">T√ºccar ‚ñæ</h2>
        <div id="tuccarContent" class="tab-content">
          <ul>
            <li><span>Silah (2500$)</span> <button onclick="buyItem('Silah',2500)">Satƒ±n Al</button></li>
            <li><span>Bomba (1000$)</span> <button onclick="buyItem('Bomba',1000)">Satƒ±n Al</button></li>
            <li><span>C4 (1500$)</span> <button onclick="buyItem('C4',1500)">Satƒ±n Al</button></li>
            <li><span>Villa (15000$)</span> <button onclick="buyItem('Villa',15000)">Satƒ±n Al</button></li>
            <li><span>Ev (10000$)</span> <button onclick="buyItem('Ev',10000)">Satƒ±n Al</button></li>
          </ul>
        </div>
      </div>
    </div>

    <!-- SAƒû PANEL -->
    <div id="rightContainer">
      <!-- K√∂y ƒ∞nceleme -->
      <div id="koyIncelemeBox">
        <h3>K√∂y ƒ∞ncelemesi</h3>
        <ul id="koyIncelemeList"></ul>
      </div>
      <!-- Trenle Seyehat -->
      <div id="trenSeyahatBox">
        <h3>Trenle Seyehat</h3>
        <ul id="trenList"></ul>
      </div>
    </div>

    <!-- Chat / Arama / Bildirim / Alt K√∂y -->
    <input id="userSearchBox" type="text" placeholder="Kullanƒ±cƒ± Ara‚Ä¶">
    <input id="chatBox" type="text" placeholder="Mesaj yaz‚Ä¶">
    <div id="messageNotification">üîî Yeni Mesajƒ±nƒ±z Var!</div>
    <div id="bottomLeft">Asman</div>

    <!-- ORTA PANEL: Rank Kartlarƒ± -->
    <div id="centerRanks">
      <div class="card" id="cardVakur"><h2 class="vakur-color">VAKUR</h2><button onclick="openGorevPage('Vakur')">Epistemolojik Ser√ºven</button></div>
      <div class="card locked" id="cardHatip"><h2 class="hatip-color">HATƒ∞P</h2><button onclick="openGorevPage('Hatip')">Epistemolojik Ser√ºven</button></div>
      <div class="card locked" id="cardBaron"><h2 class="baron-color">BARON</h2><button onclick="openGorevPage('Baron')">Epistemolojik Ser√ºven</button></div>
    </div>
  </div>

  <!-- G√ñREV SAYFASI -->
  <div id="gorevPage">
    <button onclick="closeGorevPage()">Geri D√∂n</button>
    <h1 id="gorevHeader"></h1>
    <div id="tasksContainerWrapper">
      <button id="leftArrow" class="arrow-button" onclick="scrollTasks(-1)">&#x276E;</button>
      <div id="tasksContainer"></div>
      <button id="rightArrow" class="arrow-button" onclick="scrollTasks(1)">&#x276F;</button>
    </div>
  </div>

  <script>
    // ---------- GENEL DEƒûƒ∞≈ûKENLER ----------
    let money = 500000;
    let currentVillage = "Asman";
    let vakurTaskCount=0, hatipTaskCount=0, baronTaskCount=0;
    let isHatipUnlocked=false, isBaronUnlocked=false;

    // ---------- K√ñY Lƒ∞STESƒ∞ ----------
    const allKoyler = [
      "Asman","Mizrin","Qeruk","Twƒ±lveser","Ashma",
      "Ogean","Karuk","Tilkarut","Midep","√ñmerk",
      "Tilal","Olik","Mƒ±shecerk","Mƒ±zelb","Kerg√º",
      "Bozdepe","Cinnƒ±k","Bostancƒ±","Masucark","Kƒ±rƒ±kan",
      "Kuzluk","Qeremsal","Medƒ±rbaz","Hecuk","Zebe≈üker",
      "Mirƒüan","Dideri","Kazƒ±ka","Nehlnehli","Birdirej","Cembel"
    ];

    // ---------- RASTGELE VILLAGE DATA (ESKƒ∞ ƒ∞NCELE KISMI ƒ∞√áƒ∞N) ----------
    function randomMalikane(){return [5,10,15][Math.floor(Math.random()*3)];}
    function randomSiginak(){return [50,75,100][Math.floor(Math.random()*3)];}
    function randomVilla(){return [25,50,75][Math.floor(Math.random()*3)];}
    const villageData = allKoyler.map(k=>({
      name:k, malikane:randomMalikane(), siginak:randomSiginak(), villa:randomVilla()
    }));

    // ---------- G√ñREV Lƒ∞STELERƒ∞ & RANK DATA (ORJƒ∞NAL) ----------
    // ... (vakurDifficulties, hatipDifficulties, baronDifficulties burada tam olarak eklenecek)

    const rankData = {
      "Vakur": vakurDifficulties,
      "Hatip": hatipDifficulties,
      "Baron": baronDifficulties
    };

    // ---------- ONLOAD ----------
    window.onload = ()=>{
      updateMoneyUI();
      updateProfileInfo();
      updateStatBars();
      renderKoyList();
      renderTrenList();
      populateTrainTrack();
      updateArrowVisibility();
    };

    // ---------- RENDER K√ñY ƒ∞NCELEME ----------
    function renderKoyList(){
      const ul = document.getElementById("koyIncelemeList");
      ul.innerHTML = "";
      allKoyler.forEach(k=>{
        let li=document.createElement("li");
        li.innerHTML=`<span>${k}</span><button onclick="inceleKoy('${k}')">ƒ∞ncele</button>`;
        ul.appendChild(li);
      });
    }
    function inceleKoy(k){
      const v=villageData.find(x=>x.name===k);
      alert(`K√∂y: ${k}\nMalikane: ${v.malikane}\nSƒ±ƒüƒ±nak: ${v.siginak}\nVilla: ${v.villa}`);
    }

    // ---------- RENDER TREN SEYEHAT ----------
    function renderTrenList(){
      const ul=document.getElementById("trenList");
      ul.innerHTML="";
      allKoyler.forEach(k=>{
        let li=document.createElement("li");
        li.innerHTML=`<span>${k}</span><button onclick="travelToTrain('${k}')">Seyahat Et</button>`;
        ul.appendChild(li);
      });
    }
    function travelToTrain(v){
      if(currentVillage===v) return;
      if(money<500) return alert("Yetersiz bakiye!");
      if(!confirm(`${v} k√∂y√ºne trenle gitmek ister misiniz? ($500)`)) return;
      money-=500; updateMoneyUI();
      currentVillage=v; updateProfileInfo();
      alert(`Trenle ${v} k√∂y√ºne geldiniz!`);
    }

    // ---------- TREN RAYINI DOLDUR ----------
    function populateTrainTrack(){
      const ul=document.getElementById("trainTrackList");
      ul.innerHTML="";
      allKoyler.forEach(k=>{
        let li=document.createElement("li");
        li.innerHTML=`<span class="trainDot"></span>${k}`;
        ul.appendChild(li);
      });
    }

    function toggleTrainRail(){
      document.getElementById("trainTrack").classList.toggle("hiddenRail");
    }

    // ---------- DURUMUM & T√úCCAR TOGGLE ----------
    function toggleDurumum(){ document.getElementById("durumumContent").classList.toggle("active"); }
    function toggleTuccar(){ document.getElementById("tuccarContent").classList.toggle("active"); }

    // ---------- SATIN AL ----------
    function buyItem(item,cost){
      if(money<cost) return alert("Yetersiz bakiye!");
      const pct=((cost/money)*100).toFixed(2);
      if(!confirm(`${item} satƒ±n alƒ±nacak? ($${cost} ‚Äì bakiye %${pct})`)) return;
      money-=cost; updateMoneyUI();
      alert(`${item} satƒ±n alƒ±ndƒ±! (-$${cost})`);
    }

    // ---------- PARA & PROFƒ∞L G√úNCELLEME ----------
    function updateMoneyUI(){ document.getElementById("money").innerText=`$${money}`; }
    function updateProfileInfo(){
      document.getElementById("currentVillageDisplay").innerText=currentVillage;
      document.getElementById("bottomLeft").innerText=currentVillage;
    }

    // ---------- STAT BARLARI ----------  
    function getVakurKoruma(){ let val=Math.floor(vakurTaskCount/22); return val%661||val>0?val%661:0; }
    function getHatipNufus(){ let val=Math.floor(hatipTaskCount/40)*5; return val%201||val>0?val%201:0; }
    function getBaronEtki(){ let val=baronTaskCount*2; return val%501||val>0?val%501:0; }
    function updateStatBars(){
      let v=getVakurKoruma(), vp=Math.floor(v/660*100);
      document.getElementById("vakurText").innerText=`Koruma: ${v} (${vp}%)`;
      document.getElementById("vakurFill").style.width=`${vp}%`;
      if(isHatipUnlocked){
        document.getElementById("hatipStat").classList.remove("lockedStat");
        let h=getHatipNufus(), hp=Math.floor(h/200*100);
        document.getElementById("hatipText").innerText=`N√ºfus: ${h} (${hp}%)`;
        document.getElementById("hatipFill").style.width=`${hp}%`;
      }
      if(isBaronUnlocked){
        document.getElementById("baronStat").classList.remove("lockedStat");
        let b=getBaronEtki(), bp=Math.floor(b/500*100);
        document.getElementById("baronText").innerText=`Etki: ${b} (${bp}%)`;
        document.getElementById("baronFill").style.width=`${bp}%`;
      }
    }

    // ---------- G√ñREV SAYFASI ----------  
    let currentRank="";
    function openGorevPage(rank){
      if(rank==="Hatip"&&!isHatipUnlocked) return;
      if(rank==="Baron"&&!isBaronUnlocked) return;
      currentRank=rank;
      document.getElementById("mainPage").style.display="none";
      let gp=document.getElementById("gorevPage");
      gp.style.display="block"; document.getElementById("gorevHeader").innerText="G√ñREVLER";
      loadRankTasks(rank); updateArrowVisibility();
    }
    function closeGorevPage(){
      document.getElementById("gorevPage").style.display="none";
      document.getElementById("mainPage").style.display="block";
    }
    function loadRankTasks(rank){
      let container=document.getElementById("tasksContainer");
      container.innerHTML="";
      rankData[rank].forEach((diff,di)=>{ 
        let sec=document.createElement("div"); sec.className="rankSection";
        if(diff.locked) sec.classList.add("lockedDifficulty");
        let h2=document.createElement("h2"); h2.innerText=diff.title;
        h2.classList.add(rank.toLowerCase()+"-color");
        sec.appendChild(h2);
        diff.tasks.forEach((t,ti)=>{
          let d=document.createElement("div"); d.className="taskItem";
          if(t.done) d.classList.add("completedTask");
          if(t.hidden) d.style.display="none";
          d.innerHTML=`<span>${t.text}</span><button onclick="completeTask('${rank}',${di},${ti})">Tamamla</button>`;
          sec.appendChild(d);
        });
        let pb=document.createElement("div"); pb.className="difficultyProgressBar";
        let pf=document.createElement("div"); pf.className="difficultyProgressFill"; pb.appendChild(pf);
        sec.appendChild(pb);
        let pt=document.createElement("div"); pt.className="progressText"; sec.appendChild(pt);
        container.appendChild(sec);
        updateDifficultyProgress(rank,di);
      });
    }
    function completeTask(rank,di,ti){
      let diff=rankData[rank][di], task=diff.tasks[ti];
      if(diff.locked) return alert("Kilidi a√ßƒ±k deƒüil!");
      if(task.done) return alert("Zaten tamamlandƒ±!");
      task.done=true;
      if(rank==="Vakur") vakurTaskCount++; 
      if(rank==="Hatip") hatipTaskCount++;
      if(rank==="Baron") baronTaskCount++;
      updateStatBars();
      let allDone=diff.tasks.filter(x=>!x.hidden).every(x=>x.done);
      if(allDone){
        if(di<rankData[rank].length-1){
          rankData[rank][di+1].locked=false;
          alert(`${diff.title} tamam! '${rankData[rank][di+1].title}' a√ßƒ±ldƒ±.`);
        } else {
          alert(`${rank} g√∂revleri tamamlandƒ±!`);
          closeGorevPage();
          if(rank==="Vakur"&&!isHatipUnlocked){
            isHatipUnlocked=true; document.getElementById("cardHatip").classList.remove("locked");
            alert("Hatip kilidi a√ßƒ±ldƒ±!");
          } else if(rank==="Hatip"&&!isBaronUnlocked){
            isBaronUnlocked=true; document.getElementById("cardBaron").classList.remove("locked");
            alert("Baron kilidi a√ßƒ±ldƒ±!");
          }
        }
      }
      loadRankTasks(rank); updateArrowVisibility();
    }
    function updateDifficultyProgress(rank,di){
      let diff=rankData[rank][di];
      let doneCount=diff.tasks.filter(x=>!x.hidden&&x.done).length;
      let total=diff.tasks.filter(x=>!x.hidden).length;
      let pct=Math.floor(doneCount/total*100);
      let sec=document.getElementsByClassName("rankSection")[di];
      sec.querySelector(".difficultyProgressFill").style.width=pct+"%";
      sec.querySelector(".progressText").innerText=`${doneCount} / ${total} (${pct}%)`;
    }
    function scrollTasks(dir){
      const c=document.getElementById("tasksContainer");
      c.scrollBy({ left:dir*310, behavior:"smooth" });
      setTimeout(updateArrowVisibility,350);
    }
    function updateArrowVisibility(){
      const c=document.getElementById("tasksContainer"),
            l=document.getElementById("leftArrow"),
            r=document.getElementById("rightArrow");
      l.style.display=c.scrollLeft>0?"block":"none";
      r.style.display=(c.scrollWidth-c.clientWidth-c.scrollLeft>5)?"block":"none";
    }
  </script>
</body>
</html>
