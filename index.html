<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Black Dolphine - Mafia Oyunu</title>
  <style>
    /* --- Genel Sıfırlama ve Temel Stil --- */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    body {
      background: linear-gradient(120deg, #272727, #111, #000);
      color: #f1f1f1;
      min-height: 100vh;
      padding-top: 100px;
    }
    a { text-decoration: none; color: inherit; }
    
    /* --- Header --- */
    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.85);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.5);
      z-index: 1000;
    }
    .logo {
      font-size: 1.8rem;
      font-weight: bold;
      color: #ff4444;
      text-transform: uppercase;
    }
    .money {
      font-size: 1rem;
      background: #222;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      border: 1px solid #333;
    }
    .money span {
      color: #ffcc00;
      font-weight: bold;
      margin-left: 5px;
    }
    
    /* --- Stat Barlar ve Profil --- */
    #statBars {
      position: fixed;
      top: 80px;
      left: 20px;
      width: 280px;
      z-index: 1000;
    }
    .stat-bar {
      margin-bottom: 1rem;
      background: #444;
      border-radius: 5px;
      padding: 5px;
    }
    .stat-label { margin-bottom: 3px; font-weight: bold; }
    .stat-fill {
      height: 20px;
      background: #00bfff;
      width: 0%;
      border-radius: 3px;
      transition: width 1s ease;
    }
    .stat-text { margin-top: 3px; font-size: 0.9rem; }
    .lockedStat { opacity: 0.4; }
    #profileInfo { margin-top: 1rem; font-weight: bold; font-size: 1rem; }
    
    /* --- Village Travel Panel --- */
    #villageTravel {
      position: fixed;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0,0,0,0.7);
      padding: 1rem;
      border-radius: 10px;
      width: 220px;
      text-align: center;
      z-index: 1000;
    }
    #villageTravel h3 { margin-bottom: 1rem; font-size: 1rem; }
    #villageTravel ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    #villageTravel li {
      margin-bottom: 0.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    #villageTravel li button {
      padding: 0.3rem 0.5rem;
      font-size: 0.8rem;
      cursor: pointer;
      background: #ff4444;
      border: none;
      border-radius: 5px;
      color: #fff;
      transition: background 0.3s;
    }
    #villageTravel li button:hover { background: #ff2222; }
    
    /* --- Main İçerik --- */
    main {
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem;
      text-align: center;
    }
    main h1 { margin-bottom: 1rem; font-size: 2rem; }
    main h4 {
      margin-bottom: 2rem;
      font-weight: normal;
      color: #ccc;
    }
    
    /* --- Rütbe Seçim Kartları --- */
    .rank-selection {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 2rem;
      margin-bottom: 2rem;
    }
    .card {
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 10px;
      padding: 1.5rem;
      width: 220px;
      text-align: center;
      transition: transform 0.3s ease;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }
    .card:hover { transform: translateY(-5px); }
    .card.locked {
      opacity: 0.5;
      position: relative;
    }
    .card.locked::after {
      content: "KİLİTLİ";
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0,0,0,0.8);
      padding: 0.5rem 1rem;
      border-radius: 5px;
      color: #ff4444;
      font-weight: bold;
    }
    .card button {
      margin-top: 1rem;
      padding: 0.6rem 1.2rem;
      background: #ff4444;
      border: none;
      border-radius: 5px;
      color: #fff;
      cursor: pointer;
      transition: background 0.3s;
    }
    .card button:hover { background: #ff2222; }
    
    /* --- Görev Alanı --- */
    .task-container {
      background: rgba(255,255,255,0.07);
      padding: 1.5rem;
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 10px;
      max-width: 600px;
      margin: 2rem auto;
      position: relative;
    }
    .close-task {
      position: absolute;
      top: 10px;
      right: 10px;
      background: transparent;
      border: none;
      color: #fff;
      font-size: 1.2rem;
      cursor: pointer;
    }
    #taskOptions {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      margin-top: 1rem;
      text-align: left;
    }
    .task-option {
      padding: 0.75rem;
      border: 1px solid #555;
      border-radius: 5px;
      background: rgba(255,255,255,0.05);
      cursor: pointer;
    }
    .task-option.active { background: #ff4444; }
    .task-option.completed { background: #00bfff; color: #000; }
    .task-option.available { background: #777; }
    .progress-container {
      background: #444;
      border-radius: 5px;
      overflow: hidden;
      margin-top: 1rem;
    }
    .progress-bar {
      height: 20px;
      width: 0%;
      background: #00bfff;
      transition: width 1s ease;
    }
    .progress-text { margin-top: 0.5rem; font-weight: bold; }
    
    /* --- Sabit Buton Grubu --- */
    .fixed-btn-group {
      position: fixed;
      bottom: 20px;
      right: 20px;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      align-items: flex-end;
      z-index: 1000;
    }
    .fixed-btn-group .btn {
      padding: 0.6rem 1.2rem;
      background: #ff4444;
      border: none;
      border-radius: 5px;
      color: #fff;
      cursor: pointer;
      transition: background 0.3s;
      min-width: 130px;
    }
    .fixed-btn-group .btn:hover { background: #ff2222; }
    
    /* --- Modal Stil --- */
    .modal-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.8);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
    }
    .modal-overlay.active { display: flex; }
    .modal {
      background: #1c1c1c;
      border-radius: 10px;
      padding: 2rem;
      max-width: 500px;
      width: 90%;
      text-align: center;
      box-shadow: 0 5px 15px rgba(0,0,0,0.8);
      position: relative;
    }
    .close-modal {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: transparent;
      border: none;
      color: #fff;
      font-size: 1.2rem;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <!-- Stat Barlar ve Profil Bilgisi -->
  <div id="statBars">
    <div class="stat-bar" id="vakurStat">
      <div class="stat-label">Vakur 🛡️</div>
      <div class="stat-fill" id="vakurFill"></div>
      <div class="stat-text" id="vakurText">Koruma: 0 (0%) | Rozet: 0</div>
    </div>
    <div class="stat-bar lockedStat" id="hatipStat">
      <div class="stat-label">Hatip 👥</div>
      <div class="stat-fill" id="hatipFill"></div>
      <div class="stat-text" id="hatipText">Nüfus: 0 (0%) | Rozet: 0</div>
    </div>
    <div class="stat-bar lockedStat" id="baronStat">
      <div class="stat-label">Baron ♛</div>
      <div class="stat-fill" id="baronFill"></div>
      <div class="stat-text" id="baronText">Etki: 0 (0%) | Rozet: 0</div>
    </div>
    <div id="profileInfo">Köy: <span id="currentVillageDisplay">Asman</span></div>
  </div>
  
  <!-- Village Travel Paneli -->
  <div id="villageTravel">
    <h3>Köyler</h3>
    <ul>
      <li><span>Asman</span><button onclick="travelTo('Asman')">Seyahat Et</button></li>
      <li><span>Mizrin</span><button onclick="travelTo('Mizrin')">Seyahat Et</button></li>
      <li><span>Qeruk</span><button onclick="travelTo('Qeruk')">Seyahat Et</button></li>
      <li><span>Shuman</span><button onclick="travelTo('Shuman')">Seyahat Et</button></li>
      <li><span>Alizera</span><button onclick="travelTo('Alizera')">Seyahat Et</button></li>
      <li><span>Bubuk</span><button onclick="travelTo('Bubuk')">Seyahat Et</button></li>
    </ul>
    <hr style="margin: 1rem 0; border: 1px solid #555;">
    <h3>Tren ile Seyahat</h3>
    <ul>
      <li><span>Asman</span><button onclick="travelByTrain('Asman')">🚆 Seyahat Et</button></li>
      <li><span>Mizrin</span><button onclick="travelByTrain('Mizrin')">🚆 Seyahat Et</button></li>
      <li><span>Qeruk</span><button onclick="travelByTrain('Qeruk')">🚆 Seyahat Et</button></li>
      <li><span>Shuman</span><button onclick="travelByTrain('Shuman')">🚆 Seyahat Et</button></li>
      <li><span>Alizera</span><button onclick="travelByTrain('Alizera')">🚆 Seyahat Et</button></li>
      <li><span>Bubuk</span><button onclick="travelByTrain('Bubuk')">🚆 Seyahat Et</button></li>
    </ul>
  </div>
  
  <!-- Header -->
  <header>
    <div class="logo">Black Dolphine</div>
    <div class="money">Dolar: <span id="money">500000</span></div>
  </header>
  
  <!-- Main İçerik -->
  <main>
    <h1>Black Dolphine Mafya Dünyasına Hoş Geldiniz!</h1>
    <h4>Vakur (Mavi 🏅), Hatip (Turuncu 🏅) veya Baron (Kırmızı 🏅) olarak suç dünyasına adım atın.</h4>
    
    <!-- Rütbe Seçim Kartları -->
    <div class="rank-selection">
      <div class="card" id="cardVakur">
        <h2>Vakur</h2>
        <p>Mavi 🏅</p>
        <button onclick="selectRank('Vakur')">Seç</button>
      </div>
      <div class="card locked" id="cardHatip">
        <h2>Hatip</h2>
        <p>Turuncu 🏅</p>
        <button onclick="selectRank('Hatip')">Seç</button>
      </div>
      <div class="card locked" id="cardBaron">
        <h2>Baron</h2>
        <p>Kırmızı 🏅</p>
        <button onclick="selectRank('Baron')">Seç</button>
      </div>
    </div>
    
    <!-- Görev Alanı -->
    <div class="task-container" id="taskContainer" style="display:none;">
      <button class="close-task" onclick="closeTaskContainer()">X</button>
      <h3 id="rankTitle"></h3>
      <div id="taskOptions"></div>
      <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
      </div>
      <div class="progress-text" id="progressText">0%</div>
    </div>
  </main>
  
  <!-- Sabit Buton Grubu -->
  <div class="fixed-btn-group">
    <button class="btn" onclick="toggleBadgesModal()">Rozetlerim</button>
    <button class="btn" id="marketBtn" style="display:none;" onclick="toggleMarketModal()">Market</button>
    <button class="btn" id="kumarhaneBtn" style="display:none;" onclick="toggleKumarhaneModal()">Kumarhane</button>
  </div>
  
  <!-- Modal Örnekleri -->
  <div class="modal-overlay" id="badgesModal">
    <div class="modal">
      <button class="close-modal" onclick="toggleBadgesModal()">X</button>
      <h2>Rozetlerim</h2>
      <div class="badge-row">
        <div class="badge-type">
          <div class="badge-blue">🏅</div>
          <span class="blue-label" id="blueBadgeCount">0</span>
          <p>Vakur (Mavi)</p>
        </div>
        <div class="badge-type">
          <div class="badge-orange">🏅</div>
          <span class="orange-label" id="orangeBadgeCount">0</span>
          <p>Hatip (Turuncu)</p>
        </div>
        <div class="badge-type">
          <div class="badge-red">🏅</div>
          <span class="red-label" id="redBadgeCount">0</span>
          <p>Baron (Kırmızı)</p>
        </div>
      </div>
      <hr />
    </div>
  </div>
  <div class="modal-overlay" id="marketModal">
    <div class="modal">
      <button class="close-modal" onclick="toggleMarketModal()">X</button>
      <h2>Market</h2>
      <p style="margin-bottom:1rem;">Baron görevleri aktifken satın alabilirsiniz:</p>
      <div class="market-item" id="koyItem">
        <div>Köy (75.000$)</div>
        <button class="btn" onclick="buyItem('Köy', 75000)">Satın Al</button>
      </div>
      <div class="market-item">
        <div>At (5.000$)</div>
        <button class="btn" onclick="buyItem('At', 5000)">Satın Al</button>
      </div>
      <div class="market-item">
        <div>Uçak (4.000$)</div>
        <button class="btn" onclick="buyItem('Uçak', 4000)">Satın Al</button>
      </div>
      <div class="market-item">
        <div>Kumarhane Kur (40.000$)</div>
        <button class="btn" onclick="buyItem('Kumarhane', 40000)">Satın Al</button>
      </div>
    </div>
  </div>
  <div class="modal-overlay" id="kumarhaneModal">
    <div class="modal">
      <button class="close-modal" onclick="toggleKumarhaneModal()">X</button>
      <h2>Kumarhane</h2>
      <p>Şansınızı deneyin! %50 kazanma şansı.</p>
      <div class="kumarhane-input">
        <input type="number" id="betAmount" placeholder="Bahis ($)" />
        <button class="btn" onclick="playGamble()">Oyna</button>
      </div>
      <p id="gambleResult"></p>
    </div>
  </div>
  
  <script>
    /* --- Görev Dizileri --- */
    const tierOrder = ["basit", "orta", "zor", "ileri", "son"];
    const tasks = {
      vakur: {
        basit: [
          "Bir çocuğun okul çantası almasına yardımcı ol.",
          "Mahalledeki yaşlı bir komşunun alışveriş poşetlerini taşı.",
          "Sokaktaki sahipsiz köpek için su ve mama koy.",
          "Arkadaşına ufak bir hediye vererek moralini yükselt.",
          "İşsiz bir tanıdığına CV hazırlama konusunda destek ol.",
          "Kütüphanede eski kitapları düzenlemeye gönüllü ol.",
          "Bir hayır kurumuna ufak bir bağış yap veya yardım topla.",
          "Otobüste yaşlı veya hamile birine yer ver."
        ],
        orta: [ /* ... */ ],
        zor: [ /* ... */ ],
        ileri: [ /* ... */ ],
        son: [
          "Ulusal çapta sosyal sorumluluk projesi yürüt.",
          "Büyük bağış konseri/festival düzenle.",
          "Gönüllüleri bir araya getiren platform kur.",
          "Eğitim bursu fonu başlat.",
          "Aile içi şiddete karşı hizmet oluştur.",
          "Yardım vakfı kurarak sürekli yardım yürüt.",
          "Uluslararası STK’lerle iş birliği yaparak yurt dışına yardım taşı.",
          "Tebrikler, hatip oldunuz! Ana menüye dönünüz."
        ]
      },
      hatip: { /* Görev dizileri benzer */ },
      baron: { /* Görev dizileri benzer */ }
    };
    
    /* --- Global Değişkenler --- */
    let currentRank = "Vakur";
    let vakurTaskCount = 0, hatipTaskCount = 0, baronTaskCount = 0;
    let isHatipUnlocked = false, isBaronUnlocked = false;
    let blueBadgeCount = 0, orangeBadgeCount = 0, redBadgeCount = 0;
    let money = 500000;
    let onur = 0;
    
    function getVakurKoruma() {
      let koruma = Math.floor(vakurTaskCount / 22);
      return (koruma % 661 === 0 && koruma > 0) ? 660 : koruma % 661;
    }
    function getHatipNufus() {
      let nufus = Math.floor(hatipTaskCount / 40) * 5;
      return (nufus % 201 === 0 && nufus > 0) ? 200 : nufus % 201;
    }
    function getBaronEtki() {
      let etki = Math.floor(baronTaskCount * 2);
      return (etki % 501 === 0 && etki > 0) ? 500 : etki % 501;
    }
    
    const villages = ["Asman", "Mizrin", "Qeruk", "Shuman", "Alizera", "Bubuk"];
    let currentVillage = "Asman";
    
    /* --- UI Güncelleme Fonksiyonları --- */
    function updateStatBars() {
      let vakurValue = getVakurKoruma();
      let vakurYuzde = (vakurValue / 660) * 100;
      document.getElementById('vakurText').innerText = "Koruma: " + vakurValue + " (" + Math.floor(vakurYuzde) + "%) | Rozet: " + blueBadgeCount;
      document.getElementById('vakurFill').style.width = vakurYuzde + "%";
      if (isHatipUnlocked) {
        document.getElementById('hatipStat').classList.remove("lockedStat");
        let hatipValue = getHatipNufus();
        let hatipYuzde = (hatipValue / 200) * 100;
        document.getElementById('hatipText').innerText = "Nüfus: " + hatipValue + " (" + Math.floor(hatipYuzde) + "%) | Rozet: " + orangeBadgeCount;
        document.getElementById('hatipFill').style.width = hatipYuzde + "%";
      } else {
        document.getElementById('hatipStat').classList.add("lockedStat");
      }
      if (isBaronUnlocked) {
        document.getElementById('baronStat').classList.remove("lockedStat");
        let baronValue = getBaronEtki();
        let baronYuzde = (baronValue / 500) * 100;
        document.getElementById('baronText').innerText = "Etki: " + baronValue + " (" + Math.floor(baronYuzde) + "%) | Rozet: " + redBadgeCount;
        document.getElementById('baronFill').style.width = baronYuzde + "%";
      } else {
        document.getElementById('baronStat').classList.add("lockedStat");
      }
    }
    function updateProfileInfo() {
      document.getElementById('currentVillageDisplay').innerText = currentVillage;
    }
    function updateMoneyUI() {
      document.getElementById('money').innerText = money;
    }
    function updateBadgesUI() {
      document.getElementById('blueBadgeCount').innerText = blueBadgeCount;
      document.getElementById('orangeBadgeCount').innerText = orangeBadgeCount;
      document.getElementById('redBadgeCount').innerText = redBadgeCount;
    }
    
    /* --- Rütbe Seçimi --- */
    function selectRank(rank) {
      if (rank === "Hatip" && !isHatipUnlocked) {
        alert("Bu rütbe henüz kilitli!");
        return;
      }
      if (rank === "Baron" && !isBaronUnlocked) {
        alert("Bu rütbe henüz kilitli!");
        return;
      }
      currentRank = rank;
      showNextTask();
      document.getElementById('taskContainer').style.display = "block";
    }
    function closeTaskContainer() {
      document.getElementById('taskContainer').style.display = "none";
    }
    
    /* --- Görev Listesi ve Tamamlama --- */
    function showNextTask() {
      const taskOptionsContainer = document.getElementById('taskOptions');
      taskOptionsContainer.innerHTML = "";
      let taskCount, activeIndex, currentTier, taskList;
      
      if (currentRank === "Vakur") {
        taskCount = vakurTaskCount;
        activeIndex = taskCount % 8;
        let tierIndex = Math.floor(taskCount / 8);
        currentTier = tierOrder[tierIndex % tierOrder.length];
        taskList = tasks.vakur[currentTier];
        document.getElementById('rankTitle').innerText = "Vakur Görevleri (" + currentTier + ")";
      } else if (currentRank === "Hatip") {
        taskCount = hatipTaskCount;
        activeIndex = taskCount % 8;
        let tierIndex = Math.floor(taskCount / 8);
        currentTier = tierOrder[tierIndex % tierOrder.length];
        taskList = tasks.hatip[currentTier];
        document.getElementById('rankTitle').innerText = "Hatip Görevleri (" + currentTier + ")";
      } else if (currentRank === "Baron") {
        taskCount = baronTaskCount;
        activeIndex = taskCount % 8;
        let tierIndex = Math.floor(taskCount / 8);
        currentTier = tierOrder[tierIndex % tierOrder.length];
        taskList = tasks.baron[currentTier];
        document.getElementById('rankTitle').innerText = "Baron Görevleri (" + currentTier + ")";
      }
      
      taskList.forEach((task, index) => {
        const div = document.createElement('div');
        div.classList.add('task-option');
        if (index === activeIndex) {
          div.classList.add('active');
          div.innerText = task + " (Aktif Görev)";
          div.addEventListener('click', completeActiveTask);
        } else {
          if(index < activeIndex) {
            div.classList.add('completed');
            div.innerText = task + " (Tekrar Oyna)";
          } else {
            div.classList.add('available');
            div.innerText = task + " (Henüz Tamamlanmadı - Serbest Oyna)";
          }
          div.addEventListener('click', completeFreeTask);
        }
        taskOptionsContainer.appendChild(div);
      });
      
      const prog = (activeIndex / 8) * 100;
      document.getElementById('progressBar').style.width = prog + "%";
      document.getElementById('progressText').innerText = Math.floor(prog) + "%";
    }
    
    function completeActiveTask() {
      if (currentRank === "Vakur") {
        vakurTaskCount++;
        let rozetKazanc = Math.floor(Math.random() * 3) + 1;
        blueBadgeCount += rozetKazanc;
        if (vakurTaskCount >= 40 && !isHatipUnlocked) {
          if (confirm("Tebrikler, Vakur görevlerini tamamladınız!\n\nHatip'e terfi olmak istiyor musunuz? İptal ederseniz, Vakur görevlerine tekrar başlayabilirsiniz.")) {
            isHatipUnlocked = true;
            document.getElementById('cardHatip').classList.remove('locked');
            alert("Hatip oldunuz! Ana menüye dönüyorsunuz.");
            closeTaskContainer();
            return;
          } else {
            vakurTaskCount = 0;
          }
        }
      } else if (currentRank === "Hatip") {
        hatipTaskCount++;
        let rozetKazanc = Math.floor(Math.random() * 3) + 1;
        orangeBadgeCount += rozetKazanc;
        onur += rozetKazanc;
        if (hatipTaskCount >= 40 && !isBaronUnlocked) {
          isBaronUnlocked = true;
          document.getElementById('cardBaron').classList.remove('locked');
          alert("Tebrikler, Baron kilidi açıldı!");
        }
      } else if (currentRank === "Baron") {
        baronTaskCount++;
        let rozetKazanc = Math.floor(Math.random() * 3) + 1;
        redBadgeCount += rozetKazanc;
        let cashGain = Math.floor(Math.random() * (800 - 300 + 1)) + 300;
        money += cashGain;
        if (blueBadgeCount > 0) { blueBadgeCount -= 1; }
      }
      updateStatBars();
      updateBadgesUI();
      updateMoneyUI();
      showNextTask();
    }
    
    function completeFreeTask() {
      if (currentRank === "Vakur") {
        let rozetKazanc = Math.floor(Math.random() * 3) + 1;
        blueBadgeCount += rozetKazanc;
        alert("Görevi tekrar tamamladınız, " + rozetKazanc + " rozet kazandınız!");
      } else if (currentRank === "Hatip") {
        let rozetKazanc = Math.floor(Math.random() * 3) + 1;
        orangeBadgeCount += rozetKazanc;
        onur += rozetKazanc;
        alert("Görevi tekrar tamamladınız, " + rozetKazanc + " rozet kazandınız!");
      } else if (currentRank === "Baron") {
        let rozetKazanc = Math.floor(Math.random() * 3) + 1;
        redBadgeCount += rozetKazanc;
        let cashGain = Math.floor(Math.random() * (800 - 300 + 1)) + 300;
        money += cashGain;
        if (blueBadgeCount > 0) { blueBadgeCount -= 1; }
        alert("Görevi tekrar tamamladınız, " + rozetKazanc + " rozet kazandınız ve " + cashGain + " $ nakit eklediniz!");
      }
      updateStatBars();
      updateBadgesUI();
      updateMoneyUI();
    }
    
    /* --- Seyahat Fonksiyonları --- */
    function travelTo(village) {
      if (currentVillage === village) return;
      if (money < 500) {
        alert("Seyahat için yeterli paranız yok!");
        return;
      }
      money -= 500;
      currentVillage = village;
      updateMoneyUI();
      updateProfileInfo();
      alert("Şimdi " + currentVillage + " köyündesin!");
    }
    
    function travelByTrain(village) {
      if (currentVillage === village) return;
      if (money < 300) {
        alert("Tren seyahati için yeterli paranız yok!");
        return;
      }
      money -= 300;
      currentVillage = village;
      updateMoneyUI();
      updateProfileInfo();
      alert("Tren ile " + currentVillage + " köyüne seyahat ettiniz!");
    }
    
    /* --- Modal Fonksiyonları --- */
    function toggleBadgesModal() {
      document.getElementById('badgesModal').classList.toggle('active');
    }
    function toggleMarketModal() {
      document.getElementById('marketModal').classList.toggle('active');
    }
    function toggleKumarhaneModal() {
      const modal = document.getElementById('kumarhaneModal');
      modal.classList.toggle('active');
      document.getElementById('gambleResult').innerText = "";
      document.getElementById('betAmount').value = "";
    }
    
    function playGamble() {
      const betInput = document.getElementById('betAmount');
      const gambleResult = document.getElementById('gambleResult');
      const bet = parseInt(betInput.value);
      if (isNaN(bet) || bet <= 0) {
        gambleResult.innerText = "Geçerli bir bahis miktarı giriniz.";
        return;
      }
      if (bet > money) {
        gambleResult.innerText = "Yeterli bakiyeniz yok!";
        return;
      }
      const chance = Math.random();
      if (chance < 0.5) {
        money += bet;
        gambleResult.innerText = `Kazandınız! Yeni bakiye: ${money} $`;
      } else {
        money -= bet;
        gambleResult.innerText = `Kaybettiniz! Yeni bakiye: ${money} $`;
      }
      updateMoneyUI();
    }
    
    updateStatBars();
    updateProfileInfo();
    updateMoneyUI();
    updateBadgesUI();
  </script>
</body>
</html>
