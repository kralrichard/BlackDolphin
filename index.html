<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Black Dolphine - Mafia Oyunu</title>
  <style>
    /* Temel Sƒ±fƒ±rlama ve Genel Stil */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: linear-gradient(120deg, #272727 0%, #111 50%, #000 100%);
      color: #f1f1f1;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      position: relative;
    }

    /* HEADER */
    header {
      background: rgba(0, 0, 0, 0.85);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
      position: sticky;
      top: 0;
      z-index: 999;
      box-shadow: 0 2px 5px rgba(0,0,0,0.5);
    }

    .logo {
      font-size: 1.5rem;
      font-weight: bold;
      letter-spacing: 1.5px;
      color: #ff4444;
      text-transform: uppercase;
    }

    .money {
      font-size: 1rem;
      background: #222;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      border: 1px solid #333;
    }

    .money span {
      color: #ffcc00;
      margin-left: 5px;
      font-weight: bold;
    }

    /* MAIN */
    main {
      flex: 1;
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1, h2, h3, h4, p {
      text-align: center;
      margin-bottom: 1rem;
    }

    /* GENEL BUTON STƒ∞Lƒ∞ */
    .btn {
      background: #ff4444;
      color: #fff;
      border: none;
      padding: 0.75rem 1.25rem;
      font-size: 1rem;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .btn:hover {
      background: #cc0000;
    }

    /* R√úTBE KARTLARI */
    .rank-selection {
      display: flex;
      gap: 2rem;
      margin: 2rem 0;
      flex-wrap: wrap;
      justify-content: center;
    }

    .card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(4px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      width: 250px;
      padding: 1.5rem;
      text-align: center;
      transition: transform 0.3s ease;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }

    .card:hover {
      transform: translateY(-5px);
    }

    .card h2 {
      margin-bottom: 1rem;
      color: #ffcc00;
    }

    .locked {
      opacity: 0.4;
      position: relative;
    }

    .locked::after {
      content: "Kƒ∞Lƒ∞TLƒ∞";
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0,0,0,0.8);
      padding: 0.5rem 1rem;
      border-radius: 5px;
      font-weight: bold;
      color: #ff4444;
      pointer-events: none;
    }

    /* G√ñREV ALANI */
    .task-container {
      margin-top: 2rem;
      text-align: center;
      max-width: 600px;
      background: rgba(255,255,255,0.07);
      padding: 1.5rem;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.2);
      display: none;
      position: relative;
    }

    .task-container.active {
      display: block;
    }

    .task-container h3 {
      color: #ffcc00;
      margin-bottom: 1rem;
    }

    .task-desc {
      margin-bottom: 1.5rem;
      font-weight: 500;
      color: #ffffff;
    }

    .timer {
      margin-top: 1rem;
      font-weight: bold;
      font-size: 1.1rem;
      color: #50fa7b;
    }

    /* SABƒ∞T BUTON GRUBU (saƒü alt) */
    .fixed-btn-group {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      align-items: flex-end;
    }

    .fixed-btn-group .btn {
      min-width: 130px;
      text-align: center;
    }

    .hidden {
      display: none !important;
    }

    /* SOL PANEL (K√ñY) */
    .side-panel {
      position: fixed;
      top: 80px;
      left: 20px;
      width: 80px;
      text-align: center;
      display: none;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      z-index: 1000;
      transition: all 0.3s ease;
    }

    .side-panel img {
      width: 64px;
      height: 64px;
      cursor: pointer;
      border-radius: 5px;
      border: 2px solid #333;
      animation: wiggle 3s infinite ease-in-out;
    }

    @keyframes wiggle {
      0% { transform: rotate(0deg); }
      25% { transform: rotate(2deg); }
      50% { transform: rotate(0deg); }
      75% { transform: rotate(-2deg); }
      100% { transform: rotate(0deg); }
    }

    .side-panel p {
      font-size: 0.9rem;
      color: #ffcc00;
    }

    /* MODAL GENEL */
    .modal-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.8);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal {
      background: #1c1c1c;
      border-radius: 10px;
      padding: 2rem;
      max-width: 500px;
      width: 90%;
      text-align: center;
      box-shadow: 0 5px 15px rgba(0,0,0,0.8);
      position: relative;
    }

    .close-modal {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: transparent;
      border: none;
      color: #fff;
      font-size: 1.2rem;
      cursor: pointer;
    }

    /* ROZETLERƒ∞M MODAL */
    .modal h2 {
      color: #ffcc00;
      margin-bottom: 1rem;
    }

    .badge-row {
      display: flex;
      justify-content: space-around;
      margin: 1rem 0;
    }

    .badge-type {
      text-align: center;
    }

    .badge-type span {
      display: block;
      margin-top: 0.5rem;
      font-size: 1.2rem;
      font-weight: bold;
      color: #fff;
    }

    /* Rozet Emojisi = üèÖ (renk vurgusunu yazƒ± ile) */
    .badge-blue, .badge-orange, .badge-red {
      font-size: 1.8rem;
    }
    .blue-label { color: #00bfff; }
    .orange-label { color: #ffa500; }
    .red-label { color: #ff0000; }

    hr {
      border: 1px solid #444;
      margin: 1rem 0;
    }

    /* BAR ALANLARI (Dayanƒ±klƒ±lƒ±k, Onur, N√ºfus) */
    .bar-section {
      margin-bottom: 1.5rem;
    }
    .bar-title {
      margin-bottom: 0.5rem;
      color: #ffcc00;
      font-weight: bold;
    }
    .bar-container {
      width: 80%;
      margin: 0 auto;
      height: 20px;
      background: #444;
      border-radius: 5px;
      overflow: hidden;
      position: relative;
      margin-bottom: 0.5rem;
    }
    .bar-fill {
      height: 100%;
      transition: width 0.3s ease;
    }
    .bar-value {
      color: #fff;
      font-weight: bold;
    }

    .dayaniklik-bar {
      background: #00bfff;
    }
    .onur-bar {
      background: #ffa500;
    }
    .nufus-value {
      color: #fff;
      font-weight: bold;
    }

    /* MARKET MODAL */
    .market-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 0.5rem 0;
      padding: 0.5rem;
      background: rgba(255,255,255,0.05);
      border-radius: 5px;
    }

    .market-item button {
      font-size: 0.9rem;
      padding: 0.3rem 0.8rem;
    }

    /* KUMARHANE MODAL */
    .kumarhane-input {
      margin: 1rem 0;
      display: flex;
      gap: 0.5rem;
      justify-content: center;
    }

    .kumarhane-input input {
      width: 100px;
      padding: 0.3rem;
      text-align: center;
      border-radius: 5px;
      border: 1px solid #999;
    }

    /* ENVANTER G√ñRSELLE≈ûTƒ∞RME */
    .inventory-list img {
      width: 32px;
      height: 32px;
      margin-right: 8px;
      vertical-align: middle;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
      100% { transform: translateY(0); }
    }

  </style>
</head>
<body>

<header>
  <div class="logo">Black Dolphine</div>
  <div class="money">Dolar: <span id="money">500000</span></div>
</header>

<main>
  <h1>Black Dolphine Mafya D√ºnyasƒ±na Ho≈ü Geldiniz!</h1>
  <h4>Vakur (Mavi üèÖ), Hatip (Turuncu üèÖ) veya Baron (Kƒ±rmƒ±zƒ± üèÖ) olarak su√ß d√ºnyasƒ±na adƒ±m atƒ±n.</h4>

  <!-- R√úTBE KARTLARI -->
  <div class="rank-selection">
    <div class="card" id="cardVakur">
      <h2>Vakur</h2>
      <p>Mavi üèÖ</p>
      <button class="btn" onclick="selectRank('Vakur')">Se√ß</button>
    </div>

    <div class="card" id="cardHatip">
      <h2>Hatip</h2>
      <p>Turuncu üèÖ</p>
      <button class="btn" onclick="selectRank('Hatip')">Se√ß</button>
    </div>

    <div class="card locked" id="cardBaron">
      <h2>Baron</h2>
      <p>Kƒ±rmƒ±zƒ± üèÖ</p>
      <button class="btn" style="visibility:hidden;">Se√ß</button>
    </div>
  </div>

  <!-- G√ñREV ALANI -->
  <div class="task-container" id="taskContainer">
    <h3 id="rankTitle"></h3>
    <div class="task-desc" id="taskDescription"></div>
    <button class="btn" id="completeTaskBtn" onclick="completeTask()">G√∂revi Tamamla</button>
    <div class="timer" id="countdownTimer" style="display:none;">Bekleme s√ºresi: <span id="timerValue">10</span> sn</div>
  </div>
</main>

<!-- K√ñY PANELƒ∞ (sol tarafta, ba≈ülangƒ±√ßta gizli) -->
<div class="side-panel" id="koyPanelTrigger">
  <img src="https://via.placeholder.com/64?text=K%C3%B6y" alt="K√∂y" onclick="toggleKoyPanelModal()" />
  <p>K√∂y√ºn</p>
</div>

<!-- SAƒû ALT SABƒ∞T BUTONLAR -->
<div class="fixed-btn-group">
  <button class="btn" onclick="toggleBadgesModal()">Rozetlerim</button>
  <button class="btn hidden" id="marketBtn" onclick="toggleMarketModal()">Market</button>
  <button class="btn hidden" id="kumarhaneBtn" onclick="toggleKumarhaneModal()">Kumarhane</button>
</div>

<!-- K√ñY ENVANTER MODALI -->
<div class="modal-overlay" id="koyModal">
  <div class="modal">
    <button class="close-modal" onclick="toggleKoyPanelModal()">X</button>
    <h2>Envanter & √áete Bilgileri</h2>
    <div class="inventory-list" id="inventoryList"></div>
    <hr />
    <h3>√áete √úye Sayƒ±sƒ±: <span id="ceteUyeSayisi">0</span></h3>
  </div>
</div>

<!-- ROZETLERƒ∞M MODALI -->
<div class="modal-overlay" id="badgesModal">
  <div class="modal">
    <button class="close-modal" onclick="toggleBadgesModal()">X</button>
    <h2>Rozetlerim</h2>

    <div class="badge-row">
      <div class="badge-type">
        <div class="badge-blue">üèÖ</div>
        <span class="blue-label" id="blueBadgeCount">0</span>
        <p style="margin-top:0.5rem;">Vakur (Mavi)</p>
      </div>
      <div class="badge-type">
        <div class="badge-orange">üèÖ</div>
        <span class="orange-label" id="orangeBadgeCount">0</span>
        <p style="margin-top:0.5rem;">Hatip (Turuncu)</p>
      </div>
      <div class="badge-type">
        <div class="badge-red">üèÖ</div>
        <span class="red-label" id="redBadgeCount">0</span>
        <p style="margin-top:0.5rem;">Baron (Kƒ±rmƒ±zƒ±)</p>
      </div>
    </div>

    <hr />
    <!-- Dayanƒ±klƒ±lƒ±k Bar -->
    <div class="bar-section">
      <div class="bar-title">Dayanƒ±klƒ±lƒ±k (Vakur)</div>
      <div class="bar-container">
        <div class="bar-fill dayaniklik-bar" id="dayaniklikBar"></div>
      </div>
      <div class="bar-value">G√º√ß: <span id="dayaniklikValue">0</span></div>
    </div>

    <!-- Onur Bar -->
    <div class="bar-section">
      <div class="bar-title">Onur (Hatip)</div>
      <div class="bar-container">
        <div class="bar-fill onur-bar" id="onurBar"></div>
      </div>
      <div class="bar-value">Onur: <span id="onurValue">0</span></div>
    </div>

    <!-- N√ºfus Sayƒ±sƒ± -->
    <div class="bar-section">
      <div class="bar-title">N√ºfus (Hatip)</div>
      <div class="bar-value">N√ºfus: <span id="nufus">0</span></div>
    </div>
  </div>
</div>

<!-- MARKET MODALI -->
<div class="modal-overlay" id="marketModal">
  <div class="modal">
    <button class="close-modal" onclick="toggleMarketModal()">X</button>
    <h2>Market</h2>
    <p style="margin-bottom:1rem;">Baron seviyesinde satƒ±n alabileceƒüiniz varlƒ±klar:</p>
    
    <div class="market-item" id="koyItem">
      <div>K√∂y (75.000$)</div>
      <button class="btn" onclick="buyItem('K√∂y', 75000)">Satƒ±n Al</button>
    </div>
    <div class="market-item">
      <div>At (5.000$)</div>
      <button class="btn" onclick="buyItem('At', 5000)">Satƒ±n Al</button>
    </div>
    <div class="market-item">
      <div>U√ßak (4.000$)</div>
      <button class="btn" onclick="buyItem('U√ßak', 4000)">Satƒ±n Al</button>
    </div>
    <div class="market-item">
      <div>Kumarhane Kur (40.000$)</div>
      <button class="btn" onclick="buyItem('Kumarhane', 40000)">Satƒ±n Al</button>
    </div>
  </div>
</div>

<!-- KUMARHANE MODALI -->
<div class="modal-overlay" id="kumarhaneModal">
  <div class="modal">
    <button class="close-modal" onclick="toggleKumarhaneModal()">X</button>
    <h2>Kumarhane</h2>
    <p>≈ûansƒ±nƒ±zƒ± deneyin! %50 kazanma ≈üansƒ±.</p>
    <div class="kumarhane-input">
      <input type="number" id="betAmount" placeholder="Bahis ($)" />
      <button class="btn" onclick="playGamble()">Oyna</button>
    </div>
    <p id="gambleResult"></p>
  </div>
</div>

<script>
  // -----------------------------
  // G√ñREV Lƒ∞STELERƒ∞
  // -----------------------------
  // Vakur G√∂revleri (10 adet)
  const vakurTasks = [
    "Aileye yardƒ±m et",
    "Bir √ßocuƒüun eƒüitim masrafƒ±nƒ± kar≈üƒ±la",
    "Okul in≈üa et",
    "Mahallede yoksullara erzak daƒüƒ±t",
    "Ya≈ülƒ±lara bakƒ±m yardƒ±mƒ± yap",
    "Hayƒ±r kurumuna baƒüƒ±≈ü yap",
    "Sokak hayvanlarƒ±na mama saƒüla",
    "K√ºt√ºphane a√ß",
    "Gen√ßlere spor malzemesi daƒüƒ±t",
    "Halk saƒülƒ±ƒüƒ± merkezinde g√∂n√ºll√º ol"
  ];

  // Hatip G√∂revleri (Onur Puanƒ± kazandƒ±rƒ±r, 10 adet)
  const hatipTasks = [
    "Aileleri barƒ±≈ütƒ±r",
    "Sokak kavgalarƒ±nƒ± durdur",
    "Yerel y√∂netimde arabuluculuk yap",
    "B√ºy√ºk bir uzla≈üƒ± toplantƒ±sƒ± d√ºzenle",
    "Toplumsal protestoyu sakinle≈ütir",
    "Halkƒ± paniƒüe kar≈üƒ± ikna et",
    "K√∂y meclisini topla ve ara bul",
    "STK'lar arasƒ±nda uzla≈üma saƒüla",
    "G√∂n√ºll√º barƒ±≈ü el√ßisi ol",
    "Uluslararasƒ± barƒ±≈ü forumunda konu≈ü"
  ];

  // Baron G√∂revleri (Para kazandƒ±rƒ±r, 10 adet)
  const baronTasks = [
    "Ka√ßak√ßƒ±lƒ±k operasyonu d√ºzenle",
    "Uyu≈üturucu sevkiyatƒ± yap",
    "Bankaya sƒ±zƒ±p hƒ±rsƒ±zlƒ±k yap",
    "Silah ticareti aƒüƒ± kur",
    "Tefecilik ile b√∂lgeyi kontrol et",
    "Gazino soygunu planla",
    "Polise r√º≈üvet ver ve izini sil",
    "Karakol baskƒ±nƒ± d√ºzenle",
    "Sƒ±nƒ±r √∂tesi ka√ßak√ßƒ±lƒ±k yap",
    "B√ºy√ºk komplo planla ve y√ºr√ºt"
  ];

  // -----------------------------
  // DEƒûƒ∞≈ûKENLER
  // -----------------------------
  let currentRank = null;            // "Vakur", "Hatip", "Baron"
  let vakurIndex = 0;                // vakurTasks index
  let hatipIndex = 0;                // hatipTasks index
  let baronIndex = 0;                // baronTasks index

  let blueBadgeCount = 0;            // Vakur rozet sayƒ±sƒ±
  let orangeBadgeCount = 0;          // Hatip rozet sayƒ±sƒ±
  let redBadgeCount = 0;             // Baron rozet sayƒ±sƒ±

  let money = 500000;                // Ba≈ülangƒ±√ß parasƒ±
  let dayaniklilik = 0;              // Vakur dayanƒ±klƒ±lƒ±k
  let nufus = 0;                     // Hatip n√ºfus
  let onur = 0;                      // Hatip onur

  let isCooldown = false;            // G√∂rev bekleme s√ºresi
  let cooldownTimer = null;          // setInterval ref
  let timeLeft = 10;                 // 10 sn bekleme

  // Market - Envanter
  let hasKoy = false;                // K√∂y satƒ±n alƒ±ndƒ± mƒ±?
  let atCount = 0;                   // Ka√ß at?
  let ucakCount = 0;                 // Ka√ß u√ßak?
  let kumarhaneCount = 0;            // Ka√ß kumarhane?
  let ceteUyeSayisi = 0;             // √áete √ºye sayƒ±sƒ±

  // HTML Elemanlarƒ±
  const taskContainer = document.getElementById('taskContainer');
  const rankTitle = document.getElementById('rankTitle');
  const taskDescription = document.getElementById('taskDescription');
  const completeTaskBtn = document.getElementById('completeTaskBtn');
  const countdownTimer = document.getElementById('countdownTimer');
  const timerValue = document.getElementById('timerValue');

  const cardBaron = document.getElementById('cardBaron');
  const marketBtn = document.getElementById('marketBtn');
  const kumarhaneBtn = document.getElementById('kumarhaneBtn');

  const koyPanelTrigger = document.getElementById('koyPanelTrigger');
  const koyModal = document.getElementById('koyModal');
  const inventoryList = document.getElementById('inventoryList');
  const ceteUyeSayisiSpan = document.getElementById('ceteUyeSayisi');

  // -----------------------------
  // R√úTBE SE√áƒ∞Mƒ∞
  // -----------------------------
  function selectRank(rank) {
    if(isCooldown) {
      alert("Yeni g√∂revi se√ßebilmek i√ßin bekleme s√ºresinin dolmasƒ±nƒ± bekleyin!");
      return;
    }

    // Baron kilidi kontrol√º (en az 2 rozet gerekir)
    const totalBadges = blueBadgeCount + orangeBadgeCount + redBadgeCount;
    if(rank === "Baron" && totalBadges < 2) {
      alert("Baron seviyesine ge√ßmek i√ßin en az 2 rozet kazanmalƒ±sƒ±nƒ±z!");
      return;
    }

    currentRank = rank;
    showNextTask();
  }

  // -----------------------------
  // Bƒ∞R SONRAKƒ∞ G√ñREVƒ∞ G√ñSTER
  // -----------------------------
  function showNextTask() {
    taskContainer.classList.add('active');
    countdownTimer.style.display = "none";
    completeTaskBtn.disabled = false;

    if(currentRank === "Vakur") {
      rankTitle.innerText = "Vakur G√∂revi (Mavi üèÖ)";
      taskDescription.innerText = vakurTasks[vakurIndex] 
        ? vakurTasks[vakurIndex]
        : "T√ºm Vakur g√∂revlerini tamamladƒ±nƒ±z!";
      if(!vakurTasks[vakurIndex]) {
        completeTaskBtn.disabled = true;
      }
    } 
    else if(currentRank === "Hatip") {
      rankTitle.innerText = "Hatip G√∂revi (Turuncu üèÖ)";
      taskDescription.innerText = hatipTasks[hatipIndex]
        ? hatipTasks[hatipIndex]
        : "T√ºm Hatip g√∂revlerini tamamladƒ±nƒ±z!";
      if(!hatipTasks[hatipIndex]) {
        completeTaskBtn.disabled = true;
      }
    }
    else if(currentRank === "Baron") {
      rankTitle.innerText = "Baron G√∂revi (Kƒ±rmƒ±zƒ± üèÖ)";
      taskDescription.innerText = baronTasks[baronIndex]
        ? baronTasks[baronIndex]
        : "T√ºm Baron g√∂revlerini tamamladƒ±nƒ±z!";
      if(!baronTasks[baronIndex]) {
        completeTaskBtn.disabled = true;
      }
    }
  }

  // -----------------------------
  // G√ñREV TAMAMLA
  // -----------------------------
  function completeTask() {
    if(currentRank === "Vakur" && vakurTasks[vakurIndex]) {
      const rozetKazanc = getRandomRozet();
      blueBadgeCount += rozetKazanc;
      dayaniklilik += rozetKazanc;
      alert(`G√∂revi tamamladƒ±nƒ±z! +${rozetKazanc} Mavi Rozet (Vakur)`);
      vakurIndex++;
    }
    else if(currentRank === "Hatip" && hatipTasks[hatipIndex]) {
      const rozetKazanc = getRandomRozet();
      orangeBadgeCount += rozetKazanc;
      nufus += rozetKazanc;
      onur += rozetKazanc;
      alert(`G√∂revi tamamladƒ±nƒ±z! +${rozetKazanc} Turuncu Rozet (Hatip) \n+${rozetKazanc} Onur`);
      hatipIndex++;
    }
    else if(currentRank === "Baron" && baronTasks[baronIndex]) {
      const rozetKazanc = getRandomRozet();
      redBadgeCount += rozetKazanc;
      // Para kazancƒ±: rastgele 300-800
      const cashGain = getRandomMoney(300, 800);
      money += cashGain;

      // K√∂t√º i≈ü => varsa 1 mavi rozet kaybƒ±
      if(blueBadgeCount > 0) {
        blueBadgeCount -= 1;
        dayaniklilik = Math.max(dayaniklilik - 1, 0);
        alert(`G√∂revi tamamladƒ±nƒ±z! +${rozetKazanc} Kƒ±rmƒ±zƒ± Rozet (Baron), +${cashGain} $ \n(Mavi Rozet -1)`);
      } else {
        alert(`G√∂revi tamamladƒ±nƒ±z! +${rozetKazanc} Kƒ±rmƒ±zƒ± Rozet (Baron), +${cashGain} $`);
      }
      baronIndex++;
    }
    else {
      alert("Bu r√ºtbeye ait ge√ßerli bir g√∂rev kalmadƒ±!");
      return;
    }

    // Aray√ºz G√ºncellemeleri
    updateBadgesUI();
    updateMoneyUI();
    checkBaronUnlock();

    // G√∂revden sonra 10 sn bekleme
    startCooldown();
  }

  // Rastgele 1-3 rozet kazancƒ±
  function getRandomRozet() {
    return Math.floor(Math.random() * 3) + 1; // 1, 2 veya 3
  }

  // Rastgele para
  function getRandomMoney(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  // -----------------------------
  // 10 SN BEKLEME S√úRESƒ∞
  // -----------------------------
  function startCooldown() {
    isCooldown = true;
    completeTaskBtn.disabled = true;
    countdownTimer.style.display = "block";
    timeLeft = 10;
    timerValue.innerText = timeLeft;

    cooldownTimer = setInterval(() => {
      timeLeft--;
      timerValue.innerText = timeLeft;

      if(timeLeft <= 0) {
        clearInterval(cooldownTimer);
        isCooldown = false;
        countdownTimer.style.display = "none";
        alert("S√ºre doldu! Yeni bir r√ºtbe se√ßebilirsiniz.");
        taskContainer.classList.remove('active');
      }
    }, 1000);
  }

  // -----------------------------
  // BARON Kƒ∞Lƒ∞T KONTROL
  // -----------------------------
  function checkBaronUnlock() {
    const totalBadges = blueBadgeCount + orangeBadgeCount + redBadgeCount;
    if(totalBadges >= 2) {
      cardBaron.classList.remove('locked');
      cardBaron.querySelector('button').style.visibility = "visible";
      // Market ve Kumarhane butonlarƒ±nƒ± da g√∂ster
      marketBtn.classList.remove('hidden');
      kumarhaneBtn.classList.remove('hidden');
    }
  }

  // -----------------------------
  // ARAY√úZ G√úNCELLEME
  // -----------------------------
  function updateBadgesUI() {
    document.getElementById('blueBadgeCount').innerText = blueBadgeCount;
    document.getElementById('orangeBadgeCount').innerText = orangeBadgeCount;
    document.getElementById('redBadgeCount').innerText = redBadgeCount;

    // Dayanƒ±klƒ±lƒ±k Bar
    document.getElementById('dayaniklikValue').innerText = dayaniklilik;
    let dBarWidth = dayaniklilik * 10;
    if(dBarWidth > 300) dBarWidth = 300;
    document.getElementById('dayaniklikBar').style.width = dBarWidth + "px";

    // Onur Bar
    document.getElementById('onurValue').innerText = onur;
    let oBarWidth = onur * 10;
    if(oBarWidth > 300) oBarWidth = 300;
    document.getElementById('onurBar').style.width = oBarWidth + "px";

    // N√ºfus
    document.getElementById('nufus').innerText = nufus;
  }

  function updateMoneyUI() {
    document.getElementById('money').innerText = money;
  }

  // -----------------------------
  // ROZETLER MODAL A√á/KAPAT
  // -----------------------------
  function toggleBadgesModal() {
    const badgesModal = document.getElementById('badgesModal');
    badgesModal.classList.toggle('active');
  }

  // -----------------------------
  // MARKET MODAL A√á/KAPAT
  // -----------------------------
  function toggleMarketModal() {
    const marketModal = document.getElementById('marketModal');
    marketModal.classList.toggle('active');
  }

  // -----------------------------
  // MARKET SATIN AL
  // -----------------------------
  function buyItem(itemName, price) {
    if(money < price) {
      alert("Yeterli paranƒ±z yok!");
      return;
    }

    // Baron kilidi de aktif mi?
    const totalBadges = blueBadgeCount + orangeBadgeCount + redBadgeCount;
    if(totalBadges < 2) {
      alert("Satƒ±n almak i√ßin Baron seviyesine eri≈ümelisiniz (en az 2 rozet)!");
      return;
    }

    // Satƒ±n al
    money -= price;
    updateMoneyUI();

    switch(itemName) {
      case "K√∂y":
        if(hasKoy) {
          alert("Zaten bir k√∂y√ºn√ºz var!");
          return;
        }
        hasKoy = true;
        alert("K√∂y satƒ±n alƒ±ndƒ±!");
        document.getElementById('koyItem').style.display = "none";
        koyPanelTrigger.style.display = "flex"; // Sol panelde k√∂y resmi g√∂ster
        break;
      case "At":
        atCount++;
        ceteUyeSayisi += 2;
        alert("At satƒ±n alƒ±ndƒ± (+2 √ßete √ºyesi)!");
        break;
      case "U√ßak":
        ucakCount++;
        ceteUyeSayisi += 5;
        alert("U√ßak satƒ±n alƒ±ndƒ± (+5 √ßete √ºyesi)!");
        break;
      case "Kumarhane":
        kumarhaneCount++;
        ceteUyeSayisi += 3;
        alert("Kumarhane kuruldu (+3 √ßete √ºyesi)!");
        break;
      default:
        break;
    }

    updateInventoryUI();
  }

  // ENVANTER G√úNCELLE
  function updateInventoryUI() {
    inventoryList.innerHTML = "";
    if(hasKoy) {
      const divKoy = document.createElement('div');
      divKoy.innerHTML = `<img src="https://via.placeholder.com/32?text=K%C3%B6y" alt="K√∂y" /> K√∂y (1 adet)`;
      inventoryList.appendChild(divKoy);
    }
    if(atCount > 0) {
      const divAt = document.createElement('div');
      divAt.innerHTML = `<img src="https://via.placeholder.com/32?text=%F0%9F%90%8E" alt="At" /> At (x${atCount})`;
      inventoryList.appendChild(divAt);
    }
    if(ucakCount > 0) {
      const divUcak = document.createElement('div');
      divUcak.innerHTML = `<img src="https://via.placeholder.com/32?text=%E2%9C%88%EF%B8%8F" alt="U√ßak" /> U√ßak (x${ucakCount})`;
      inventoryList.appendChild(divUcak);
    }
    if(kumarhaneCount > 0) {
      const divKumar = document.createElement('div');
      divKumar.innerHTML = `<img src="https://via.placeholder.com/32?text=%24" alt="Kumarhane" /> Kumarhane (x${kumarhaneCount})`;
      inventoryList.appendChild(divKumar);
    }

    if(!hasKoy && atCount === 0 && ucakCount === 0 && kumarhaneCount === 0) {
      inventoryList.innerHTML = "<p>Envanteriniz bo≈ü!</p>";
    }

    ceteUyeSayisiSpan.innerText = ceteUyeSayisi;
  }

  // -----------------------------
  // K√ñY PANEL A√á/KAPAT
  // -----------------------------
  function toggleKoyPanelModal() {
    updateInventoryUI();
    koyModal.classList.toggle('active');
  }

  // -----------------------------
  // KUMARHANE MODAL A√á/KAPAT
  // -----------------------------
  function toggleKumarhaneModal() {
    const kumarhaneModal = document.getElementById('kumarhaneModal');
    kumarhaneModal.classList.toggle('active');
    document.getElementById('gambleResult').innerText = "";
    document.getElementById('betAmount').value = "";
  }

  // -----------------------------
  // KUMARHANE OYUN FONKSƒ∞YONU
  // -----------------------------
  function playGamble() {
    const betInput = document.getElementById('betAmount');
    const gambleResult = document.getElementById('gambleResult');
    const bet = parseInt(betInput.value);

    if(isNaN(bet) || bet <= 0) {
      gambleResult.innerText = "Ge√ßerli bir bahis miktarƒ± giriniz.";
      return;
    }
    if(bet > money) {
      gambleResult.innerText = "Yeterli bakiyeniz yok!";
      return;
    }

    // %50 kazanma ≈üansƒ±
    const chance = Math.random();
    if(chance < 0.5) {
      // Kazandƒ±
      money += bet;
      gambleResult.innerText = `Kazandƒ±nƒ±z! Yeni bakiye: ${money} $`;
    } else {
      // Kaybetti
      money -= bet;
      gambleResult.innerText = `Kaybettiniz! Yeni bakiye: ${money} $`;
    }
    updateMoneyUI();
  }
</script>
</body>
</html>

