<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Black Dolphine - Mafia Oyunu</title>
  <style>
    /* Temel SÄ±fÄ±rlama ve Genel Stil */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: linear-gradient(120deg, #272727 0%, #111 50%, #000 100%);
      color: #f1f1f1;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      position: relative;
    }

    /* HEADER */
    header {
      background: rgba(0, 0, 0, 0.85);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
      position: sticky;
      top: 0;
      z-index: 999;
      box-shadow: 0 2px 5px rgba(0,0,0,0.5);
    }

    .logo {
      font-size: 1.5rem;
      font-weight: bold;
      letter-spacing: 1.5px;
      color: #ff4444;
      text-transform: uppercase;
    }

    .money {
      font-size: 1rem;
      background: #222;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      border: 1px solid #333;
    }

    .money span {
      color: #ffcc00;
      margin-left: 5px;
      font-weight: bold;
    }

    /* MAIN */
    main {
      flex: 1;
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1, h2, h3, h4, p {
      text-align: center;
      margin-bottom: 1rem;
    }

    /* GENEL BUTON STÄ°LÄ° */
    .btn {
      background: #ff4444;
      color: #fff;
      border: none;
      padding: 0.75rem 1.25rem;
      font-size: 1rem;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .btn:hover {
      background: #cc0000;
    }

    /* RÃœTBE KARTLARI */
    .rank-selection {
      display: flex;
      gap: 2rem;
      margin: 2rem 0;
      flex-wrap: wrap;
      justify-content: center;
    }

    .card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(4px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      width: 250px;
      padding: 1.5rem;
      text-align: center;
      transition: transform 0.3s ease;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }

    .card:hover {
      transform: translateY(-5px);
    }

    .card h2 {
      margin-bottom: 1rem;
      color: #ffcc00;
    }

    .locked {
      opacity: 0.4;
      position: relative;
    }

    .locked::after {
      content: "KÄ°LÄ°TLÄ°";
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0,0,0,0.8);
      padding: 0.5rem 1rem;
      border-radius: 5px;
      font-weight: bold;
      color: #ff4444;
      pointer-events: none;
    }

    /* GÃ–REV ALANI */
    .task-container {
      margin-top: 2rem;
      text-align: center;
      max-width: 600px;
      background: rgba(255,255,255,0.07);
      padding: 1.5rem;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.2);
      display: none;
      position: relative;
    }

    .task-container.active {
      display: block;
    }

    .task-container h3 {
      color: #ffcc00;
      margin-bottom: 1rem;
    }

    .task-desc {
      margin-bottom: 1.5rem;
      font-weight: 500;
      color: #ffffff;
    }

    .timer {
      margin-top: 1rem;
      font-weight: bold;
      font-size: 1.1rem;
      color: #50fa7b;
    }

    /* SABÄ°T BUTON GRUBU (saÄŸ alt) */
    .fixed-btn-group {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      align-items: flex-end;
    }

    .fixed-btn-group .btn {
      min-width: 130px;
      text-align: center;
    }

    .hidden {
      display: none !important;
    }

    /* SOL PANEL (KÃ–Y) */
    .side-panel {
      position: fixed;
      top: 80px;
      left: 20px;
      width: 80px;
      text-align: center;
      display: none;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      z-index: 1000;
      transition: all 0.3s ease;
    }

    .side-panel img {
      width: 64px;
      height: 64px;
      cursor: pointer;
      border-radius: 5px;
      border: 2px solid #333;
      animation: wiggle 3s infinite ease-in-out;
    }

    @keyframes wiggle {
      0% { transform: rotate(0deg); }
      25% { transform: rotate(2deg); }
      50% { transform: rotate(0deg); }
      75% { transform: rotate(-2deg); }
      100% { transform: rotate(0deg); }
    }

    .side-panel p {
      font-size: 0.9rem;
      color: #ffcc00;
    }

    /* MODAL GENEL */
    .modal-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.8);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal {
      background: #1c1c1c;
      border-radius: 10px;
      padding: 2rem;
      max-width: 500px;
      width: 90%;
      text-align: center;
      box-shadow: 0 5px 15px rgba(0,0,0,0.8);
      position: relative;
    }

    .close-modal {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: transparent;
      border: none;
      color: #fff;
      font-size: 1.2rem;
      cursor: pointer;
    }

    /* ROZETLERÄ°M MODAL */
    .modal h2 {
      color: #ffcc00;
      margin-bottom: 1rem;
    }

    .badge-row {
      display: flex;
      justify-content: space-around;
      margin: 1rem 0;
    }

    .badge-type {
      text-align: center;
    }

    .badge-type span {
      display: block;
      margin-top: 0.5rem;
      font-size: 1.2rem;
      font-weight: bold;
      color: #fff;
    }

    /* Rozet Emojisi = ğŸ… (renk vurgusunu yazÄ± ile) */
    .badge-blue, .badge-orange, .badge-red {
      font-size: 1.8rem;
    }
    .blue-label { color: #00bfff; }
    .orange-label { color: #ffa500; }
    .red-label { color: #ff0000; }

    hr {
      border: 1px solid #444;
      margin: 1rem 0;
    }

    /* BAR ALANLARI (DayanÄ±klÄ±lÄ±k, Onur, NÃ¼fus) */
    .bar-section {
      margin-bottom: 1.5rem;
    }
    .bar-title {
      margin-bottom: 0.5rem;
      color: #ffcc00;
      font-weight: bold;
    }
    .bar-container {
      width: 80%;
      margin: 0 auto;
      height: 20px;
      background: #444;
      border-radius: 5px;
      overflow: hidden;
      position: relative;
      margin-bottom: 0.5rem;
    }
    .bar-fill {
      height: 100%;
      transition: width 0.3s ease;
    }
    .bar-value {
      color: #fff;
      font-weight: bold;
    }

    .dayaniklik-bar {
      background: #00bfff;
    }
    .onur-bar {
      background: #ffa500;
    }
    .nufus-value {
      color: #fff;
      font-weight: bold;
    }

    /* MARKET MODAL */
    .market-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 0.5rem 0;
      padding: 0.5rem;
      background: rgba(255,255,255,0.05);
      border-radius: 5px;
    }

    .market-item button {
      font-size: 0.9rem;
      padding: 0.3rem 0.8rem;
    }

    /* KUMARHANE MODAL */
    .kumarhane-input {
      margin: 1rem 0;
      display: flex;
      gap: 0.5rem;
      justify-content: center;
    }

    .kumarhane-input input {
      width: 100px;
      padding: 0.3rem;
      text-align: center;
      border-radius: 5px;
      border: 1px solid #999;
    }

    /* ENVANTER GÃ–RSELLEÅTÄ°RME */
    .inventory-list img {
      width: 32px;
      height: 32px;
      margin-right: 8px;
      vertical-align: middle;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
      100% { transform: translateY(0); }
    }

  </style>
</head>
<body>

<header>
  <div class="logo">Black Dolphine</div>
  <div class="money">Dolar: <span id="money">500000</span></div>
</header>

<main>
  <h1>Black Dolphine Mafya DÃ¼nyasÄ±na HoÅŸ Geldiniz!</h1>
  <h4>Vakur (Mavi ğŸ…), Hatip (Turuncu ğŸ…) veya Baron (KÄ±rmÄ±zÄ± ğŸ…) olarak suÃ§ dÃ¼nyasÄ±na adÄ±m atÄ±n.</h4>

  <!-- RÃœTBE KARTLARI -->
  <div class="rank-selection">
    <div class="card" id="cardVakur">
      <h2>Vakur</h2>
      <p>Mavi ğŸ…</p>
      <button class="btn" onclick="selectRank('Vakur')">SeÃ§</button>
    </div>

    <div class="card" id="cardHatip">
      <h2>Hatip</h2>
      <p>Turuncu ğŸ…</p>
      <button class="btn" onclick="selectRank('Hatip')">SeÃ§</button>
    </div>

    <div class="card locked" id="cardBaron">
      <h2>Baron</h2>
      <p>KÄ±rmÄ±zÄ± ğŸ…</p>
      <button class="btn" style="visibility:hidden;">SeÃ§</button>
    </div>
  </div>

  <!-- GÃ–REV ALANI -->
  <div class="task-container" id="taskContainer">
    <h3 id="rankTitle"></h3>
    <div class="task-desc" id="taskDescription"></div>
    <button class="btn" id="completeTaskBtn" onclick="completeTask()">GÃ¶revi Tamamla</button>
    <div class="timer" id="countdownTimer" style="display:none;">Bekleme sÃ¼resi: <span id="timerValue">10</span> sn</div>
  </div>
</main>

<!-- KÃ–Y PANELÄ° (sol tarafta, baÅŸlangÄ±Ã§ta gizli) -->
<div class="side-panel" id="koyPanelTrigger">
  <img src="https://via.placeholder.com/64?text=K%C3%B6y" alt="KÃ¶y" onclick="toggleKoyPanelModal()" />
  <p>KÃ¶yÃ¼n</p>
</div>

<!-- SAÄ ALT SABÄ°T BUTONLAR -->
<div class="fixed-btn-group">
  <button class="btn" onclick="toggleBadgesModal()">Rozetlerim</button>
  <button class="btn hidden" id="marketBtn" onclick="toggleMarketModal()">Market</button>
  <button class="btn hidden" id="kumarhaneBtn" onclick="toggleKumarhaneModal()">Kumarhane</button>
</div>

<!-- KÃ–Y ENVANTER MODALI -->
<div class="modal-overlay" id="koyModal">
  <div class="modal">
    <button class="close-modal" onclick="toggleKoyPanelModal()">X</button>
    <h2>Envanter & Ã‡ete Bilgileri</h2>
    <div class="inventory-list" id="inventoryList"></div>
    <hr />
    <h3>Ã‡ete Ãœye SayÄ±sÄ±: <span id="ceteUyeSayisi">0</span></h3>
  </div>
</div>

<!-- ROZETLERÄ°M MODALI -->
<div class="modal-overlay" id="badgesModal">
  <div class="modal">
    <button class="close-modal" onclick="toggleBadgesModal()">X</button>
    <h2>Rozetlerim</h2>

    <div class="badge-row">
      <div class="badge-type">
        <div class="badge-blue">ğŸ…</div>
        <span class="blue-label" id="blueBadgeCount">0</span>
        <p style="margin-top:0.5rem;">Vakur (Mavi)</p>
      </div>
      <div class="badge-type">
        <div class="badge-orange">ğŸ…</div>
        <span class="orange-label" id="orangeBadgeCount">0</span>
        <p style="margin-top:0.5rem;">Hatip (Turuncu)</p>
      </div>
      <div class="badge-type">
        <div class="badge-red">ğŸ…</div>
        <span class="red-label" id="redBadgeCount">0</span>
        <p style="margin-top:0.5rem;">Baron (KÄ±rmÄ±zÄ±)</p>
      </div>
    </div>

    <hr />
    <!-- DayanÄ±klÄ±lÄ±k Bar -->
    <div class="bar-section">
      <div class="bar-title">DayanÄ±klÄ±lÄ±k (Vakur)</div>
      <div class="bar-container">
        <div class="bar-fill dayaniklik-bar" id="dayaniklikBar"></div>
      </div>
      <div class="bar-value">GÃ¼Ã§: <span id="dayaniklikValue">0</span></div>
    </div>

    <!-- Onur Bar -->
    <div class="bar-section">
      <div class="bar-title">Onur (Hatip)</div>
      <div class="bar-container">
        <div class="bar-fill onur-bar" id="onurBar"></div>
      </div>
      <div class="bar-value">Onur: <span id="onurValue">0</span></div>
    </div>

    <!-- NÃ¼fus SayÄ±sÄ± -->
    <div class="bar-section">
      <div class="bar-title">NÃ¼fus (Hatip)</div>
      <div class="bar-value">NÃ¼fus: <span id="nufus">0</span></div>
    </div>
  </div>
</div>

<!-- MARKET MODALI -->
<div class="modal-overlay" id="marketModal">
  <div class="modal">
    <button class="close-modal" onclick="toggleMarketModal()">X</button>
    <h2>Market</h2>
    <p style="margin-bottom:1rem;">Baron seviyesinde satÄ±n alabileceÄŸiniz varlÄ±klar:</p>
    
    <div class="market-item" id="koyItem">
      <div>KÃ¶y (75.000$)</div>
      <button class="btn" onclick="buyItem('KÃ¶y', 75000)">SatÄ±n Al</button>
    </div>
    <div class="market-item">
      <div>At (5.000$)</div>
      <button class="btn" onclick="buyItem('At', 5000)">SatÄ±n Al</button>
    </div>
    <div class="market-item">
      <div>UÃ§ak (4.000$)</div>
      <button class="btn" onclick="buyItem('UÃ§ak', 4000)">SatÄ±n Al</button>
    </div>
    <div class="market-item">
      <div>Kumarhane Kur (40.000$)</div>
      <button class="btn" onclick="buyItem('Kumarhane', 40000)">SatÄ±n Al</button>
    </div>
  </div>
</div>

<!-- KUMARHANE MODALI -->
<div class="modal-overlay" id="kumarhaneModal">
  <div class="modal">
    <button class="close-modal" onclick="toggleKumarhaneModal()">X</button>
    <h2>Kumarhane</h2>
    <p>ÅansÄ±nÄ±zÄ± deneyin! %50 kazanma ÅŸansÄ±.</p>
    <div class="kumarhane-input">
      <input type="number" id="betAmount" placeholder="Bahis ($)" />
      <button class="btn" onclick="playGamble()">Oyna</button>
    </div>
    <p id="gambleResult"></p>
  </div>
</div>

<script>
  // -----------------------------
  // GÃ–REV LÄ°STELERÄ°
  // -----------------------------
  // Vakur GÃ¶revleri (10 adet)
  const vakurTasks = [
    "Aileye yardÄ±m et",
    "Bir Ã§ocuÄŸun eÄŸitim masrafÄ±nÄ± karÅŸÄ±la",
    "Okul inÅŸa et",
    "Mahallede yoksullara erzak daÄŸÄ±t",
    "YaÅŸlÄ±lara bakÄ±m yardÄ±mÄ± yap",
    "HayÄ±r kurumuna baÄŸÄ±ÅŸ yap",
    "Sokak hayvanlarÄ±na mama saÄŸla",
    "KÃ¼tÃ¼phane aÃ§",
    "GenÃ§lere spor malzemesi daÄŸÄ±t",
    "Halk saÄŸlÄ±ÄŸÄ± merkezinde gÃ¶nÃ¼llÃ¼ ol"
  ];

  // Hatip GÃ¶revleri (Onur PuanÄ± kazandÄ±rÄ±r, 10 adet)
  const hatipTasks = [
    "Aileleri barÄ±ÅŸtÄ±r",
    "Sokak kavgalarÄ±nÄ± durdur",
    "Yerel yÃ¶netimde arabuluculuk yap",
    "BÃ¼yÃ¼k bir uzlaÅŸÄ± toplantÄ±sÄ± dÃ¼zenle",
    "Toplumsal protestoyu sakinleÅŸtir",
    "HalkÄ± paniÄŸe karÅŸÄ± ikna et",
    "KÃ¶y meclisini topla ve ara bul",
    "STK'lar arasÄ±nda uzlaÅŸma saÄŸla",
    "GÃ¶nÃ¼llÃ¼ barÄ±ÅŸ elÃ§isi ol",
    "UluslararasÄ± barÄ±ÅŸ forumunda konuÅŸ"
  ];

  // Baron GÃ¶revleri (Para kazandÄ±rÄ±r, 10 adet)
  const baronTasks = [
    "KaÃ§akÃ§Ä±lÄ±k operasyonu dÃ¼zenle",
    "UyuÅŸturucu sevkiyatÄ± yap",
    "Bankaya sÄ±zÄ±p hÄ±rsÄ±zlÄ±k yap",
    "Silah ticareti aÄŸÄ± kur",
    "Tefecilik ile bÃ¶lgeyi kontrol et",
    "Gazino soygunu planla",
    "Polise rÃ¼ÅŸvet ver ve izini sil",
    "Karakol baskÄ±nÄ± dÃ¼zenle",
    "SÄ±nÄ±r Ã¶tesi kaÃ§akÃ§Ä±lÄ±k yap",
    "BÃ¼yÃ¼k komplo planla ve yÃ¼rÃ¼t"
  ];

  // -----------------------------
  // DEÄÄ°ÅKENLER
  // -----------------------------
  let currentRank = null;            // "Vakur", "Hatip", "Baron"
  let vakurIndex = 0;                // vakurTasks index
  let hatipIndex = 0;                // hatipTasks index
  let baronIndex = 0;                // baronTasks index

  let blueBadgeCount = 0;            // Vakur rozet sayÄ±sÄ±
  let orangeBadgeCount = 0;          // Hatip rozet sayÄ±sÄ±
  let redBadgeCount = 0;             // Baron rozet sayÄ±sÄ±

  let money = 500000;                // BaÅŸlangÄ±Ã§ parasÄ±
  let dayaniklilik = 0;              // Vakur dayanÄ±klÄ±lÄ±k
  let nufus = 0;                     // Hatip nÃ¼fus
  let onur = 0;                      // Hatip onur

  let isCooldown = false;            // GÃ¶rev bekleme sÃ¼resi
  let cooldownTimer = null;          // setInterval ref
  let timeLeft = 10;                 // 10 sn bekleme

  // Market - Envanter
  let hasKoy = false;                // KÃ¶y satÄ±n alÄ±ndÄ± mÄ±?
  let atCount = 0;                   // KaÃ§ at?
  let ucakCount = 0;                 // KaÃ§ uÃ§ak?
  let kumarhaneCount = 0;            // KaÃ§ kumarhane?
  let ceteUyeSayisi = 0;             // Ã‡ete Ã¼ye sayÄ±sÄ±

  // HTML ElemanlarÄ±
  const taskContainer = document.getElementById('taskContainer');
  const rankTitle = document.getElementById('rankTitle');
  const taskDescription = document.getElementById('taskDescription');
  const completeTaskBtn = document.getElementById('completeTaskBtn');
  const countdownTimer = document.getElementById('countdownTimer');
  const timerValue = document.getElementById('timerValue');

  const cardBaron = document.getElementById('cardBaron');
  const marketBtn = document.getElementById('marketBtn');
  const kumarhaneBtn = document.getElementById('kumarhaneBtn');

  const koyPanelTrigger = document.getElementById('koyPanelTrigger');
  const koyModal = document.getElementById('koyModal');
  const inventoryList = document.getElementById('inventoryList');
  const ceteUyeSayisiSpan = document.getElementById('ceteUyeSayisi');

  // -----------------------------
  // RÃœTBE SEÃ‡Ä°MÄ°
  // -----------------------------
  function selectRank(rank) {
    if(isCooldown) {
      alert("Yeni gÃ¶revi seÃ§ebilmek iÃ§in bekleme sÃ¼resinin dolmasÄ±nÄ± bekleyin!");
      return;
    }

    // Baron kilidi kontrolÃ¼ (en az 2 rozet gerekir)
    const totalBadges = blueBadgeCount + orangeBadgeCount + redBadgeCount;
    if(rank === "Baron" && totalBadges < 2) {
      alert("Baron seviyesine geÃ§mek iÃ§in en az 2 rozet kazanmalÄ±sÄ±nÄ±z!");
      return;
    }

    currentRank = rank;
    showNextTask();
  }

  // -----------------------------
  // BÄ°R SONRAKÄ° GÃ–REVÄ° GÃ–STER
  // -----------------------------
  function showNextTask() {
    taskContainer.classList.add('active');
    countdownTimer.style.display = "none";
    completeTaskBtn.disabled = false;

    if(currentRank === "Vakur") {
      rankTitle.innerText = "Vakur GÃ¶revi (Mavi ğŸ…)";
      taskDescription.innerText = vakurTasks[vakurIndex] 
        ? vakurTasks[vakurIndex]
        : "TÃ¼m Vakur gÃ¶revlerini tamamladÄ±nÄ±z!";
      if(!vakurTasks[vakurIndex]) {
        completeTaskBtn.disabled = true;
      }
    } 
    else if(currentRank === "Hatip") {
      rankTitle.innerText = "Hatip GÃ¶revi (Turuncu ğŸ…)";
      taskDescription.innerText = hatipTasks[hatipIndex]
        ? hatipTasks[hatipIndex]
        : "TÃ¼m Hatip gÃ¶revlerini tamamladÄ±nÄ±z!";
      if(!hatipTasks[hatipIndex]) {
        completeTaskBtn.disabled = true;
      }
    }
    else if(currentRank === "Baron") {
      rankTitle.innerText = "Baron GÃ¶revi (KÄ±rmÄ±zÄ± ğŸ…)";
      taskDescription.innerText = baronTasks[baronIndex]
        ? baronTasks[baronIndex]
        : "TÃ¼m Baron gÃ¶revlerini tamamladÄ±nÄ±z!";
      if(!baronTasks[baronIndex]) {
        completeTaskBtn.disabled = true;
      }
    }
  }

  // -----------------------------
  // GÃ–REV TAMAMLA
  // -----------------------------
  function completeTask() {
    if(currentRank === "Vakur" && vakurTasks[vakurIndex]) {
      const rozetKazanc = getRandomRozet();
      blueBadgeCount += rozetKazanc;
      dayaniklilik += rozetKazanc;
      alert(`GÃ¶revi tamamladÄ±nÄ±z! +${rozetKazanc} Mavi Rozet (Vakur)`);
      vakurIndex++;
    }
    else if(currentRank === "Hatip" && hatipTasks[hatipIndex]) {
      const rozetKazanc = getRandomRozet();
      orangeBadgeCount += rozetKazanc;
      nufus += rozetKazanc;
      onur += rozetKazanc;
      alert(`GÃ¶revi tamamladÄ±nÄ±z! +${rozetKazanc} Turuncu Rozet (Hatip) \n+${rozetKazanc} Onur`);
      hatipIndex++;
    }
    else if(currentRank === "Baron" && baronTasks[baronIndex]) {
      const rozetKazanc = getRandomRozet();
      redBadgeCount += rozetKazanc;
      // Para kazancÄ±: rastgele 300-800
      const cashGain = getRandomMoney(300, 800);
      money += cashGain;

      // KÃ¶tÃ¼ iÅŸ => varsa 1 mavi rozet kaybÄ±
      if(blueBadgeCount > 0) {
        blueBadgeCount -= 1;
        dayaniklilik = Math.max(dayaniklilik - 1, 0);
        alert(`GÃ¶revi tamamladÄ±nÄ±z! +${rozetKazanc} KÄ±rmÄ±zÄ± Rozet (Baron), +${cashGain} $ \n(Mavi Rozet -1)`);
      } else {
        alert(`GÃ¶revi tamamladÄ±nÄ±z! +${rozetKazanc} KÄ±rmÄ±zÄ± Rozet (Baron), +${cashGain} $`);
      }
      baronIndex++;
    }
    else {
      alert("Bu rÃ¼tbeye ait geÃ§erli bir gÃ¶rev kalmadÄ±!");
      return;
    }

    // ArayÃ¼z GÃ¼ncellemeleri
    updateBadgesUI();
    updateMoneyUI();
    checkBaronUnlock();

    // GÃ¶revden sonra 10 sn bekleme
    startCooldown();
  }

  // Rastgele 1-3 rozet kazancÄ±
  function getRandomRozet() {
    return Math.floor(Math.random() * 3) + 1; // 1, 2 veya 3
  }

  // Rastgele para
  function getRandomMoney(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  // -----------------------------
  // 10 SN BEKLEME SÃœRESÄ°
  // -----------------------------
  function startCooldown() {
    isCooldown = true;
    completeTaskBtn.disabled = true;
    countdownTimer.style.display = "block";
    timeLeft = 10;
    timerValue.innerText = timeLeft;

    cooldownTimer = setInterval(() => {
      timeLeft--;
      timerValue.innerText = timeLeft;

      if(timeLeft <= 0) {
        clearInterval(cooldownTimer);
        isCooldown = false;
        countdownTimer.style.display = "none";
        alert("SÃ¼re doldu! Yeni bir rÃ¼tbe seÃ§ebilirsiniz.");
        taskContainer.classList.remove('active');
      }
    }, 1000);
  }

  // -----------------------------
  // BARON KÄ°LÄ°T KONTROL
  // -----------------------------
  function checkBaronUnlock() {
    const totalBadges = blueBadgeCount + orangeBadgeCount + redBadgeCount;
    if(totalBadges >= 2) {
      cardBaron.classList.remove('locked');
      cardBaron.querySelector('button').style.visibility = "visible";
      // Market ve Kumarhane butonlarÄ±nÄ± da gÃ¶ster
      marketBtn.classList.remove('hidden');
      kumarhaneBtn.classList.remove('hidden');
    }
  }

  // -----------------------------
  // ARAYÃœZ GÃœNCELLEME
  // -----------------------------
  function updateBadgesUI() {
    document.getElementById('blueBadgeCount').innerText = blueBadgeCount;
    document.getElementById('orangeBadgeCount').innerText = orangeBadgeCount;
    document.getElementById('redBadgeCount').innerText = redBadgeCount;

    // DayanÄ±klÄ±lÄ±k Bar
    document.getElementById('dayaniklikValue').innerText = dayaniklilik;
    let dBarWidth = dayaniklilik * 10;
    if(dBarWidth > 300) dBarWidth = 300;
    document.getElementById('dayaniklikBar').style.width = dBarWidth + "px";

    // Onur Bar
    document.getElementById('onurValue').innerText = onur;
    let oBarWidth = onur * 10;
    if(oBarWidth > 300) oBarWidth = 300;
    document.getElementById('onurBar').style.width = oBarWidth + "px";

    // NÃ¼fus
    document.getElementById('nufus').innerText = nufus;
  }

  function updateMoneyUI() {
    document.getElementById('money').innerText = money;
  }

  // -----------------------------
  // ROZETLER MODAL AÃ‡/KAPAT
  // -----------------------------
  function toggleBadgesModal() {
    const badgesModal = document.getElementById('badgesModal');
    badgesModal.classList.toggle('active');
  }

  // -----------------------------
  // MARKET MODAL AÃ‡/KAPAT
  // -----------------------------
  function toggleMarketModal() {
    const marketModal = document.getElementById('marketModal');
    marketModal.classList.toggle('active');
  }

  // -----------------------------
  // MARKET SATIN AL
  // -----------------------------
  function buyItem(itemName, price) {
    if(money < price) {
      alert("Yeterli paranÄ±z yok!");
      return;
    }

    // Baron kilidi de aktif mi?
    const totalBadges = blueBadgeCount + orangeBadgeCount + redBadgeCount;
    if(totalBadges < 2) {
      alert("SatÄ±n almak iÃ§in Baron seviyesine eriÅŸmelisiniz (en az 2 rozet)!");
      return;
    }

    // SatÄ±n al
    money -= price;
    updateMoneyUI();

    switch(itemName) {
      case "KÃ¶y":
        if(hasKoy) {
          alert("Zaten bir kÃ¶yÃ¼nÃ¼z var!");
          return;
        }
        hasKoy = true;
        alert("KÃ¶y satÄ±n alÄ±ndÄ±!");
        document.getElementById('koyItem').style.display = "none";
        koyPanelTrigger.style.display = "flex"; // Sol panelde kÃ¶y resmi gÃ¶ster
        break;
      case "At":
        atCount++;
        ceteUyeSayisi += 2;
        alert("At satÄ±n alÄ±ndÄ± (+2 Ã§ete Ã¼yesi)!");
        break;
      case "UÃ§ak":
        ucakCount++;
        ceteUyeSayisi += 5;
        alert("UÃ§ak satÄ±n alÄ±ndÄ± (+5 Ã§ete Ã¼yesi)!");
        break;
      case "Kumarhane":
        kumarhaneCount++;
        ceteUyeSayisi += 3;
        alert("Kumarhane kuruldu (+3 Ã§ete Ã¼yesi)!");
        break;
      default:
        break;
    }

    updateInventoryUI();
  }

  // ENVANTER GÃœNCELLE
  function updateInventoryUI() {
    inventoryList.innerHTML = "";
    if(hasKoy) {
      const divKoy = document.createElement('div');
      divKoy.innerHTML = `<img src="https://via.placeholder.com/32?text=K%C3%B6y" alt="KÃ¶y" /> KÃ¶y (1 adet)`;
      inventoryList.appendChild(divKoy);
    }
    if(atCount > 0) {
      const divAt = document.createElement('div');
      divAt.innerHTML = `<img src="https://via.placeholder.com/32?text=%F0%9F%90%8E" alt="At" /> At (x${atCount})`;
      inventoryList.appendChild(divAt);
    }
    if(ucakCount > 0) {
      const divUcak = document.createElement('div');
      divUcak.innerHTML = `<img src="https://via.placeholder.com/32?text=%E2%9C%88%EF%B8%8F" alt="UÃ§ak" /> UÃ§ak (x${ucakCount})`;
      inventoryList.appendChild(divUcak);
    }
    if(kumarhaneCount > 0) {
      const divKumar = document.createElement('div');
      divKumar.innerHTML = `<img src="https://via.placeholder.com/32?text=%24" alt="Kumarhane" /> Kumarhane (x${kumarhaneCount})`;
      inventoryList.appendChild(divKumar);
    }

    if(!hasKoy && atCount === 0 && ucakCount === 0 && kumarhaneCount === 0) {
      inventoryList.innerHTML = "<p>Envanteriniz boÅŸ!</p>";
    }

    ceteUyeSayisiSpan.innerText = ceteUyeSayisi;
  }

  // -----------------------------
  // KÃ–Y PANEL AÃ‡/KAPAT
  // -----------------------------
  function toggleKoyPanelModal() {
    updateInventoryUI();
    koyModal.classList.toggle('active');
  }

  // -----------------------------
  // KUMARHANE MODAL AÃ‡/KAPAT
  // -----------------------------
  function toggleKumarhaneModal() {
    const kumarhaneModal = document.getElementById('kumarhaneModal');
    kumarhaneModal.classList.toggle('active');
    document.getElementById('gambleResult').innerText = "";
    document.getElementById('betAmount').value = "";
  }

  // -----------------------------
  // KUMARHANE OYUN FONKSÄ°YONU
  // -----------------------------
  function playGamble() {
    const betInput = document.getElementById('betAmount');
    const gambleResult = document.getElementById('gambleResult');
    const bet = parseInt(betInput.value);

    if(isNaN(bet) || bet <= 0) {
      gambleResult.innerText = "GeÃ§erli bir bahis miktarÄ± giriniz.";
      return;
    }
    if(bet > money) {
      gambleResult.innerText = "Yeterli bakiyeniz yok!";
      return;
    }

    // %50 kazanma ÅŸansÄ±
    const chance = Math.random();
    if(chance < 0.5) {
      // KazandÄ±
      money += bet;
      gambleResult.innerText = `KazandÄ±nÄ±z! Yeni bakiye: ${money} $`;
    } else {
      // Kaybetti
      money -= bet;
      gambleResult.innerText = `Kaybettiniz! Yeni bakiye: ${money} $`;
    }
    updateMoneyUI();
  }
</script>
</body>
</html>

