<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Black Dolphine - Mafia Oyunu</title>
  <style>
    /* GENEL STÄ°LLER */
    * {
      margin: 0; padding: 0; box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    body {
      background: #888; color: #f1f1f1; min-height: 100vh;
      position: relative; padding-top: 120px;
      font-size: 0.9rem;
    }
    /* HEADER */
    header {
      background: rgba(0,0,0,0.85);
      display: flex; align-items: center; justify-content: space-between;
      padding: 1rem 2rem; position: fixed; top: 0; left: 0;
      width: 100%; z-index: 999;
      box-shadow: 0 2px 5px rgba(0,0,0,0.5);
    }
    .logo {
      font-size: 2rem; font-weight: bold; text-transform: uppercase;
      color: #fff; text-shadow: 1px 1px 0 #000, 2px 2px 0 #fff, 3px 3px 5px rgba(0,0,0,0.5);
      display: flex; align-items: center;
    }
    .logo-dolphin { margin-left: 10px; width: 50px; height: auto; }
    .logo-dolphin svg { width: 100%; height: auto; fill: #00cc66; stroke: #fff; stroke-width: 2; }
    .money {
      font-size: 1rem; background: #222; padding: 0.5rem 1rem;
      border-radius: 5px; border: 1px solid #333;
    }
    .money span { color: #ffcc00; margin-left: 5px; font-weight: bold; }
     
    /* ANA SAYFA KAPSAYICI */
    #mainPage {
      width: 100%; min-height: 100vh; position: relative;
    }
     
    /* SOL PANEL: 2 Sekme (Durumum + TÃ¼ccar) */
    #leftPanel {
      position: fixed; top: 120px; left: 20px;
      width: 280px; z-index: 1000;
    }
    .sectionBox {
      background: rgba(0,0,0,0.6);
      margin-bottom: 1rem; border-radius: 10px;
      padding: 1rem;
    }
    .sectionBox h2 {
      text-align: center; color: #ffcc00;
      margin-bottom: 1rem; cursor: pointer;
      font-size: 1.2rem;
    }
    .tab-content {
      display: none; /* BaÅŸlangÄ±Ã§ta kapalÄ± */
      background: rgba(0,0,0,0.4); border-radius: 5px;
      padding: 0.5rem; margin-top: 0.5rem;
    }
    .tab-content.active { display: block; }
     
    /* DURUMUM Ä°Ã‡ERÄ°ÄÄ° */
    .stat-bar {
      margin-bottom: 0.7rem; background: #444;
      border-radius: 5px; overflow: hidden; padding: 5px;
    }
    .stat-label { margin-bottom: 3px; font-weight: bold; font-size: 0.85rem; }
    .stat-fill {
      height: 18px; background: #00bfff; width: 0%;
      transition: width 1s ease;
    }
    .stat-text { margin-top: 3px; font-size: 0.8rem; }
    .lockedStat { opacity: 0.4; }
    .badge-indicator {
      text-align: center; font-size: 0.8rem; margin-top: 3px; color: #ffcc00;
    }
    #profileInfo {
      margin-top: 1rem; font-size: 0.9rem; font-weight: bold; text-align: center;
    }
     
    /* TÃœCCAR Ä°Ã‡ERÄ°ÄÄ° */
    #tuccarContent ul {
      list-style: none; margin: 0; padding: 0;
    }
    #tuccarContent li {
      display: flex; justify-content: space-between; align-items: center;
      margin-bottom: 0.5rem;
    }
    #tuccarContent li button {
      background: #ff4444; border: none; border-radius: 5px;
      color: #fff; cursor: pointer; padding: 0.3rem 0.5rem;
      font-size: 0.8rem;
    }
     
    /* SAÄ PANEL: KÃ¶y Ä°ncelemesi & Trenle Seyehat */
    #rightContainer {
      position: fixed; right: 20px; top: 140px; width: 280px; z-index: 1000;
    }
    #koyIncelemeBox, #trenSeyahatBox {
      background: rgba(0,0,0,0.7);
      padding: 1rem; border-radius: 10px;
      margin-bottom: 1rem;
    }
    #koyIncelemeBox h3, #trenSeyahatBox h3 {
      text-align: center; color: #ffcc00; margin-bottom: 0.5rem; font-size: 1rem;
    }
    #koyIncelemeBox ul, #trenSeyahatBox ul {
      list-style: none; padding: 0; margin: 0; font-size: 0.85rem;
    }
    #koyIncelemeBox li, #trenSeyahatBox li {
      margin-bottom: 0.3rem; display: flex; justify-content: space-between; align-items: center;
    }
    #koyIncelemeBox li button, #trenSeyahatBox li button {
      padding: 0.3rem 0.5rem; font-size: 0.8rem; cursor: pointer;
    }
    /* Sayfalama */
    #koyIncelemePagination, #trenPagination {
      text-align: center; margin-top: 0.5rem;
    }
    #koyIncelemePagination span, #trenPagination span {
      display: inline-block; padding: 0.3rem 0.6rem; margin: 0 0.2rem;
      background: #444; border-radius: 3px; cursor: pointer; color: #ffcc00;
    }
    #koyIncelemePagination span.active, #trenPagination span.active {
      background: #555;
    }
     
    /* ORTA PANEL: Rank KartlarÄ± */
    #centerRanks {
      position: absolute; top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      display: flex; gap: 20px; z-index: 900;
    }
    .card {
      background: rgba(255,255,255,0.05); backdrop-filter: blur(4px);
      border: 1px solid rgba(255,255,255,0.1); border-radius: 10px;
      width: 250px; padding: 1.5rem; text-align: center;
      transition: transform 0.3s ease; box-shadow: 0 2px 5px rgba(0,0,0,0.3);
      cursor: pointer;
    }
    .card:hover { transform: translateY(-5px); }
    .card h2 { margin-bottom: 1rem; color: #ffcc00; }
    .card p { margin-bottom: 1rem; }
    .card button {
      padding: 0.6rem 1.2rem; background: #ff4444; border: none; border-radius: 5px;
      color: #fff; cursor: pointer; transition: background 0.3s;
    }
    .card button:hover { background: #ff2222; }
    .locked {
      opacity: 0.4; pointer-events: none; position: relative;
    }
    .locked::after {
      content: "KÄ°LÄ°TLÄ°"; position: absolute; top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0,0,0,0.8); padding: 0.5rem 1rem; border-radius: 5px;
      font-weight: bold; color: #ff4444;
    }
    .badge-container {
      margin-top: 10px; font-size: 1.2rem; color: #ffcc00;
    }
     
    /* ALT SOL KÃ–Y BÄ°LGÄ°SÄ° */
    #bottomLeft {
      position: fixed; bottom: 20px; left: 20px; font-size: 1.2rem;
      background: #0288d1; padding: 0.5rem 1rem; border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.3);
      z-index: 1000;
    }
     
    /* GÃ–REV SAYFASI (Overlay) */
    #gorevPage {
      display: none; position: fixed; top: 0; left: 0;
      width: 100%; height: 100%; background: #000; color: #fff; z-index: 3000;
      padding: 2rem; overflow: hidden;
    }
    #gorevPage h1 {
      text-align: center; margin-bottom: 1rem;
    }
    .rankSection {
      background: rgba(255,255,255,0.07);
      border: 1px solid #888; padding: 1rem; border-radius: 10px;
      min-width: 100%;
    }
    .rankSection h2 {
      text-align: center; margin-bottom: 0.5rem; color: #ffcc00;
    }
    .taskItem {
      background: #222; border-radius: 5px;
      padding: 0.5rem; margin-bottom: 0.5rem;
      display: flex; justify-content: space-between; align-items: center;
    }
    .taskItem span {
      max-width: 80%; white-space: nowrap;
      text-overflow: ellipsis; overflow: hidden;
      display: inline-block;
    }
    .taskItem button {
      background: #ff4444; border: none; border-radius: 5px;
      color: #fff; cursor: pointer; padding: 0.3rem 0.5rem; margin-left: 10px;
      font-size: 0.8rem;
    }
    .completedTask span::after {
      content: " âœ…"; color: #0f0; margin-left: 5px;
    }
    .lockedDifficulty { opacity: 0.3; pointer-events: none; }
    .difficultyProgressBar {
      background: #444; height: 18px; border-radius: 5px; overflow: hidden; margin-top: 0.5rem;
    }
    .difficultyProgressFill {
      background: #00bfff; width: 0%; height: 100%; transition: width 0.3s ease;
    }
    .progressText { text-align: right; font-size: 0.8rem; margin-top: 2px; }
    
    /* SLÄ°DER OK HOVER */
    #sliderPrev:hover, #sliderNext:hover {
      color: #ffcc00;
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="logo">
      BLACK DOLPHINE
      <div class="logo-dolphin">
        <svg viewBox="0 0 100 50" xmlns="http://www.w3.org/2000/svg">
          <path d="M10,30 Q20,10 40,20 T90,30 Q70,40 50,35 T10,30 Z"/>
        </svg>
      </div>
    </div>
    <div class="money">Dolar: <span id="money">500000</span></div>
  </header>
   
  <!-- ANA SAYFA -->
  <div id="mainPage">
    <!-- SOL PANEL: 2 Sekme (Durumum + TÃ¼ccar) -->
    <div id="leftPanel">
      <!-- Durumum Sekmesi -->
      <div class="sectionBox">
        <h2 onclick="toggleDurumum()">Durumum &#9660;</h2>
        <div id="durumumContent" class="tab-content">
          <div class="stat-bar" id="vakurStat">
            <div class="stat-label">Vakur ğŸ›¡ï¸</div>
            <div class="stat-fill" id="vakurFill"></div>
            <div class="stat-text" id="vakurText">Koruma: 0 (0%)</div>
            <div class="badge-indicator">Rozet: <span id="vakurBadgeCount">0</span></div>
          </div>
          <div class="stat-bar lockedStat" id="hatipStat">
            <div class="stat-label">Hatip ğŸ‘¥</div>
            <div class="stat-fill" id="hatipFill"></div>
            <div class="stat-text" id="hatipText">NÃ¼fus: 0 (0%)</div>
            <div class="badge-indicator">Rozet: <span id="hatipBadgeCount">0</span></div>
          </div>
          <div class="stat-bar lockedStat" id="baronStat">
            <div class="stat-label">Baron â™›</div>
            <div class="stat-fill" id="baronFill"></div>
            <div class="stat-text" id="baronText">Etki: 0 (0%)</div>
            <div class="badge-indicator">Rozet: <span id="baronBadgeCount">0</span></div>
          </div>
          <div id="profileInfo">KÃ¶y: <span id="currentVillageDisplay">Asman</span></div>
        </div>
      </div>
       
      <!-- TÃ¼ccar Sekmesi -->
      <div class="sectionBox">
        <h2 onclick="toggleTuccar()">TÃ¼ccar &#9660;</h2>
        <div id="tuccarContent" class="tab-content">
          <ul>
            <li><span>Silah (2500$)</span> <button type="button" onclick="buyItem('Silah', 2500)">SatÄ±n Al</button></li>
            <li><span>Bomba (1000$)</span> <button type="button" onclick="buyItem('Bomba', 1000)">SatÄ±n Al</button></li>
            <li><span>C4 (1500$)</span> <button type="button" onclick="buyItem('C4', 1500)">SatÄ±n Al</button></li>
            <li><span>Villa (15000$)</span> <button type="button" onclick="buyItem('Villa', 15000)">SatÄ±n Al</button></li>
            <li><span>Ev (10000$)</span> <button type="button" onclick="buyItem('Ev', 10000)">SatÄ±n Al</button></li>
          </ul>
        </div>
      </div>
    </div>
    <!-- /leftPanel -->
     
    <!-- SAÄ PANEL: KÃ¶y Ä°ncelemesi & Trenle Seyehat -->
    <div id="rightContainer">
      <!-- KÃ¶y Ä°ncelemesi Kutusu -->
      <div id="koyIncelemeBox">
        <h3>KÃ¶y Ä°ncelemesi</h3>
        <ul id="koyIncelemeList"></ul>
        <div id="koyIncelemePagination"></div>
      </div>
      <!-- Trenle Seyehat Kutusu -->
      <div id="trenSeyahatBox">
        <h3>Trenle Seyehat</h3>
        <ul id="trenList"></ul>
        <div id="trenPagination"></div>
      </div>
    </div>
     
    <!-- ORTA PANEL: Rank KartlarÄ± -->
    <div id="centerRanks">
      <div class="card" id="cardVakur" onclick="openGorevPage('Vakur')">
        <h2>Vakur</h2>
        <p>Mavi ğŸ…</p>
        <div class="badge-container">Rozet: <span id="blueBadgeCount">0</span></div>
      </div>
      <div class="card locked" id="cardHatip" onclick="openGorevPage('Hatip')">
        <h2>Hatip</h2>
        <p>Turuncu ğŸ…</p>
        <div class="badge-container">Rozet: <span id="orangeBadgeCount">0</span></div>
      </div>
      <div class="card locked" id="cardBaron" onclick="openGorevPage('Baron')">
        <h2>Baron</h2>
        <p>KÄ±rmÄ±zÄ± ğŸ…</p>
        <div class="badge-container">Rozet: <span id="redBadgeCount">0</span></div>
      </div>
    </div>
  </div>
  <!-- /#mainPage -->
     
  <!-- GÃ–REV SAYFASI (Overlay) -->
  <div id="gorevPage">
    <button type="button" onclick="closeGorevPage()">Geri DÃ¶n</button>
    <h1 id="gorevHeader"></h1>
    <!-- Slider iÃ§in wrapper -->
    <div id="tasksContainer"></div>
  </div>
     
  <!-- ALT SOL KÃ–Y BÄ°LGÄ°SÄ° -->
  <div id="bottomLeft">Asman</div>
     
  <script>
    /********************* GENEL DEÄÄ°ÅKENLER *********************/
    let money = 500000;
    let currentVillage = "Asman";
    let currentRank = "";  // Global olarak rank bilgisini saklamak iÃ§in.
     
    let vakurTaskCount = 0, hatipTaskCount = 0, baronTaskCount = 0;
    let isHatipUnlocked = false, isBaronUnlocked = false;
     
    let blueBadgeCount = 0, orangeBadgeCount = 0, redBadgeCount = 0;
     
    const pageSizes = [3, 3, 5, 5, 5, 5, 5];
    const totalPages = pageSizes.length;
    let currentTrenPage = 1;
     
    const allKoyler = [
      "Asman", "Mizrin", "Qeruk", "TwÄ±lveser", "Ashma",
      "Ogean", "Karuk", "Tilkarut", "Midep", "Ã–merk",
      "Tilal", "Olik", "MÄ±shecerk", "MÄ±zelb", "KergÃ¼",
      "Bozdepe", "CinnÄ±k", "MÄ±zrin", "BostancÄ±", "Masucark",
      "KÄ±rÄ±kan", "Kuzluk", "Qeremsal", "MedÄ±rbaz", "Hecuk",
      "ZebeÅŸker", "MirÄŸan", "Dideri", "KazÄ±ka", "Nehlnehli",
      "Birdirej", "Cembel"
    ];
     
    function randomMalikane() { return [5,10,15][Math.floor(Math.random()*3)]; }
    function randomSiginak()  { return [50,75,100][Math.floor(Math.random()*3)]; }
    function randomVilla()    { return [25,50,75][Math.floor(Math.random()*3)]; }
    const villageData = allKoyler.map(k => ({
      name: k,
      malikane: randomMalikane(),
      siginak:  randomSiginak(),
      villa:    randomVilla()
    }));
     
    /********** GÃ–REV LÄ°STELERÄ° (Vakur, Hatip) **********/
    const vakurDifficulties = [
      { 
        title: "ğŸ”¹ Basit GÃ¶revler",
        locked: false,
        tasks: [
          "Bir Ã§ocuÄŸun okul Ã§antasÄ± almasÄ±na yardÄ±mcÄ± ol.",
          "Mahalledeki yaÅŸlÄ± bir komÅŸunun alÄ±ÅŸveriÅŸ poÅŸetlerini taÅŸÄ±.",
          "Sokaktaki sahipsiz bir kÃ¶pek iÃ§in su ve mama koy.",
          "ArkadaÅŸÄ±na ufak bir hediye vererek moralini yÃ¼kselt.",
          "Ä°ÅŸsiz bir tanÄ±dÄ±ÄŸÄ±na CV hazÄ±rlama konusunda destek ol.",
          "KÃ¼tÃ¼phanede eski kitaplarÄ± dÃ¼zenlemeye gÃ¶nÃ¼llÃ¼ ol.",
          "Bir hayÄ±r kurumuna ufak bir baÄŸÄ±ÅŸ yap veya yardÄ±m topla.",
          "OtobÃ¼ste yaÅŸlÄ± veya hamile birine yer ver.",
          "Mahalle parkÄ±nda Ã§Ã¶p toplama etkinliÄŸine katÄ±l.",
          "ArkadaÅŸÄ±na kÃ¼Ã§Ã¼k bir sÃ¼rpriz parti dÃ¼zenle."
        ]
      },
      { 
        title: "ğŸ”¸ Orta GÃ¶revler",
        locked: true,
        tasks: [
          "Aile iÃ§inde tartÄ±ÅŸan iki akrabayÄ± barÄ±ÅŸtÄ±r.",
          "Mahallede yardÄ±m kermesi veya etkinlik organize et.",
          "Maddi durumu kÃ¶tÃ¼ bir Ã¶ÄŸrenciye burs/kitap yardÄ±mÄ± ayarla.",
          "Bir STKâ€™nÄ±n etkinliÄŸinde aktif rol al.",
          "BakÄ±msÄ±z parkÄ± onarmak iÃ§in gÃ¶nÃ¼llÃ¼ler topla.",
          "Kan baÄŸÄ±ÅŸÄ± kampanyasÄ±na katkÄ±da bulun.",
          "Bir arkadaÅŸÄ±n iÃ§in profesyonel yardÄ±m aracÄ±lÄ±ÄŸÄ± yap.",
          "ZorbalÄ±ÄŸa uÄŸrayan birine Ã§evrimiÃ§i destek bul.",
          "Engelliler iÃ§in kamu binalarÄ±na eriÅŸim kolaylÄ±ÄŸÄ± saÄŸla.",
          "Sokak hayvanlarÄ± iÃ§in geÃ§ici barÄ±nak oluÅŸtur."
        ]
      },
      { 
        title: "ğŸ”¹ Zor GÃ¶revler",
        locked: true,
        tasks: [
          "Afet bÃ¶lgesine yardÄ±m ekibi olarak katÄ±l.",
          "Kronik sorunu iÃ§in belediyeyle gÃ¶rÃ¼ÅŸÃ¼p Ã§Ã¶zÃ¼m talep et.",
          "Zor durumdaki aileye iÅŸ veya barÄ±nma imkÃ¢nÄ± saÄŸla.",
          "Hayvan barÄ±naÄŸÄ±nda kapsamlÄ± bakÄ±m ve temizlik yap.",
          "KÃ¼s olan iki arkadaÅŸÄ±n barÄ±ÅŸmasÄ±na aracÄ±lÄ±k et.",
          "Toplum dÄ±ÅŸlanmÄ±ÅŸ birini etkinliklere dahil et.",
          "KÃ¼Ã§Ã¼k Ã§aplÄ± baÄŸÄ±ÅŸ kampanyasÄ± dÃ¼zenle.",
          "Yerel hastanede gÃ¶nÃ¼llÃ¼ refakat programÄ±na katÄ±l.",
          "Belediye ile iÅŸ birliÄŸi yaparak genÃ§lik merkezi aÃ§.",
          "Maddi sÄ±kÄ±ntÄ± yaÅŸayan aileler iÃ§in erzak paketi daÄŸÄ±tÄ±mÄ± yap."
        ]
      },
      { 
        title: "ğŸ”¸ Ä°leri GÃ¶revler",
        locked: true,
        tasks: [
          "BÃ¼yÃ¼k Ã¶lÃ§ekli yardÄ±m projesine liderlik et.",
          "GenÃ§lere yÃ¶nelik mentorluk programÄ± baÅŸlat.",
          "Meslek edindirme kursu organize et.",
          "Toplumsal soruna belediye-STK ortaklÄ±ÄŸÄ±yla Ã§Ã¶zÃ¼m Ã¼ret.",
          "GÃ¶nÃ¼llÃ¼ ekibi kurarak yaÅŸlÄ± bakÄ±mevlerini ziyaret et.",
          "Okullarda 'empati ve yardÄ±mseverlik' semineri dÃ¼zenle.",
          "Sosyal medya kampanyasÄ±yla yardÄ±m toplama etkinliÄŸi dÃ¼zenle.",
          "Ãœcretsiz terapi/rehberlik gÃ¼nÃ¼ organize et.",
          "Ãœniversite Ã¶ÄŸrencilerine staj imkÃ¢nlarÄ± sunan platform oluÅŸtur.",
          "Ã‡evre koruma amaÃ§lÄ± aÄŸaÃ§landÄ±rma kampanyasÄ± dÃ¼zenle."
        ]
      },
      { 
        title: "ğŸ”¹ Son GÃ¶revler",
        locked: true,
        tasks: [
          "Ulusal Ã§apta sosyal sorumluluk projesi yÃ¼rÃ¼t.",
          "BÃ¼yÃ¼k baÄŸÄ±ÅŸ konseri/festival dÃ¼zenle.",
          "GÃ¶nÃ¼llÃ¼leri bir araya getiren platform kur.",
          "EÄŸitim bursu fonu baÅŸlat.",
          "Aile iÃ§i ÅŸiddete koruma ve rehabilitasyon hizmeti oluÅŸtur.",
          "YardÄ±m vakfÄ± kurarak sÃ¼rekli yardÄ±m yÃ¼rÃ¼t.",
          "UluslararasÄ± STKâ€™lerle iÅŸ birliÄŸi yaparak yurt dÄ±ÅŸÄ±na yardÄ±m taÅŸÄ±.",
          "Yurt Ã§apÄ±nda geri dÃ¶nÃ¼ÅŸÃ¼m projesi baÅŸlat.",
          "DezavantajlÄ± bÃ¶lgeler iÃ§in uzaktan eÄŸitim altyapÄ±sÄ± kur.",
          "SaÄŸlÄ±k hizmetleri alamayan bÃ¶lgelere mobil saÄŸlÄ±k aracÄ± gÃ¶nder.",
          "ğŸ–ï¸ Tebrikler! Hatip oldunuz! Ana menÃ¼ye dÃ¶nÃ¼yorsunuz."
        ]
      }
    ];
     
    const hatipDifficulties = [
      { 
        title: "ğŸ”¹ Basit GÃ¶revler",
        locked: false,
        tasks: [
          "Sokak kavgasÄ±nÄ± tatlÄ± dille sakinleÅŸtir.",
          "ArkadaÅŸlar arasÄ±ndaki tartÄ±ÅŸmayÄ± yapÄ±cÄ± sÃ¶zlerle Ã§Ã¶z.",
          "Aile iÃ§i gerginliÄŸi dinleyerek gider.",
          "Sosyal medyada tartÄ±ÅŸmayÄ± tatlÄ±ya baÄŸla.",
          "YanlÄ±ÅŸ bilgiyi doÄŸru kaynakla dÃ¼zelt.",
          "Dedikoduyu kaynaÄŸÄ±ndan Ã§Ã¼rÃ¼terek sakinleÅŸtir.",
          "Okul/kulÃ¼p etkinliÄŸinde kÄ±sa konuÅŸma yap.",
          "Ufak grupta hitabet pratiÄŸi yap.",
          "ArkadaÅŸ grubuna moral verici konuÅŸma yap.",
          "Sosyal medya Ã¼zerinden kÃ¼Ã§Ã¼k bilgilendirici yayÄ±n dÃ¼zenle."
        ]
      },
      { 
        title: "ğŸ”¸ Orta GÃ¶revler",
        locked: true,
        tasks: [
          "KomÅŸular arasÄ±ndaki sorunu toplantÄ± ile Ã§Ã¶z.",
          "Ä°ÅŸ yerindeki iletiÅŸim kopukluÄŸunu arabuluculuk yaparak gider.",
          "Yerel hayÄ±r kurumuna baÄŸÄ±ÅŸ toplamak iÃ§in ikna et.",
          "KÃ¼Ã§Ã¼k Ã¶ÄŸrenci grubuna hitabet eÄŸitimi dÃ¼zenle.",
          "Aile ÅŸirketinde tartÄ±ÅŸmada hakemlik yap.",
          "Sivil toplum giriÅŸiminde gÃ¶nÃ¼llÃ¼ konuÅŸmacÄ± ol.",
          "Mahalle muhtarÄ±yla imza kampanyasÄ± baÅŸlat.",
          "GÃ¶nÃ¼llÃ¼ ekiple sokak sanatÃ§Ä±larÄ±na destek saÄŸla.",
          "Mahallede Ã§evre bilinci semineri dÃ¼zenle.",
          "GenÃ§lere yÃ¶nelik kÃ¼Ã§Ã¼k mÃ¼nazara yarÄ±ÅŸmalarÄ± organize et."
        ]
      },
      { 
        title: "ğŸ”¹ Zor GÃ¶revler",
        locked: true,
        tasks: [
          "Ä°ki rakip grubu bir araya getirip barÄ±ÅŸ gÃ¶rÃ¼ÅŸmesi yap.",
          "Ulusal platformda toplumsal bir konuda konuÅŸ.",
          "BÃ¼yÃ¼k iÅŸ anlaÅŸmazlÄ±ÄŸÄ±nda arabulucu rol Ã¼stlen.",
          "Mahalle halkÄ±nÄ±n taleplerini dile getirip sonuÃ§ al.",
          "Ãœniversite protestosunu uzlaÅŸma yoluyla sonlandÄ±r.",
          "Esnaf arasÄ±ndaki fiyat anlaÅŸmazlÄ±ÄŸÄ±nÄ± uzlaÅŸtÄ±r.",
          "Binlerce kiÅŸilik tartÄ±ÅŸmayÄ± sakinleÅŸtir.",
          "Sivil toplum zirvesinde temsilci olarak konuÅŸ.",
          "Yerel basÄ±nda toplumsal sorunlar Ã¼zerine kÃ¶ÅŸe yazÄ±sÄ± yayÄ±nla.",
          "Ä°ÅŸsizlere yÃ¶nelik motivasyon konuÅŸmasÄ± gerÃ§ekleÅŸtir."
        ]
      },
      { 
        title: "ğŸ”¸ Ä°leri GÃ¶revler",
        locked: true,
        tasks: [
          "BÃ¶lgesel toplum hareketine Ã¶nderlik et.",
          "Ulusal konferansta Ã§Ã¶zÃ¼m Ã¶nerileri sun.",
          "Yerel siyasetÃ§iler ve STKâ€™ler arasÄ±nda diyaloÄŸu gÃ¼Ã§lendir.",
          "BarÄ±ÅŸ Ã§alÄ±ÅŸtayÄ±nda moderatÃ¶rlÃ¼k yap.",
          "Kurumsal ÅŸirkette Ã¼st dÃ¼zey mÃ¼zakerelerde bulun.",
          "Mahalle gerginliÄŸini uzlaÅŸÄ± belgesiyle sonlandÄ±r.",
          "Åehrin Ã¶nde gelenleriyle bÃ¼yÃ¼k kampanya dÃ¼zenle.",
          "Ãœniversitede 'BarÄ±ÅŸÃ§Ä±l Ä°letiÅŸim ve Diplomasi' dersi ver.",
          "Kamu kurumlarÄ±nda iletiÅŸim eÄŸitimi ver.",
          "Åiddetsiz iletiÅŸim Ã¼zerine farkÄ±ndalÄ±k kampanyasÄ± baÅŸlat."
        ]
      },
      { 
        title: "ğŸ”¹ Son GÃ¶revler",
        locked: true,
        tasks: [
          "Kumarhane zinciri ve malikÃ¢ne sahibi ol.",
          "UluslararasÄ± mafya aÄŸÄ±nÄ±n temsilcisini Ã¼stlen.",
          "Siyasete dolaylÄ± girip seÃ§imleri fonla.",
          "YeraltÄ± 'Baronlar Konseyi' kur.",
          "Devlet kurumlarÄ±na adam yerleÅŸtir.",
          "Yurt dÄ±ÅŸÄ± yatÄ±rÄ±mlarÄ± yÃ¶net.",
          "Rakip baronlara operasyon yap.",
          "Finans ve medya gÃ¼cÃ¼nÃ¼ ele geÃ§irerek kamuoyu oluÅŸtur.",
          "UluslararasÄ± kaÃ§akÃ§Ä±lÄ±k aÄŸÄ±nÄ±n liderliÄŸini devral.",
          "DÃ¼nya genelinde mafya zirvesine katÄ±larak temsilcilik yap."
        ]
      }
    ];
     
    // (Baron gÃ¶revleri aynÄ± kalabilir veya Ã¼zerine ekleme yapÄ±labilir.)
    const baronDifficulties = [
      { 
        title: "Basit GÃ¶revler", locked: false,
        tasks: [
          "Ufak Ã§apta uyuÅŸturucu satmayÄ± dene.",
          "Mahallede kÃ¼Ã§Ã¼k 'koruma parasÄ±' topla.",
          "Kafe/mekÃ¢ndan ufak haraÃ§ iste.",
          "Sokak satÄ±cÄ±larÄ± arasÄ±nda rekabeti lehine Ã§evir.",
          "Sahte marka Ã¼rÃ¼nlerin satÄ±ÅŸ aÄŸÄ±nÄ± oluÅŸtur.",
          "Åantaj veya tehditle rakibi sustur.",
          "Ufak Ã§etenin desteÄŸiyle 'gÃ¼venlik' saÄŸlandÄ±ÄŸÄ±nÄ± iddia et.",
          "KaÃ§ak iÃ§ki satÄ±ÅŸÄ± yapan ekibe arka Ã§Ä±k.",
          "KÃ¼Ã§Ã¼k Ã§apta sahte belge dÃ¼zenleyerek kazanÃ§ saÄŸla.",
          "Sokakta kÃ¼Ã§Ã¼k bahis oyunlarÄ± dÃ¼zenle."
        ]
      },
      { 
        title: "Orta GÃ¶revler", locked: true,
        tasks: [
          "Esnaftan dÃ¼zenli 'koruma parasÄ±' toplamaya baÅŸla.",
          "Polis/memurlarla rÃ¼ÅŸvet baÄŸlantÄ±sÄ± kur.",
          "YasadÄ±ÅŸÄ± kumar organizasyonu baÅŸlat.",
          "Rakip Ã§eteyle gerginliÄŸi lehine Ã§Ã¶z.",
          "Silah veya uyuÅŸturucu sevkiyatÄ±na lojistik destek ver.",
          "Yasa dÄ±ÅŸÄ± bahis mekanlarÄ±yla anlaÅŸ.",
          "Kara para aklama iÃ§in kÃ¼Ã§Ã¼k sermaye oluÅŸtur.",
          "Gece kulÃ¼bÃ¼nÃ¼n 'gizli ortak' statÃ¼sÃ¼nÃ¼ al.",
          "Sahte pasaport ve vize Ã¼retim aÄŸÄ±nÄ± kur.",
          "KÃ¼Ã§Ã¼k Ã§aplÄ± soygunlara lojistik destek saÄŸla."
        ]
      },
      { 
        title: "Zor GÃ¶revler", locked: true,
        tasks: [
          "Orta Ã¶lÃ§ekli uyuÅŸturucu aÄŸÄ±nda distribÃ¼tÃ¶rlÃ¼ÄŸÃ¼ ele al.",
          "Rakip baronun iÅŸ anlaÅŸmasÄ±na sÄ±zÄ±p bilgileri Ã§al.",
          "Polis ve siyasi baÄŸlantÄ±larÄ± gÃ¼Ã§lendir.",
          "BÃ¼yÃ¼k kazanÃ§ saÄŸlayacak silah sevkiyatÄ± organize et.",
          "Gece kulÃ¼plerinde yatÄ±rÄ±mÄ±n tekeli olsun.",
          "Rakip Ã§etenin liderini korkutarak saflarÄ±na katÄ±l.",
          "Beyaz yakalÄ± iÅŸ Ã§evresinde kara para aklamayÄ± geniÅŸlet.",
          "Orta dÃ¼zey siyasetÃ§ilere fon saÄŸlayarak nÃ¼fuzunu arttÄ±r.",
          "Rakip Ã§eteyi iÃ§ten bÃ¶lerek zayÄ±flat.",
          "BÃ¼yÃ¼k Ã§aplÄ± yasadÄ±ÅŸÄ± bahis zincirini yÃ¶net."
        ]
      },
      { 
        title: "Ä°leri GÃ¶revler", locked: true,
        tasks: [
          "UluslararasÄ± uyuÅŸturucu hattÄ±na doÄŸrudan giriÅŸ yap.",
          "Ãœst dÃ¼zey bÃ¼rokratlarla gizli anlaÅŸmalar yap.",
          "Rakip baronlarla barÄ±ÅŸ konferansÄ± dÃ¼zenleyip ittifak kur.",
          "Yurt dÄ±ÅŸÄ± kara para aklama ofisleri aÃ§.",
          "GÃ¼venlik birimlerinde kilit isimleri satÄ±n al.",
          "Åehrin limanlarÄ±nda kontrol saÄŸla.",
          "GÃ¶steriÅŸli hayÄ±r iÅŸleriyle meÅŸrulaÅŸ.",
          "Kumarhane zinciri kurarak yasadÄ±ÅŸÄ± gelirleri yasallaÅŸtÄ±r.",
          "UluslararasÄ± silah kaÃ§akÃ§Ä±lÄ±ÄŸÄ± operasyonlarÄ±nÄ± yÃ¶net.",
          "Yurt dÄ±ÅŸÄ± siyasi baÄŸlantÄ±larla nÃ¼fuzunu arttÄ±r."
        ]
      },
      { 
        title: "Son GÃ¶revler", locked: true,
        tasks: [
          "Kumarhane zinciri ve malikÃ¢ne sahibi ol.",
          "UluslararasÄ± mafya aÄŸÄ±nÄ±n temsilcisini Ã¼stlen.",
          "Siyasete dolaylÄ± girip seÃ§imleri fonla.",
          "YeraltÄ± 'Baronlar Konseyi' kur.",
          "Devlet kurumlarÄ±na adam yerleÅŸtir.",
          "Yurt dÄ±ÅŸÄ± yatÄ±rÄ±mlarÄ± yÃ¶net.",
          "Rakip baronlara operasyon yap.",
          "Finans ve medya gÃ¼cÃ¼nÃ¼ ele geÃ§irerek kamuoyu oluÅŸtur.",
          "UluslararasÄ± kaÃ§akÃ§Ä±lÄ±k aÄŸÄ±nÄ±n liderliÄŸini devral.",
          "ğŸ–ï¸ Tebrikler, Baron oldunuz! Ana menÃ¼ye dÃ¶nÃ¼yorsunuz."
        ]
      }
    ];
     
    const rankData = {
      "Vakur": vakurDifficulties,
      "Hatip": hatipDifficulties,
      "Baron": baronDifficulties
    };
     
    /****************** SLÄ°DER DEÄÄ°ÅKENLERÄ° ******************/
    let currentSliderPage = 0;
    let sliderTotalPages = 0;
     
    window.onload = function() {
      updateMoneyUI();
      updateProfileInfo();
      updateStatBars();
      updateBadgesUI();
      displayKoyIncelemePage(1);
      displayTrenPage(1);
    };
     
    /****************** SATIN ALMA ONAYI ******************/
    function buyItem(itemName, cost) {
      if (confirm(itemName + " satÄ±n almak istiyor musunuz? (" + cost + "$)")) {
        if(money < cost) {
          alert("Yetersiz bakiye!");
          return;
        }
        money -= cost;
        updateMoneyUI();
        alert(itemName + " satÄ±n alÄ±ndÄ±! (-" + cost + "$)");
      } else {
        return;
      }
    }
     
    /****************** DURUMUM & TÃœCCAR AÃ‡/KAPA ******************/
    function toggleDurumum(){
      const elem = document.getElementById("durumumContent");
      elem.classList.toggle("active");
    }
    function toggleTuccar(){
      const elem = document.getElementById("tuccarContent");
      elem.classList.toggle("active");
    }
     
    /****************** KÃ–Y INCELEME ******************/
    let currentIncelemePage = 1;
    function displayKoyIncelemePage(page) {
      currentIncelemePage = page;
      const pageSize = pageSizes[page-1];
      let start = 0; for(let i=0; i<page-1; i++){ start += pageSizes[i]; }
      let end = start + pageSize;
       
      const ul = document.getElementById("koyIncelemeList");
      ul.innerHTML = "";
      for(let i = start; i < end; i++){
        if(i >= villageData.length) break;
        const v = villageData[i];
        let li = document.createElement("li");
        li.innerHTML = "<span>" + v.name + " (6 At)</span><button type='button' onclick=\"inceleKoy('" + v.name + "')\">Ä°ncele</button>";
        ul.appendChild(li);
      }
      renderKoyIncelemePagination();
    }
    function renderKoyIncelemePagination() {
      const pag = document.getElementById("koyIncelemePagination");
      pag.innerHTML = "";
      for(let p = 1; p <= totalPages; p++){
        let sp = document.createElement("span");
        sp.innerText = p;
        if(p === currentIncelemePage) sp.classList.add("active");
        sp.onclick = () => displayKoyIncelemePage(p);
        pag.appendChild(sp);
      }
    }
    function inceleKoy(koyName) {
      let found = villageData.find(v => v.name === koyName);
      if(!found) return;
      alert(
        "KÃ¶y: " + koyName + "\n" +
        "Malikane: " + found.malikane + "\n" +
        "SÄ±ÄŸÄ±nak: " + found.siginak + "\n" +
        "Villa: " + found.villa
      );
    }
     
    /****************** TREN SEYEHAT ONAYI ******************/
    function travelToTrain(village){
      if(currentVillage === village) return;
      if(money < 500){
        alert("Tren bileti iÃ§in yeterli paranÄ±z yok!");
        return;
      }
      if(!confirm(village + " kÃ¶yÃ¼ne gitmek istiyor musunuz? (500$)")){
        return;
      }
      money -= 500;
      updateMoneyUI();
      currentVillage = village;
      updateProfileInfo();
      alert("Trenle " + village + " kÃ¶yÃ¼ne geldiniz!");
    }
    function displayTrenPage(page) {
      currentTrenPage = page;
      const trenPageSize = 5;
      const start = (page - 1) * trenPageSize;
      const end = start + trenPageSize;
      const trenList = document.getElementById("trenList");
      trenList.innerHTML = "";
      villageData.slice(start, end).forEach(v => {
        const li = document.createElement("li");
        li.innerHTML = `<span>${v.name}</span> <button type="button" onclick="travelToTrain('${v.name}')">Git</button>`;
        trenList.appendChild(li);
      });
      renderTrenPagination(Math.ceil(villageData.length / trenPageSize), page);
    }
    function renderTrenPagination(totalTrenPages, currentPage) {
      const pag = document.getElementById("trenPagination");
      pag.innerHTML = "";
      for(let p = 1; p <= totalTrenPages; p++){
        let sp = document.createElement("span");
        sp.innerText = p;
        if(p === currentPage) sp.classList.add("active");
        sp.onclick = () => displayTrenPage(p);
        pag.appendChild(sp);
      }
    }
     
    /****************** PARA & KÃ–Y ADI ******************/
    function updateMoneyUI(){
      document.getElementById("money").innerText = money;
    }
    function updateProfileInfo(){
      document.getElementById("currentVillageDisplay").innerText = currentVillage;
      document.getElementById("bottomLeft").innerText = currentVillage;
    }
     
    /****************** STAT BARS ******************/
    function getVakurKoruma(){
      let koruma = Math.floor(vakurTaskCount / 22);
      return (koruma % 661 === 0 && koruma > 0) ? 660 : koruma % 661;
    }
    function getHatipNufus(){
      let nufus = Math.floor(hatipTaskCount / 40) * 5;
      return (nufus % 201 === 0 && nufus > 0) ? 200 : nufus % 201;
    }
    function getBaronEtki(){
      let etki = Math.floor(baronTaskCount * 2);
      return (etki % 501 === 0 && etki > 0) ? 500 : etki % 501;
    }
    function updateStatBars(){
      // Vakur
      let vakVal = getVakurKoruma();
      let vakPct = Math.floor((vakVal / 660) * 100);
      document.getElementById("vakurText").innerText = "Koruma: " + vakVal + " (" + vakPct + "%)";
      document.getElementById("vakurFill").style.width = vakPct + "%";
       
      // Hatip
      if(isHatipUnlocked){
        document.getElementById("hatipStat").classList.remove("lockedStat");
        let hatVal = getHatipNufus();
        let hatPct = Math.floor((hatVal / 200) * 100);
        document.getElementById("hatipText").innerText = "NÃ¼fus: " + hatVal + " (" + hatPct + "%)";
        document.getElementById("hatipFill").style.width = hatPct + "%";
      } else {
        document.getElementById("hatipStat").classList.add("lockedStat");
      }
       
      // Baron
      if(isBaronUnlocked){
        document.getElementById("baronStat").classList.remove("lockedStat");
        let barVal = getBaronEtki();
        let barPct = Math.floor((barVal / 500) * 100);
        document.getElementById("baronText").innerText = "Etki: " + barVal + " (" + barPct + "%)";
        document.getElementById("baronFill").style.width = barPct + "%";
      } else {
        document.getElementById("baronStat").classList.add("lockedStat");
      }
    }
     
    /****************** ROZET GÃ–STERGESÄ° ******************/
    function updateBadgesUI(){
      document.getElementById("blueBadgeCount").innerText = blueBadgeCount;
      document.getElementById("orangeBadgeCount").innerText = orangeBadgeCount;
      document.getElementById("redBadgeCount").innerText = redBadgeCount;
      document.getElementById("vakurBadgeCount").innerText = blueBadgeCount;
      document.getElementById("hatipBadgeCount").innerText = orangeBadgeCount;
      document.getElementById("baronBadgeCount").innerText = redBadgeCount;
    }
     
    /****************** GÃ–REV SAYFASI â€“ SLÄ°DER ******************/
    function openGorevPage(rank){
      // Kilit kontrolÃ¼ (Hatip veya Baron kilitliyse)
      if((rank === "Hatip" && !isHatipUnlocked) || (rank === "Baron" && !isBaronUnlocked))
        return;
      
      currentRank = rank;
      document.getElementById("mainPage").style.display = "none";
      document.getElementById("gorevPage").style.display = "block";
      document.getElementById("gorevHeader").innerText = rank + " GÃ¶revleri";
      
      loadRankTasks(rank);
    }
    function closeGorevPage(){
      document.getElementById("gorevPage").style.display = "none";
      document.getElementById("mainPage").style.display = "block";
    }
     
    // GÃ¶revleri slider ÅŸeklinde yÃ¼kle
    function loadRankTasks(rank){
      let container = document.getElementById("tasksContainer");
      container.innerHTML = "";
      let sliderContainer = document.createElement("div");
      sliderContainer.id = "sliderContainer";
      sliderContainer.style.display = "flex";
      sliderContainer.style.transition = "transform 0.3s ease";
      
      let diffs = rankData[rank];
      sliderTotalPages = diffs.length;
      
      diffs.forEach((diffObj, diffIndex) => {
        let section = document.createElement("div");
        section.className = "rankSection";
        section.style.minWidth = "100%";
        if(diffObj.locked) section.classList.add("lockedDifficulty");
         
        let h2 = document.createElement("h2");
        h2.innerText = diffObj.title;
        section.appendChild(h2);
         
        diffObj.tasks.forEach((task, taskIndex) => {
          let divT = document.createElement("div");
          divT.className = "taskItem";
          if(task.done) divT.classList.add("completedTask");
          if(task.hidden === true) divT.style.display = "none";
          divT.innerHTML = "<span>" + task + "</span><button type='button' onclick=\"completeTask('" + rank + "', " + diffIndex + ", " + taskIndex + ")\">Tamamla</button>";
          section.appendChild(divT);
        });
         
        let pBar = document.createElement("div");
        pBar.className = "difficultyProgressBar";
        let pFill = document.createElement("div");
        pFill.className = "difficultyProgressFill";
        pBar.appendChild(pFill);
        section.appendChild(pBar);
         
        let pText = document.createElement("div");
        pText.className = "progressText";
        section.appendChild(pText);
         
        sliderContainer.appendChild(section);
        updateDifficultyProgress(rank, diffIndex);
      });
      
      let sliderWrapper = document.createElement("div");
      sliderWrapper.id = "taskSliderWrapper";
      sliderWrapper.style.position = "relative";
      sliderWrapper.style.overflow = "hidden";
      
      let prevArrow = document.createElement("div");
      prevArrow.id = "sliderPrev";
      prevArrow.innerHTML = "&#9664;";
      prevArrow.style.position = "absolute";
      prevArrow.style.left = "0";
      prevArrow.style.top = "50%";
      prevArrow.style.transform = "translateY(-50%)";
      prevArrow.style.fontSize = "3rem";
      prevArrow.style.color = "white";
      prevArrow.style.cursor = "pointer";
      prevArrow.style.zIndex = "10";
      prevArrow.style.userSelect = "none";
      
      let nextArrow = document.createElement("div");
      nextArrow.id = "sliderNext";
      nextArrow.innerHTML = "&#9654;";
      nextArrow.style.position = "absolute";
      nextArrow.style.right = "0";
      nextArrow.style.top = "50%";
      nextArrow.style.transform = "translateY(-50%)";
      nextArrow.style.fontSize = "3rem";
      nextArrow.style.color = "white";
      nextArrow.style.cursor = "pointer";
      nextArrow.style.zIndex = "10";
      nextArrow.style.userSelect = "none";
      
      sliderWrapper.appendChild(prevArrow);
      sliderWrapper.appendChild(nextArrow);
      sliderWrapper.appendChild(sliderContainer);
      container.appendChild(sliderWrapper);
      
      currentSliderPage = 0;
      prevArrow.onclick = () => slidePrev();
      nextArrow.onclick = () => slideNext();
      updateSlider();
    }
     
    function slidePrev(){
      if(currentSliderPage > 0){
        currentSliderPage--;
        updateSlider();
      }
    }
    function slideNext(){
      if(currentSliderPage < sliderTotalPages - 1){
        currentSliderPage++;
        updateSlider();
      }
    }
    function updateSlider(){
      let sliderContainer = document.getElementById("sliderContainer");
      sliderContainer.style.transform = "translateX(" + (-100 * currentSliderPage) + "%)";
      let prevArrow = document.getElementById("sliderPrev");
      let nextArrow = document.getElementById("sliderNext");
      if(currentSliderPage === 0) {
        prevArrow.style.display = "none";
      } else {
        prevArrow.style.display = "block";
      }
      if(currentSliderPage === sliderTotalPages - 1) {
        nextArrow.style.display = "none";
      } else {
        nextArrow.style.display = "block";
      }
    }
     
    function completeTask(rank, diffIndex, taskIndex){
      let diffs = rankData[rank];
      let diffObj = diffs[diffIndex];
      if(diffObj.locked){
        alert("Bu gÃ¶rev bÃ¶lÃ¼mÃ¼ kilitli!");
        return;
      }
      let tasks = diffObj.tasks;
      if(typeof tasks[taskIndex] === "object") {
        // EÄŸer obje ise, t.text vs. ÅŸeklinde
        if(tasks[taskIndex].done){
          alert("Zaten tamamladÄ±nÄ±z!");
          return;
        }
        tasks[taskIndex].done = true;
      } else {
        // Tek string olarak tanÄ±mlandÄ±ysa
        // Basit Ã¶rnek: tamamlandÄ± olarak iÅŸaretle, burada count arttÄ±rma vs. yapÄ±labilir.
      }
       
      if(rank === "Vakur"){
        vakurTaskCount++;
        // Ã–rnek Ã¶dÃ¼l kontrolÃ¼:
        if(vakurTaskCount % 50 === 0) {
          blueBadgeCount++;
          alert("Vakur: 50 gÃ¶rev tamamladÄ±nÄ±z! +1 Rozet");
        }
      } else if(rank === "Hatip"){
        hatipTaskCount++;
        if(hatipTaskCount % 50 === 0) {
          orangeBadgeCount++;
          alert("Hatip: 50 gÃ¶rev tamamladÄ±nÄ±z! +5 NÃ¼fus, +1 Rozet");
        }
      } else if(rank === "Baron"){
        baronTaskCount++;
      }
      updateStatBars();
      updateBadgesUI();
       
      // Basit kontrole gÃ¶re tÃ¼m gÃ¶revler tamamlandÄ±ysa:
      let allDone = diffObj.tasks.every(t => (typeof t === "object" ? t.done === true : false));
      if(allDone){
        if(diffIndex < diffs.length - 1){
          diffs[diffIndex+1].locked = false;
          alert(diffObj.title + " bitti! '" + diffs[diffIndex+1].title + "' aÃ§Ä±ldÄ±.");
        } else {
          alert(rank + " rankÄ±ndaki tÃ¼m gÃ¶revleri tamamladÄ±nÄ±z!");
          closeGorevPage();
          if(rank === "Vakur" && !isHatipUnlocked){
            isHatipUnlocked = true;
            document.getElementById("cardHatip").classList.remove("locked");
            alert("Tebrikler! Hatip kilidi aÃ§Ä±ldÄ±, ana menÃ¼ye dÃ¶nÃ¼yorsunuz.");
          } else if(rank === "Hatip" && !isBaronUnlocked){
            isBaronUnlocked = true;
            document.getElementById("cardBaron").classList.remove("locked");
            alert("Tebrikler! Baron kilidi aÃ§Ä±ldÄ±, ana menÃ¼ye dÃ¶nÃ¼yorsunuz.");
          }
        }
      }
      loadRankTasks(rank);
    }
     
    function updateDifficultyProgress(rank, diffIndex){
      let diffs = rankData[rank];
      let diffObj = diffs[diffIndex];
      let doneCount = diffObj.tasks.filter(t => (typeof t === "object" && t.done)).length;
      let totalCount = diffObj.tasks.length;
      let percent = Math.floor((doneCount / totalCount) * 100);
       
      let sections = document.getElementById("sliderContainer").getElementsByClassName("rankSection");
      if(!sections[diffIndex]) return;
      let fill = sections[diffIndex].getElementsByClassName("difficultyProgressFill")[0];
      let txt = sections[diffIndex].getElementsByClassName("progressText")[0];
      fill.style.width = percent + "%";
      txt.innerText = doneCount + " / " + totalCount + " (" + percent + "%)";
    }
  </script>
</body>
</html>
