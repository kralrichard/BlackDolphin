<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Black Dolphine ‚Äì Mafia Oyunu</title>
  <style>
    :root {
      --bg-dark: #121212;
      --bg-light: #f4f4f4;
      --panel-dark: #1e1e1e;
      --blue: #457b9d;
      --orange: #f4a261;
      --red: #e63946;
      --text-light: #f4f4f4;
      --text-dark: #333;
    }
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif;}
    html,body{height:100%;}
    body{display:flex;flex-direction:column;background:var(--bg-light);color:var(--text-dark);overflow:hidden;}
    header{background:var(--bg-dark);color:var(--text-light);padding:.5rem 1rem;display:flex;justify-content:space-between;align-items:center;}
    .logo{font-size:1.4rem;font-weight:bold;}
    .balance{background:#222;padding:.5rem 1rem;border-radius:4px;color:lime;}
    main{flex:1;overflow:auto;}
    /* Rails */
    .rail-container{position:relative;height:60px;margin:1rem 0;}
    canvas.rail{width:100%;height:100%;}
    .rail-label{position:absolute;top:10px;left:20px;color:var(--text-dark);font-weight:bold;}
    .rail-label.return{top:auto;bottom:10px;}
    /* CenterRanks */
    #centerRanks{display:flex;justify-content:center;gap:2rem;padding:1rem;}
    .card{padding:1rem;border-radius:8px;text-align:center;color:var(--text-light);width:120px;cursor:pointer;}
    .card.vakur{background:var(--blue);} 
    .card.hatip{background:var(--orange);} 
    .card.baron{background:var(--red);} 
    .card.locked{opacity:.5;pointer-events:none;}
    .card h2{margin-bottom:.5rem;text-transform:uppercase;}
    .card button{background:#fff;color:#000;border:none;padding:.5rem 1rem;border-radius:4px;}
    /* Sidebar */
    nav{width:220px;background:var(--panel-dark);color:var(--text-light);flex-shrink:0;display:flex;flex-direction:column;}
    nav ul{list-style:none;overflow:auto;flex:1;}
    nav li a{display:block;padding:12px 20px;color:inherit;text-decoration:none;border-bottom:1px solid #333;}
    nav li a.vakur-link.active,nav li a.vakur-link:hover{background:var(--blue);}
    nav li a.hatip-link.active,nav li a.hatip-link:hover{background:var(--orange);}
    nav li a.baron-link.active,nav li a.baron-link:hover{background:var(--red);}
    nav .search{padding:10px;}
    nav .search input{width:100%;padding:8px;border:none;border-radius:4px;}
    /* Panels */
    aside{width:260px;background:var(--panel-dark);color:var(--text-light);overflow:auto;flex-shrink:0;}
    .panel{padding:20px;border-bottom:1px solid #333;display:none;}
    .panel.active{display:block;}
    .panel h3{margin-bottom:10px;color:var(--blue);}
    /* Durumum: 6 bar */
    .status-bar{margin-bottom:1rem;}
    .status-bar h4{margin-bottom:.3rem;}
    .bar{width:100%;height:12px;background:#ccc;border-radius:6px;overflow:hidden;margin-bottom:.3rem;}
    .bar .fill{height:100%;width:0;background:var(--blue);}
    .bar.orange .fill{background:var(--orange);}
    .bar.red .fill{background:var(--red);}
    /* Overlay */
    #overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center;}
    #panel{background:var(--bg-light);width:90%;max-width:600px;max-height:80%;overflow:auto;border-radius:8px;padding:1rem;position:relative;}
    #closeBtn{position:absolute;top:.5rem;right:.5rem;background:#000;color:#fff;border:none;padding:.3rem .6rem;border-radius:4px;cursor:pointer;}
    .rankSection{margin-bottom:1rem;}
    .rankSection h3{color:var(--blue);margin-bottom:.5rem;}
    .taskItem{background:#ddd;padding:.5rem;display:flex;justify-content:space-between;border-radius:4px;margin-bottom:.3rem;}
    .taskItem.done{background:#a8e6cf;}
    .taskItem button{background:var(--blue);border:none;color:#fff;padding:.3rem .6rem;border-radius:4px;}
    /* Mobile */
    @media(max-width:768px){
      body{flex-direction:column;}
      nav,aside{width:100%;order:2;}
      main{order:1;}
      header{justify-content:center;}
      .balance{display:none;}
      .rail-container{display:none;}
      #centerRanks{flex-wrap:wrap;gap:1rem;}
      .panel{padding:10px;}
    }
  </style>
</head>
<body>

  <nav>
    <ul>
      <li><a href="#" onclick="togglePanel('durum')" class="active">Durumum</a></li>
      <li><a href="#" class="vakur-link" onclick="openTasks('Vakur')">Vakur G√∂revleri</a></li>
      <li><a href="#" class="hatip-link" onclick="openTasks('Hatip')">Hatip G√∂revleri</a></li>
      <li><a href="#" class="baron-link" onclick="openTasks('Baron')">Baron G√∂revleri</a></li>
      <!-- diƒüer sekmeler -->
    </ul>
    <div class="search"><input type="text" placeholder="Kullanƒ±cƒ± ara..."></div>
  </nav>

  <main>
    <header>
      <div class="logo">BLACK DOLPHINE</div>
      <div class="balance">$500¬†000</div>
    </header>

    <div class="rail-container">
      <div class="rail-label">Gidi≈ü Rotasƒ±</div>
      <canvas id="railOut" class="rail"></canvas>
    </div>

    <div id="centerRanks">
      <div class="card vakur" id="cardVakur"><h2>VAKUR</h2><button onclick="openTasks('Vakur')">Ser√ºven</button></div>
      <div class="card hatip locked" id="cardHatip"><h2>HATƒ∞P</h2><button onclick="openTasks('Hatip')">Ser√ºven</button></div>
      <div class="card baron locked" id="cardBaron"><h2>BARON</h2><button onclick="openTasks('Baron')">Ser√ºven</button></div>
    </div>

    <div class="rail-container">
      <div class="rail-label return">D√∂n√º≈ü Rotasƒ±</div>
      <canvas id="railBack" class="rail"></canvas>
    </div>
  </main>

  <aside>
    <div class="panel active" id="durumPanel">
      <h3>Durumum</h3>
      <!-- Vakur Savunma Metriƒüi -->
      <div class="status-bar">
        <h4>üî∞ Savunma</h4>
        <div class="bar"><div id="barSavunma" class="fill"></div></div>
      </div>
      <!-- Vakur Savunma Rozet -->
      <div class="status-bar">
        <h4>üî∞ Sav. Rozet</h4>
        <div class="bar"><div id="barSavRozet" class="fill"></div></div>
      </div>
      <!-- Hatip N√ºfus Metriƒüi -->
      <div class="status-bar">
        <h4>üë• N√ºfus</h4>
        <div class="bar orange"><div id="barNufus" class="fill"></div></div>
      </div>
      <!-- Hatip N√ºfus Rozet -->
      <div class="status-bar">
        <h4>üë• N√ºf. Rozet</h4>
        <div class="bar orange"><div id="barNufRozet" class="fill"></div></div>
      </div>
      <!-- Baron Etki Metriƒüi -->
      <div class="status-bar">
        <h4>üè∞ Etki</h4>
        <div class="bar red"><div id="barEtki" class="fill"></div></div>
      </div>
      <!-- Baron Etki Rozet -->
      <div class="status-bar">
        <h4>üè∞ Etki Rozet</h4>
        <div class="bar red"><div id="barEtRozet" class="fill"></div></div>
      </div>
    </div>
    <!-- ... diƒüer paneller ... -->
  </aside>

  <!-- G√∂rev Modal -->
  <div id="overlay" onclick="closeTasks()">
    <div id="panel" onclick="event.stopPropagation()">
      <button id="closeBtn" onclick="closeTasks()">Kapat ‚úñ</button>
      <h1 id="taskHeader"></h1>
      <div id="taskSections"></div>
    </div>
  </div>

  <script>
    // g√∂rev tanƒ±mlarƒ±: her r√ºtbede 5 kademe √ó10 g√∂rev =50 g√∂rev
    const tasks = {
      Vakur: [
        { title:'√áIRAK VAKUR I', tasks:[/*‚Ä¶10 g√∂rev‚Ä¶*/] },
        { title:'USTA VAKUR II',  tasks:[/*‚Ä¶10 g√∂rev‚Ä¶*/] },
        { title:'UZMAN VAKUR III',tasks:[/*‚Ä¶10 g√∂rev‚Ä¶*/] },
        { title:'EFSANE VAKUR IV',tasks:[/*‚Ä¶10 g√∂rev‚Ä¶*/] },
        { title:'Y√úCE VAKUR V',   tasks:[/*‚Ä¶10 g√∂rev‚Ä¶*/] }
      ],
      Hatip: [
        { title:'√áIRAK HATƒ∞P I', tasks:[/*‚Ä¶10 g√∂rev‚Ä¶*/] },
        { title:'USTA HATƒ∞P II',  tasks:[/*‚Ä¶10 g√∂rev‚Ä¶*/] },
        { title:'UZMAN HATƒ∞P III',tasks:[/*‚Ä¶10 g√∂rev‚Ä¶*/] },
        { title:'EFSANE HATƒ∞P IV',tasks:[/*‚Ä¶10 g√∂rev‚Ä¶*/] },
        { title:'Y√úCE HATƒ∞P V',   tasks:[/*‚Ä¶10 g√∂rev‚Ä¶*/] }
      ],
      Baron: [
        { title:'√áIRAK BARON I', tasks:[/*‚Ä¶10 g√∂rev‚Ä¶*/] },
        { title:'USTA BARON II',  tasks:[/*‚Ä¶10 g√∂rev‚Ä¶*/] },
        { title:'UZMAN BARON III',tasks:[/*‚Ä¶10 g√∂rev‚Ä¶*/] },
        { title:'EFSANE BARON IV',tasks:[/*‚Ä¶10 g√∂rev‚Ä¶*/] },
        { title:'Y√úCE BARON V',   tasks:[/*‚Ä¶10 g√∂rev‚Ä¶*/] }
      ]
    };

    // tamamlanan g√∂rev sayƒ±larƒ± localStorage'ta sakla
    let done = JSON.parse(localStorage.getItem('done'))||{Vakur:0,Hatip:0,Baron:0};
    const perRozet = 50, maxRozet = 4;

    // durum √ßubuklarƒ±nƒ± g√ºncelle
    function updateBars(){
      ['Savunma','Nufus','Etki'].forEach((m,i)=>{
        const rank = i===0?'Vakur': i===1?'Hatip':'Baron';
        const d = done[rank];
        const pct = Math.min(100, d/(perRozet*maxRozet)*100);
        // metric bar
        document.getElementById('bar'+m).style.width = pct+'%';
        // rozet bar
        const roz = Math.min(maxRozet, Math.floor(d/perRozet));
        const pctRoz = roz/maxRozet*100;
        document.getElementById('bar'+m+'Rozet').style.width = pctRoz+'%';
      });
    }

    // g√∂rev modal akƒ±≈üƒ±
    let unlocked = {Vakur:true,Hatip:false,Baron:false};
    function openTasks(rank){
      if(!unlocked[rank]) return alert(rank+' kilitli!');
      const secEl = document.getElementById('taskSections');
      document.getElementById('taskHeader').innerText = rank+' G√∂revleri';
      secEl.innerHTML='';
      tasks[rank].forEach((sec,idx)=>{
        // bir sonraki kademe i√ßin √∂nceki 10 g√∂rev tamamlanmalƒ±
        if(idx>0 && done[rank]<idx*10) return;
        const div = document.createElement('div'); div.className='rankSection';
        const h3 = document.createElement('h3'); h3.innerText = sec.title;
        div.appendChild(h3);
        sec.tasks.forEach(txt=>{
          const ti = document.createElement('div'); ti.className='taskItem';
          const sp = document.createElement('span'); sp.innerText = txt;
          const btn = document.createElement('button'); btn.innerText='‚úî';
          btn.onclick = ()=>{
            done[rank]++; localStorage.setItem('done',JSON.stringify(done));
            updateBars();
            // Y√ºce tamamlandƒ±ysa modal kapanƒ±p √áƒ±rak‚Äôa d√∂n
            if(idx===4 && done[rank]>=50){
              closeTasks();
              done[rank]=0; localStorage.setItem('done',JSON.stringify(done));
              updateBars();
              unlocked[rank]=false; // yeniden √áƒ±rak‚Äôa kilitli
            }
          };
          ti.appendChild(sp); ti.appendChild(btn);
          div.appendChild(ti);
        });
        secEl.appendChild(div);
      });
      document.getElementById('overlay').style.display='flex';
    }
    function closeTasks(){ document.getElementById('overlay').style.display='none'; }

    // ray √ßizi≈üi, sidebar toggle vb.
    const villages=[/*‚Ä¶*/];
    function drawRail(id,p,a){/*‚Ä¶*/}
    window.onload=()=>{
      drawRail('railOut','#555','#e63946');
      drawRail('railBack','#555','#a8dadc');
      updateBars();
    };
    window.onresize=()=>{ drawRail('railOut','#555','#e63946'); drawRail('railBack','#555','#a8dadc'); };
    function togglePanel(id){
      document.querySelectorAll('nav li a').forEach(a=>a.classList.remove('active'));
      document.querySelectorAll('aside .panel').forEach(p=>p.classList.remove('active'));
      event.target.classList.add('active');
      document.getElementById(id+'Panel').classList.add('active');
    }
  </script>
</body>
</html>
