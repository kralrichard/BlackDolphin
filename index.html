<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Black Dolphine - Mafia Oyunu</title>
  <style>
    /* Genel Sƒ±fƒ±rlama ve Yazƒ± Stilleri */
    * {
      margin: 0; padding: 0; box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    body {
      background: #888; color: #f1f1f1; min-height: 100vh;
      position: relative; padding-top: 120px; /* Header i√ßin bo≈üluk */
      font-size: 0.9rem;
    }
    /* HEADER */
    header {
      background: rgba(0,0,0,0.85);
      display: flex; align-items: center; justify-content: space-between;
      padding: 1rem 2rem; position: fixed; top: 0; left: 0;
      width: 100%; z-index: 999;
      box-shadow: 0 2px 5px rgba(0,0,0,0.5);
    }
    .logo {
      font-size: 2rem; font-weight: bold; text-transform: uppercase;
      color: #fff; text-shadow: 1px 1px 0 #000, 2px 2px 0 #fff, 3px 3px 5px rgba(0,0,0,0.5);
      display: flex; align-items: center;
    }
    .logo-dolphin { margin-left: 10px; width: 50px; height: auto; }
    .logo-dolphin svg {
      width: 100%; height: auto; fill: #00cc66; stroke: #fff; stroke-width: 2;
    }
    .money {
      font-size: 1rem; background: #222; padding: 0.5rem 1rem;
      border-radius: 5px; border: 1px solid #333;
    }
    .money span {
      color: #ffcc00; margin-left: 5px; font-weight: bold;
    }

    /* SOL PANEL: Durumum (Collapsible) */
    #durumumContainer {
      position: fixed; top: 50%; left: 20px;
      transform: translateY(-50%);
      width: 280px; z-index: 1000;
      background: rgba(0,0,0,0.6);
      padding: 1rem; border-radius: 10px;
    }
    #durumumContainer h2 {
      text-align: center; margin-bottom: 1rem;
      color: #ffcc00; font-size: 1.3rem; cursor: pointer;
    }
    .tab-content {
      display: none; padding: 0.5rem; background: rgba(0,0,0,0.4);
      border-radius: 5px; margin-top: 0.5rem;
    }
    .tab-content.active { display: block; }
    /* Stat Barlarƒ± */
    .stat-bar {
      margin-bottom: 0.7rem; background: #444; border-radius: 5px;
      overflow: hidden; padding: 5px;
    }
    .stat-label { margin-bottom: 3px; font-weight: bold; font-size: 0.85rem; }
    .stat-fill {
      height: 18px; background: #00bfff; width: 0%;
      transition: width 1s ease;
    }
    .stat-text { margin-top: 3px; font-size: 0.8rem; }
    .lockedStat { opacity: 0.4; }
    .badge-indicator {
      text-align: center; font-size: 0.8rem; margin-top: 3px;
      color: #ffcc00;
    }
    #profileInfo {
      margin-top: 1rem; font-size: 0.9rem; font-weight: bold; text-align: center;
    }

    /* SAƒû PANEL: K√∂y ƒ∞ncelemesi & Trenle Seyehat */
    #rightContainer {
      position: fixed; right: 20px; top: 140px; width: 280px; z-index: 1000;
    }
    #koyIncelemeBox, #trenSeyahatBox {
      background: rgba(0,0,0,0.7);
      padding: 1rem; border-radius: 10px;
      margin-bottom: 1rem;
    }
    #koyIncelemeBox h3, #trenSeyahatBox h3 {
      text-align: center; color: #ffcc00; margin-bottom: 0.5rem; font-size: 1rem;
    }
    #koyIncelemeBox ul, #trenSeyahatBox ul {
      list-style: none; padding: 0; margin: 0; font-size: 0.85rem;
    }
    #koyIncelemeBox li, #trenSeyahatBox li {
      margin-bottom: 0.3rem; display: flex; justify-content: space-between; align-items: center;
    }
    #koyIncelemeBox li button, #trenSeyahatBox li button {
      padding: 0.3rem 0.5rem; font-size: 0.8rem; cursor: pointer;
    }
    /* Sayfalama */
    #koyIncelemePagination, #trenPagination {
      text-align: center; margin-top: 0.5rem;
    }
    #koyIncelemePagination span, #trenPagination span {
      display: inline-block; padding: 0.3rem 0.6rem; margin: 0 0.2rem;
      background: #444; border-radius: 3px; cursor: pointer; color: #ffcc00;
    }
    #koyIncelemePagination span.active, #trenPagination span.active {
      background: #555;
    }

    /* ORTA PANEL: Rank Kartlarƒ± ‚Äì Yatay Hizalƒ± */
    #centerRanks {
      position: absolute; top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      display: flex; gap: 20px; z-index: 900;
    }
    .card {
      background: rgba(255,255,255,0.05); backdrop-filter: blur(4px);
      border: 1px solid rgba(255,255,255,0.1); border-radius: 10px;
      width: 250px; padding: 1.5rem; text-align: center;
      transition: transform 0.3s ease; box-shadow: 0 2px 5px rgba(0,0,0,0.3);
      cursor: pointer;
    }
    .card:hover { transform: translateY(-5px); }
    .card h2 { margin-bottom: 1rem; color: #ffcc00; }
    .card p { margin-bottom: 1rem; }
    .card button {
      padding: 0.6rem 1.2rem; background: #ff4444; border: none; border-radius: 5px;
      color: #fff; cursor: pointer; transition: background 0.3s;
    }
    .card button:hover { background: #ff2222; }
    .locked {
      opacity: 0.4; pointer-events: none; position: relative;
    }
    .locked::after {
      content: "Kƒ∞Lƒ∞TLƒ∞"; position: absolute; top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0,0,0,0.8); padding: 0.5rem 1rem; border-radius: 5px;
      font-weight: bold; color: #ff4444;
    }
    .badge-container {
      margin-top: 10px; font-size: 1.2rem; color: #ffcc00;
    }

    /* SOL ALT: Sabit K√∂y Bilgisi */
    #bottomLeft {
      position: fixed; bottom: 20px; left: 20px; font-size: 1.2rem;
      background: #0288d1; padding: 0.5rem 1rem; border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.3);
      z-index: 1000;
    }

    /* G√ñREV VE ROZETƒ∞ SAYFASI (Overlay) */
    #gorevPage {
      display: none; position: fixed; top: 0; left: 0;
      width: 100%; height: 100%; background: #000; color: #fff; z-index: 3000;
      padding: 2rem; overflow-y: auto;
    }
    #gorevPage h1 {
      text-align: center; margin-bottom: 1rem;
    }

    /* G√∂rev Listesi B√∂l√ºmleri */
    .rankSection {
      max-width: 600px; margin: 0 auto 2rem auto;
      border: 1px solid #888; padding: 1rem; border-radius: 10px;
      background: rgba(255,255,255,0.07);
    }
    .rankSection h2 {
      text-align: center; margin-bottom: 0.5rem; color: #ffcc00;
    }
    /* Zorluk Ba≈ülƒ±klarƒ± */
    .difficultyTitle {
      margin-top: 0.5rem; margin-bottom: 0.3rem;
      font-weight: bold; text-transform: uppercase;
      color: #ffcc00; font-size: 1rem;
      text-decoration: underline;
    }
    /* Tek tek g√∂rev satƒ±rlarƒ± */
    .taskItem {
      background: #222; border-radius: 5px;
      padding: 0.5rem; margin-bottom: 0.5rem;
      display: flex; justify-content: space-between; align-items: center;
    }
    .taskItem span {
      display: inline-block;
      max-width: 80%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .taskItem button {
      background: #ff4444; padding: 0.3rem 0.5rem; border: none; border-radius: 3px; cursor: pointer;
      color: #fff; font-size: 0.8rem;
      margin-left: 10px;
    }
    /* Tamamlanmƒ±≈ü g√∂rev */
    .completedTask span::after {
      content: " ‚úÖ";
      color: #0f0;
      margin-left: 5px;
    }

    /* Kilitli blok */
    .lockedDifficulty {
      opacity: 0.3; pointer-events: none;
    }

    /* Seviye Barƒ± */
    .difficultyProgressBar {
      background: #444; height: 18px; border-radius: 5px; overflow: hidden; margin-top: 0.5rem;
    }
    .difficultyProgressFill {
      background: #00bfff; width: 0%; height: 100%; transition: width 0.3s ease;
    }
    .progressText { text-align: right; font-size: 0.8rem; margin-top: 2px; }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="logo">
      BLACK DOLPHINE
      <div class="logo-dolphin">
        <svg viewBox="0 0 100 50" xmlns="http://www.w3.org/2000/svg">
          <path d="M10,30 Q20,10 40,20 T90,30 Q70,40 50,35 T10,30 Z"/>
        </svg>
      </div>
    </div>
    <div class="money">Dolar: <span id="money">500000</span></div>
  </header>

  <!-- ANA SAYFA (G√∂rev Sayfasƒ± haricinde her ≈üey) -->
  <div id="mainPage">
    <!-- SOL PANEL: Durumum Sekmesi -->
    <div id="durumumContainer">
      <h2 id="durumumTab" onclick="toggleDurumum()">Durumum &#9660;</h2>
      <div id="durumumContent" class="tab-content">
        <div class="stat-bar" id="vakurStat">
          <div class="stat-label">Vakur üõ°Ô∏è</div>
          <div class="stat-fill" id="vakurFill"></div>
          <div class="stat-text" id="vakurText">Koruma: 0 (0%)</div>
          <div class="badge-indicator">Rozet: <span id="vakurBadgeCount">0</span></div>
        </div>
        <div class="stat-bar lockedStat" id="hatipStat">
          <div class="stat-label">Hatip üë•</div>
          <div class="stat-fill" id="hatipFill"></div>
          <div class="stat-text" id="hatipText">N√ºfus: 0 (0%)</div>
          <div class="badge-indicator">Rozet: <span id="hatipBadgeCount">0</span></div>
        </div>
        <div class="stat-bar lockedStat" id="baronStat">
          <div class="stat-label">Baron ‚ôõ</div>
          <div class="stat-fill" id="baronFill"></div>
          <div class="stat-text" id="baronText">Etki: 0 (0%)</div>
          <div class="badge-indicator">Rozet: <span id="baronBadgeCount">0</span></div>
        </div>
        <div id="profileInfo">K√∂y: <span id="currentVillageDisplay">Asman</span></div>
      </div>
    </div>

    <!-- SAƒû PANEL: K√∂y ƒ∞ncelemesi & Trenle Seyehat -->
    <div id="rightContainer">
      <!-- K√∂y ƒ∞ncelemesi Kutusu -->
      <div id="koyIncelemeBox">
        <h3>K√∂y ƒ∞ncelemesi</h3>
        <ul id="koyIncelemeList"></ul>
        <div id="koyIncelemePagination"></div>
      </div>
      <!-- Trenle Seyehat Kutusu -->
      <div id="trenSeyahatBox">
        <h3>Trenle Seyehat</h3>
        <ul id="trenList"></ul>
        <div id="trenPagination"></div>
      </div>
    </div>

    <!-- ORTA PANEL: Rank Kartlarƒ± (Yatay Hizalƒ±) -->
    <div id="centerRanks">
      <div class="card" id="cardVakur">
        <h2>Vakur</h2>
        <p>Mavi üèÖ</p>
        <button onclick="openGorevPage('Vakur')">G√∂rev ve Rozeti</button>
        <div class="badge-container">Rozet: <span id="blueBadgeCount">0</span></div>
      </div>
      <div class="card locked" id="cardHatip">
        <h2>Hatip</h2>
        <p>Turuncu üèÖ</p>
        <button onclick="openGorevPage('Hatip')">G√∂rev ve Rozeti</button>
        <div class="badge-container">Rozet: <span id="orangeBadgeCount">0</span></div>
      </div>
      <div class="card locked" id="cardBaron">
        <h2>Baron</h2>
        <p>Kƒ±rmƒ±zƒ± üèÖ</p>
        <button onclick="openGorevPage('Baron')">G√∂rev ve Rozeti</button>
        <div class="badge-container">Rozet: <span id="redBadgeCount">0</span></div>
      </div>
    </div>
  </div><!-- /#mainPage -->

  <!-- G√ñREV VE ROZETƒ∞ SAYFASI (Overlay) -->
  <div id="gorevPage">
    <button onclick="closeGorevPage()">Geri D√∂n</button>
    <h1 id="gorevHeader"></h1>
    <!-- T√ºm r√ºtbelerin g√∂revleri aynƒ± sayfada, ama sadece a√ßtƒ±ƒüƒ±mƒ±z r√ºtbeyi g√∂sterelim -->
    <div id="tasksContainer"></div>
  </div>

  <!-- SOL ALT: Sabit K√∂y Bilgisi -->
  <div id="bottomLeft">Asman</div>

  <script>
    /***** GENEL DEƒûƒ∞≈ûKENLER *****/
    let money = 500000;
    let currentVillage = "Asman";

    let vakurTaskCount = 0, hatipTaskCount = 0, baronTaskCount = 0;
    let isHatipUnlocked = false, isBaronUnlocked = false;

    let blueBadgeCount = 0, orangeBadgeCount = 0, redBadgeCount = 0;

    const pageSizes = [3, 3, 5, 5, 5, 5, 5]; // 7 sayfa
    const totalPages = pageSizes.length;

    /* 31 k√∂y -> hepsi 6 At, +random malikane/sƒ±ƒüƒ±nak/villa */
    const allKoyler = [
      "Asman", "Mizrin", "Qeruk", "Twƒ±lveser", "Ashma",
      "Ogean", "Karuk", "Tilkarut", "Midep", "√ñmerk",
      "Tilal", "Olik", "Mƒ±shecerk", "Mƒ±zelb", "Kerg√º",
      "Bozdepe", "Cinnƒ±k", "Mƒ±zrin", "Bostancƒ±", "Masucark",
      "Kƒ±rƒ±kan", "Kuzluk", "Qeremsal", "Medƒ±rbaz", "Hecuk",
      "Zebe≈üker", "Mirƒüan", "Dideri", "Kazƒ±ka", "Nehlnehli",
      "Birdirej", "Cembel"
    ];
    // Rastgele ek alanlar
    const villageData = allKoyler.map(k => ({
      name: k,
      malikane: randomMalikane(),
      siginak: randomSiginak(),
      villa: randomVilla()
    }));

    /* --- G√ñREV METƒ∞NLERƒ∞ (5 x 10 = 50 adet) --- 
       Yapƒ±: rankTasks[ "Vakur" ] = array of difficulties
       Her difficulty -> { title: "Basit G√∂revler", locked: false, tasks: [...] }
       tasks -> { text, done:false }
    */

    // *Vakur*
    const vakurDifficulties = [
      {
        title: "Basit G√∂revler", locked: false, // ilk a√ßƒ±ldƒ±ƒüƒ±nda a√ßƒ±k
        tasks: [
          "Bir √ßocuƒüun okul √ßantasƒ± almasƒ±na yardƒ±mcƒ± ol.",
          "Mahalledeki ya≈ülƒ± bir kom≈üunun alƒ±≈üveri≈ü po≈üetlerini ta≈üƒ±.",
          "Sokaktaki sahipsiz bir k√∂pek i√ßin su ve mama koy.",
          "Arkada≈üƒ±na ufak bir hediye vererek moralini y√ºkselt.",
          "ƒ∞≈üsiz bir tanƒ±dƒ±ƒüƒ±na CV hazƒ±rlama konusunda destek ol.",
          "K√ºt√ºphanede eski kitaplarƒ± d√ºzenlemeye g√∂n√ºll√º ol.",
          "Bir hayƒ±r kurumuna ufak bir baƒüƒ±≈ü yap veya yardƒ±m topla.",
          "Otob√ºste ya≈ülƒ± veya hamile birine yer ver.",
          "Mahalle parkƒ±nda √ß√∂p toplama etkinliƒüine katƒ±l.",
          "Arkada≈üƒ±na k√º√ß√ºk bir s√ºrpriz parti d√ºzenle."
        ].map(t => ({ text: t, done: false }))
      },
      {
        title: "Orta G√∂revler", locked: true,
        tasks: [
          "Aile i√ßinde tartƒ±≈üan iki akrabayƒ± barƒ±≈ütƒ±r.",
          "Mahallede yardƒ±m kermesi veya etkinlik organize et.",
          "Maddi durumu k√∂t√º bir √∂ƒürenciye burs ayarla.",
          "Bir STK‚Äônƒ±n etkinliƒüinde aktif rol al.",
          "Bakƒ±msƒ±z parkƒ± onarmak i√ßin g√∂n√ºll√ºler topla.",
          "Kan baƒüƒ±≈üƒ± kampanyasƒ±na katkƒ±da bulun.",
          "Bir arkada≈üƒ±n i√ßin profesyonel yardƒ±m aracƒ±lƒ±ƒüƒ± yap.",
          "Zorbalƒ±ƒüa uƒürayan birine √ßevrimi√ßi destek bul.",
          "Engelliler i√ßin kamu binalarƒ±na eri≈üim kolaylƒ±ƒüƒ± saƒüla.",
          "Sokak hayvanlarƒ± i√ßin ge√ßici barƒ±nak olu≈ütur."
        ].map(t => ({ text: t, done: false }))
      },
      {
        title: "Zor G√∂revler", locked: true,
        tasks: [
          "Afet b√∂lgesine yardƒ±m ekibi olarak katƒ±l.",
          "Kronik bir sorun i√ßin belediyeyle g√∂r√º≈ü√ºp √ß√∂z√ºm talep et.",
          "Zor durumdaki aileye i≈ü veya barƒ±nma imk√¢nƒ± saƒüla.",
          "Hayvan barƒ±naƒüƒ±nda kapsamlƒ± bakƒ±m ve temizlik yap.",
          "K√ºs olan iki arkada≈üƒ±n barƒ±≈ümasƒ±na aracƒ±lƒ±k et.",
          "Toplum dƒ±≈ülanmƒ±≈ü birini etkinliklere dahil et.",
          "K√º√ß√ºk √ßaplƒ± baƒüƒ±≈ü kampanyasƒ± d√ºzenle.",
          "Yerel hastanede g√∂n√ºll√º refakat programƒ±na katƒ±l.",
          "Belediye ile i≈ü birliƒüi yaparak gen√ßlik merkezi a√ß.",
          "Maddi sƒ±kƒ±ntƒ± ya≈üayan aileler i√ßin erzak paketi daƒüƒ±tƒ±mƒ± yap."
        ].map(t => ({ text: t, done: false }))
      },
      {
        title: "ƒ∞leri G√∂revler", locked: true,
        tasks: [
          "B√ºy√ºk √∂l√ßekli yardƒ±m projesine liderlik et.",
          "Gen√ßlere y√∂nelik mentorluk programƒ± ba≈ülat.",
          "Meslek edindirme kursu organize et.",
          "Toplumsal soruna belediye-STK ortaklƒ±ƒüƒ±yla √ß√∂z√ºm √ºret.",
          "G√∂n√ºll√º ekibi kurarak ya≈ülƒ± bakƒ±mevlerini ziyaret et.",
          "Okullarda 'empati ve yardƒ±mseverlik' semineri d√ºzenle.",
          "Sosyal medya kampanyasƒ±yla yardƒ±m toplama etkinliƒüi d√ºzenle.",
          "√úcretsiz terapi/rehberlik g√ºn√º organize et.",
          "√úniversite √∂ƒürencilerine staj imk√¢nlarƒ± sunan platform olu≈ütur.",
          "√áevre koruma ama√ßlƒ± aƒüa√ßlandƒ±rma kampanyasƒ± d√ºzenle."
        ].map(t => ({ text: t, done: false }))
      },
      {
        title: "Son G√∂revler", locked: true,
        tasks: [
          "Ulusal √ßapta sosyal sorumluluk projesi y√ºr√ºt.",
          "B√ºy√ºk baƒüƒ±≈ü konseri/festival d√ºzenle.",
          "G√∂n√ºll√ºleri bir araya getiren platform kur.",
          "Eƒüitim bursu fonu ba≈ülat.",
          "Aile i√ßi ≈üiddete koruma ve rehabilitasyon hizmeti olu≈ütur.",
          "Yardƒ±m vakfƒ± kurarak s√ºrekli yardƒ±m y√ºr√ºt.",
          "Uluslararasƒ± STK‚Äôlerle i≈ü birliƒüi yaparak yurt dƒ±≈üƒ±na yardƒ±m ta≈üƒ±.",
          "Yurt √ßapƒ±nda geri d√∂n√º≈ü√ºm projesi ba≈ülat.",
          "Dezavantajlƒ± b√∂lgeler i√ßin uzaktan eƒüitim altyapƒ±sƒ± kur.",
          "Saƒülƒ±k hizmetleri alamayan b√∂lgelere mobil saƒülƒ±k aracƒ± g√∂nder."
        ].map(t => ({ text: t, done: false }))
      }
    ];

    // *Hatip*
    const hatipDifficulties = [
      {
        title: "Basit G√∂revler", locked: false,
        tasks: [
          "Sokak kavgasƒ±nƒ± tatlƒ± dille sakinle≈ütir.",
          "Arkada≈ülar arasƒ±ndaki tartƒ±≈ümayƒ± yapƒ±cƒ± s√∂zlerle √ß√∂z.",
          "Aile i√ßi gerginliƒüi dinleyerek gider.",
          "Sosyal medyada tartƒ±≈ümayƒ± tatlƒ±ya baƒüla.",
          "Yanlƒ±≈ü bilgiyi doƒüru kaynakla d√ºzelt.",
          "Dedikoduyu kaynaƒüƒ±ndan √ß√ºr√ºterek sakinle≈ütir.",
          "Okul/kul√ºp etkinliƒüinde kƒ±sa konu≈üma yap.",
          "Ufak grupta hitabet pratiƒüi yap.",
          "Arkada≈ü grubuna moral verici konu≈üma yap.",
          "Sosyal medya √ºzerinden k√º√ß√ºk bilgilendirici yayƒ±n d√ºzenle."
        ].map(t => ({ text: t, done: false }))
      },
      {
        title: "Orta G√∂revler", locked: true,
        tasks: [
          "Kom≈üular arasƒ±ndaki sorunu toplantƒ± ile √ß√∂z.",
          "ƒ∞≈ü yerindeki ileti≈üim kopukluƒüunu arabuluculukla gider.",
          "Yerel hayƒ±r kurumuna baƒüƒ±≈ü toplamak i√ßin ikna et.",
          "K√º√ß√ºk √∂ƒürenci grubuna hitabet eƒüitimi d√ºzenle.",
          "Aile ≈üirketinde tartƒ±≈ümada hakemlik yap.",
          "Sivil toplum giri≈üiminde g√∂n√ºll√º konu≈ümacƒ± ol.",
          "Mahalle muhtarƒ±yla imza kampanyasƒ± ba≈ülat.",
          "G√∂n√ºll√º ekiple sokak sanat√ßƒ±larƒ±na destek saƒüla.",
          "Mahallede √ßevre bilinci semineri d√ºzenle.",
          "Gen√ßlere y√∂nelik k√º√ß√ºk m√ºnazara yarƒ±≈ümalarƒ± organize et."
        ].map(t => ({ text: t, done: false }))
      },
      {
        title: "Zor G√∂revler", locked: true,
        tasks: [
          "ƒ∞ki rakip grubu bir araya getirip barƒ±≈ü g√∂r√º≈ümesi yap.",
          "Ulusal platformda toplumsal bir konuda konu≈ü.",
          "B√ºy√ºk i≈ü anla≈ümazlƒ±ƒüƒ±nda arabulucu rol √ºstlen.",
          "Mahalle halkƒ±nƒ±n taleplerini dile getirip sonu√ß al.",
          "√úniversite protestosunu uzla≈üma yoluyla sonlandƒ±r.",
          "Esnaf arasƒ±ndaki fiyat anla≈ümazlƒ±ƒüƒ±nƒ± uzla≈ütƒ±r.",
          "Binlerce ki≈üilik tartƒ±≈ümayƒ± sakinle≈ütir.",
          "Sivil toplum zirvesinde temsilci olarak konu≈ü.",
          "Yerel basƒ±nda toplumsal sorunlar √ºzerine k√∂≈üe yazƒ±sƒ± yayƒ±nla.",
          "ƒ∞≈üsizlere y√∂nelik motivasyon konu≈ümasƒ± ger√ßekle≈ütir."
        ].map(t => ({ text: t, done: false }))
      },
      {
        title: "ƒ∞leri G√∂revler", locked: true,
        tasks: [
          "B√∂lgesel toplum hareketine √∂nderlik et.",
          "Ulusal konferansta √ß√∂z√ºm √∂nerileri sun.",
          "Yerel siyaset√ßiler ve STK‚Äôler arasƒ±nda diyaloƒüu g√º√ßlendir.",
          "Barƒ±≈ü √ßalƒ±≈ütayƒ±nda moderat√∂rl√ºk yap.",
          "Kurumsal ≈üirkette √ºst d√ºzey m√ºzakerelerde bulun.",
          "Mahalle gerginliƒüini uzla≈üƒ± belgesiyle sonlandƒ±r.",
          "≈ûehrin √∂nde gelenleriyle b√ºy√ºk kampanya d√ºzenle.",
          "√úniversitede 'Barƒ±≈ü√ßƒ±l ƒ∞leti≈üim ve Diplomasi' dersi ver.",
          "Kamu kurumlarƒ±nda ileti≈üim eƒüitimi ver.",
          "≈ûiddetsiz ileti≈üim √ºzerine farkƒ±ndalƒ±k kampanyasƒ± ba≈ülat."
        ].map(t => ({ text: t, done: false }))
      },
      {
        title: "Son G√∂revler", locked: true,
        tasks: [
          "Tebrikler! Baron oldunuz! Ana men√ºye d√∂n√ºyorsunuz."
          // Eƒüer isterseniz burayƒ± 10 madde olarak da geni≈ületebilirsiniz.
        ].map(t => ({ text: t, done: false }))
      }
    ];

    // *Baron*
    // Metninizde 'Son G√∂revler' halinde 10 tane var. ƒ∞sterseniz Basit/Orta/Zor/ƒ∞leri'yi bo≈ü da bƒ±rakabilirsiniz.
    const baronDifficulties = [
      {
        title: "Basit G√∂revler", locked: false,
        tasks: [
          // Eƒüer Baron'un basit/orta vs. istenmiyorsa bo≈ü bƒ±rakabilirsiniz
          "Baron Basit 1 (√ñrnek bo≈ü g√∂rev)",
          "Baron Basit 2 (√ñrnek bo≈ü)",
          "Baron Basit 3",
          "Baron Basit 4",
          "Baron Basit 5",
          "Baron Basit 6",
          "Baron Basit 7",
          "Baron Basit 8",
          "Baron Basit 9",
          "Baron Basit 10"
        ].map(t => ({ text: t, done: false }))
      },
      {
        title: "Orta G√∂revler", locked: true,
        tasks: [
          // ƒ∞sterseniz doldurabilirsiniz
          "Baron Orta 1",
          "Baron Orta 2",
          "Baron Orta 3",
          "Baron Orta 4",
          "Baron Orta 5",
          "Baron Orta 6",
          "Baron Orta 7",
          "Baron Orta 8",
          "Baron Orta 9",
          "Baron Orta 10"
        ].map(t => ({ text: t, done: false }))
      },
      {
        title: "Zor G√∂revler", locked: true,
        tasks: [
          "Baron Zor 1",
          "Baron Zor 2",
          "Baron Zor 3",
          "Baron Zor 4",
          "Baron Zor 5",
          "Baron Zor 6",
          "Baron Zor 7",
          "Baron Zor 8",
          "Baron Zor 9",
          "Baron Zor 10"
        ].map(t => ({ text: t, done: false }))
      },
      {
        title: "ƒ∞leri G√∂revler", locked: true,
        tasks: [
          "Baron ƒ∞leri 1",
          "Baron ƒ∞leri 2",
          "Baron ƒ∞leri 3",
          "Baron ƒ∞leri 4",
          "Baron ƒ∞leri 5",
          "Baron ƒ∞leri 6",
          "Baron ƒ∞leri 7",
          "Baron ƒ∞leri 8",
          "Baron ƒ∞leri 9",
          "Baron ƒ∞leri 10"
        ].map(t => ({ text: t, done: false }))
      },
      {
        title: "Son G√∂revler", locked: true,
        tasks: [
          "K√ºresel √ßapta eƒüitim reformlarƒ±nƒ± destekleyen vakƒ±f kur ve finanse et.",
          "Prestijli √ºniversitelerin kamp√ºs in≈üaatlarƒ±na yatƒ±rƒ±m yap.",
          "Uluslararasƒ± √∂ƒürenci burs programlarƒ±nƒ± ba≈ülat ve fonla.",
          "B√ºy√ºk ≈üehirlerde modern kre≈ü a√ßƒ±lƒ±≈ülarƒ±nƒ± ger√ßekle≈ütir.",
          "Protez bacak ve saƒülƒ±k ekipmanlarƒ± √ºretimine b√ºy√ºk yatƒ±rƒ±m yap.",
          "Afet b√∂lgelerinde yeniden yapƒ±landƒ±rma projelerini finanse et.",
          "√úst d√ºzey bilimsel ara≈ütƒ±rmalara mali destek saƒüla.",
          "Yenilenebilir enerji projelerine uluslararasƒ± yatƒ±rƒ±m yap.",
          "D√ºnya genelinde k√ºlt√ºr-sanat merkezleri in≈üa ettir.",
          "K√ºresel saƒülƒ±k fonlarƒ± kurarak saƒülƒ±k sistemlerini destekle."
        ].map(t => ({ text: t, done: false }))
      }
    ];

    // T√ºm r√ºtbelerin difficulties'i tek objede:
    const rankData = {
      "Vakur": vakurDifficulties,
      "Hatip": hatipDifficulties,
      "Baron": baronDifficulties
    };

    /***** SAYFALAMA ƒ∞NCELEME/TREN *****/
    let currentIncelemePage = 1;
    let currentTrenPage = 1;

    window.onload = function() {
      updateMoneyUI();
      updateProfileInfo();
      updateStatBars();
      updateBadgesUI();
      displayKoyIncelemePage(1);
      displayTrenPage(1);
    };

    function randomMalikane() {
      const arr = [5, 10, 15];
      return arr[Math.floor(Math.random() * arr.length)];
    }
    function randomSiginak() {
      const arr = [50, 75, 100];
      return arr[Math.floor(Math.random() * arr.length)];
    }
    function randomVilla() {
      const arr = [25, 50, 75];
      return arr[Math.floor(Math.random() * arr.length)];
    }

    /***** K√ñY ƒ∞NCELEME *****/
    function displayKoyIncelemePage(page) {
      currentIncelemePage = page;
      const pageSize = pageSizes[page - 1];
      let startIndex = 0;
      for(let i=0; i<page-1; i++){
        startIndex += pageSizes[i];
      }
      let endIndex = startIndex + pageSize;

      const ul = document.getElementById("koyIncelemeList");
      ul.innerHTML = "";
      for(let i=startIndex; i<endIndex; i++){
        if(i >= villageData.length) break;
        const v = villageData[i];
        const li = document.createElement("li");
        li.innerHTML = `<span>${v.name} (6 At)</span>
                        <button onclick="inceleKoy('${v.name}')">ƒ∞ncele</button>`;
        ul.appendChild(li);
      }
      renderKoyIncelemePagination();
    }
    function renderKoyIncelemePagination() {
      const pagination = document.getElementById("koyIncelemePagination");
      pagination.innerHTML = "";
      for(let p=1; p<=totalPages; p++){
        const span = document.createElement("span");
        span.innerText = p;
        if(p === currentIncelemePage){
          span.classList.add("active");
        }
        span.onclick = () => displayKoyIncelemePage(p);
        pagination.appendChild(span);
      }
    }
    function inceleKoy(koyName) {
      let found = villageData.find(v => v.name === koyName);
      if(!found) return;
      alert(
        "K√∂y: " + koyName + "\n" +
        "Malikane: " + found.malikane + "\n" +
        "Sƒ±ƒüƒ±nak: " + found.siginak + "\n" +
        "Villa: " + found.villa
      );
    }

    /***** TRENLE SEYEHAT *****/
    function displayTrenPage(page) {
      currentTrenPage = page;
      const pageSize = pageSizes[page - 1];
      let startIndex = 0;
      for(let i=0; i<page-1; i++){
        startIndex += pageSizes[i];
      }
      let endIndex = startIndex + pageSize;

      const trenList = document.getElementById("trenList");
      trenList.innerHTML = "";
      for(let i=startIndex; i<endIndex; i++){
        if(i >= allKoyler.length) break;
        const li = document.createElement("li");
        li.innerHTML = `<span>${allKoyler[i]}</span>
                        <button onclick="travelToTrain('${allKoyler[i]}')">Seyahat Et</button>`;
        trenList.appendChild(li);
      }
      renderTrenPagination();
    }
    function renderTrenPagination() {
      const pagination = document.getElementById("trenPagination");
      pagination.innerHTML = "";
      for(let p=1; p<=totalPages; p++){
        const span = document.createElement("span");
        span.innerText = p;
        if(p === currentTrenPage) {
          span.classList.add("active");
        }
        span.onclick = () => displayTrenPage(p);
        pagination.appendChild(span);
      }
    }
    function travelToTrain(village) {
      if(currentVillage === village) return;
      if(money < 500) {
        alert("Tren bileti i√ßin yeterli paranƒ±z yok!");
        return;
      }
      money -= 500;
      currentVillage = village;
      updateMoneyUI();
      updateProfileInfo();
      alert("Trenle " + currentVillage + " k√∂y√ºne geldiniz!");
    }

    /***** DURUMUM SEKMESƒ∞ (A√ß/Kapa) *****/
    function toggleDurumum() {
      let content = document.getElementById('durumumContent');
      let tab = document.getElementById('durumumTab');
      if(content.classList.contains('active')){
        content.classList.remove('active');
        tab.innerHTML = "Durumum &#9660;";
      } else {
        content.classList.add('active');
        tab.innerHTML = "Durumum &#9650;";
      }
    }

    /***** PARA & K√ñY ADI G√úNCELLEME *****/
    function updateMoneyUI() {
      document.getElementById('money').innerText = money;
    }
    function updateProfileInfo() {
      document.getElementById('currentVillageDisplay').innerText = currentVillage;
      document.getElementById('bottomLeft').innerText = currentVillage;
    }

    /***** RANK & STAT BAR HESAPLARI *****/
    function getVakurKoruma() {
      let koruma = Math.floor(vakurTaskCount / 22);
      return (koruma % 661 === 0 && koruma > 0) ? 660 : koruma % 661;
    }
    function getHatipNufus() {
      let nufus = Math.floor(hatipTaskCount / 40) * 5;
      return (nufus % 201 === 0 && nufus > 0) ? 200 : nufus % 201;
    }
    function getBaronEtki() {
      let etki = Math.floor(baronTaskCount * 2);
      return (etki % 501 === 0 && etki > 0) ? 500 : etki % 501;
    }
    function updateStatBars() {
      // Vakur
      let vakurValue = getVakurKoruma();
      let vakurYuzde = (vakurValue / 660) * 100;
      document.getElementById('vakurText').innerText = "Koruma: " + vakurValue + " (" + Math.floor(vakurYuzde) + "%)";
      document.getElementById('vakurFill').style.width = vakurYuzde + "%";

      // Hatip
      if (isHatipUnlocked) {
        document.getElementById('hatipStat').classList.remove("lockedStat");
        let hatipValue = getHatipNufus();
        let hatipYuzde = (hatipValue / 200) * 100;
        document.getElementById('hatipText').innerText = "N√ºfus: " + hatipValue + " (" + Math.floor(hatipYuzde) + "%)";
        document.getElementById('hatipFill').style.width = hatipYuzde + "%";
      } else {
        document.getElementById('hatipStat').classList.add("lockedStat");
      }

      // Baron
      if (isBaronUnlocked) {
        document.getElementById('baronStat').classList.remove("lockedStat");
        let baronValue = getBaronEtki();
        let baronYuzde = (baronValue / 500) * 100;
        document.getElementById('baronText').innerText = "Etki: " + baronValue + " (" + Math.floor(baronYuzde) + "%)";
        document.getElementById('baronFill').style.width = baronYuzde + "%";
      } else {
        document.getElementById('baronStat').classList.add("lockedStat");
      }
    }

    /***** ROZET G√ñSTERGESƒ∞ G√úNCELLEME *****/
    function updateBadgesUI() {
      document.getElementById('blueBadgeCount').innerText = blueBadgeCount;
      document.getElementById('orangeBadgeCount').innerText = orangeBadgeCount;
      document.getElementById('redBadgeCount').innerText = redBadgeCount;
      document.getElementById('vakurBadgeCount').innerText = blueBadgeCount;
      document.getElementById('hatipBadgeCount').innerText = orangeBadgeCount;
      document.getElementById('baronBadgeCount').innerText = redBadgeCount;
    }

    /***** G√ñREV SAYFASI (Overlay) *****/
    let currentRank = "";
    function openGorevPage(rank) {
      // Kilit kontrol
      if(rank === "Hatip" && !isHatipUnlocked) return;
      if(rank === "Baron" && !isBaronUnlocked) return;

      currentRank = rank;
      document.getElementById('mainPage').style.display = "none";
      let gorevPage = document.getElementById('gorevPage');
      gorevPage.style.display = "block";
      document.getElementById('gorevHeader').innerText = rank + " G√∂revleri";

      // G√∂revleri y√ºkle
      loadRankTasks(rank);
    }
    function closeGorevPage() {
      document.getElementById('gorevPage').style.display = "none";
      document.getElementById('mainPage').style.display = "block";
    }

    // G√∂revleri ekrana basma
    function loadRankTasks(rank) {
      const container = document.getElementById("tasksContainer");
      container.innerHTML = "";

      const difficulties = rankData[rank]; // 5 array: Basit, Orta, Zor, ƒ∞leri, Son
      difficulties.forEach((diffObj, diffIndex) => {
        let section = document.createElement("div");
        section.className = "rankSection";
        // Kilitliyse saydam yap
        if(diffObj.locked) {
          section.classList.add("lockedDifficulty");
        }

        let h2 = document.createElement("h2");
        h2.innerText = diffObj.title;
        section.appendChild(h2);

        // G√∂rev satƒ±rlarƒ±
        diffObj.tasks.forEach((task, taskIndex) => {
          let divTask = document.createElement("div");
          divTask.className = "taskItem";
          if(task.done) {
            divTask.classList.add("completedTask");
          }
          // Satƒ±r
          divTask.innerHTML = `
            <span>${task.text}</span>
            <button onclick="completeTask('${rank}', ${diffIndex}, ${taskIndex})">Tamamla</button>
          `;
          section.appendChild(divTask);
        });

        // Seviye bar
        let progressBar = document.createElement("div");
        progressBar.className = "difficultyProgressBar";
        let progressFill = document.createElement("div");
        progressFill.className = "difficultyProgressFill";
        progressBar.appendChild(progressFill);

        let pText = document.createElement("div");
        pText.className = "progressText";
        section.appendChild(progressBar);
        section.appendChild(pText);

        container.appendChild(section);

        updateDifficultyProgress(rank, diffIndex); // bar g√ºncelle
      });
    }

    // G√∂revi tamamla => tƒ±klanƒ±nca ye≈üil tik ekle
    function completeTask(rank, diffIndex, taskIndex) {
      let difficulties = rankData[rank];
      let diffObj = difficulties[diffIndex];
      if(diffObj.locked) {
        alert("Bu g√∂rev ≈üu anda kilitli!");
        return;
      }
      let taskItem = diffObj.tasks[taskIndex];
      if(taskItem.done) {
        alert("Bu g√∂revi zaten tamamladƒ±nƒ±z!");
        return;
      }

      // G√∂revi tamamla
      taskItem.done = true;
      // Ye≈üil tik efektini yansƒ±tmak i√ßin sayfayƒ± yenilemeden sadece o satƒ±rƒ± g√ºncelleyebilirsiniz.
      loadRankTasks(rank);

      // R√ºtbeye g√∂re global g√∂rev sayƒ±sƒ±nƒ± arttƒ±ralƒ±m
      if(rank === "Vakur") {
        vakurTaskCount++;
        checkVakurRewards();
      } else if(rank === "Hatip") {
        hatipTaskCount++;
        checkHatipRewards();
      } else if(rank === "Baron") {
        baronTaskCount++;
        checkBaronRewards(taskItem.text);
      }
      updateStatBars();
      updateBadgesUI();

      // Bu difficulty‚Äôdeki t√ºm g√∂revler bitmi≈üse => kilidi a√ß => sonraki difficulty
      let allDone = diffObj.tasks.every(t => t.done === true);
      if(allDone) {
        // Sonrakini a√ß
        if(diffIndex < difficulties.length - 1) {
          difficulties[diffIndex+1].locked = false;
          alert(diffObj.title + " bitti! '" + difficulties[diffIndex+1].title + "' b√∂l√ºm√º a√ßƒ±ldƒ±.");
        } else {
          // Bu son difficulty
          alert("Bu ranktaki t√ºm g√∂revleri tamamladƒ±nƒ±z!");
          // Belki rank y√ºkselir => Hatip a√ßƒ±lƒ±r, Baron a√ßƒ±lƒ±r
          if(rank === "Vakur" && !isHatipUnlocked) {
            isHatipUnlocked = true;
            document.getElementById("cardHatip").classList.remove("locked");
            alert("Tebrikler! Hatip r√ºtbesi a√ßƒ±ldƒ±!");
          }
          else if(rank === "Hatip" && !isBaronUnlocked) {
            isBaronUnlocked = true;
            document.getElementById("cardBaron").classList.remove("locked");
            alert("Tebrikler! Baron r√ºtbesi a√ßƒ±ldƒ±!");
          }
        }
      }
      // Tek tek barƒ± g√ºncelle
      updateDifficultyProgress(rank, diffIndex);
    }

    // Her difficulty‚Äôde 10 g√∂rev var => Tamamlanan sayƒ±sƒ±nƒ± hesapla ve % olarak yansƒ±t
    function updateDifficultyProgress(rank, diffIndex) {
      let diffObj = rankData[rank][diffIndex];
      let doneCount = diffObj.tasks.filter(t => t.done).length;
      let percent = Math.floor((doneCount / diffObj.tasks.length) * 100);
      // Dom'a yansƒ±t
      let container = document.getElementById("tasksContainer").getElementsByClassName("rankSection")[diffIndex];
      if(!container) return;
      let fillBar = container.getElementsByClassName("difficultyProgressFill")[0];
      let textEl = container.getElementsByClassName("progressText")[0];
      fillBar.style.width = percent + "%";
      textEl.innerText = doneCount + " / " + diffObj.tasks.length + " (" + percent + "%)";
    }

    /***** 50 g√∂revde rozet/kazan√ß vs. *****/
    function checkVakurRewards() {
      if(vakurTaskCount % 50 === 0 && vakurTaskCount>0) {
        blueBadgeCount++;
        alert("Vakur: 50 g√∂rev tamamladƒ±n! +1 Rozet");
      }
    }
    function checkHatipRewards() {
      if(hatipTaskCount % 50 === 0 && hatipTaskCount>0) {
        orangeBadgeCount++;
        alert("Hatip: 50 g√∂rev tamamladƒ±n! +5 N√ºfus, +1 Rozet");
        // N√ºfus artƒ±≈üƒ±: stat bar'a yansƒ±yacak ≈üekilde hatipTaskCount arttƒ±, getHatipNufus() da artacak
      }
    }
    function checkBaronRewards(taskText) {
      if(baronTaskCount % 50 === 0 && baronTaskCount>0) {
        redBadgeCount++;
        money += 10000; // ekstra para
        updateMoneyUI();
        alert("Baron: 50 g√∂rev tamamladƒ±n! +10.000$ ve +1 Rozet\nAncak bu kazan√ß Vakur rozetini d√º≈ü√ºrebilir...");
        // Vakur rozeti 1 d√º≈ü√ºr, min 0
        if(blueBadgeCount > 0) {
          blueBadgeCount--;
        }
      }
      // Eƒüer ‚Äúhayƒ±r i≈üi‚Äù vb. bir metin yakalarsak Vakur rozeti geri artsƒ±n
      if(taskText.toLowerCase().includes("hayƒ±r") || taskText.toLowerCase().includes("saƒülƒ±k") || taskText.toLowerCase().includes("afet") ) {
        // √ñrnek: hayƒ±r i≈üi -> Vakur rozeti +1
        blueBadgeCount++;
        alert("Baron olarak hayƒ±r i≈üi yaptƒ±nƒ±z! Vakur rozeti +1");
      }
    }
  </script>
</body>
</html>
